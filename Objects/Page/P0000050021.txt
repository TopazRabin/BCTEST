OBJECT Page 50021 Sales Quote Subform2
{
  OBJECT-PROPERTIES
  {
    Date=10/22/20;
    Time=[ 4:57:39 AM];
    Modified=Yes;
    Version List=NAVW110.00.00.18197,NAVNA10.00.00.18197,NAVMX10.00.00.18197,SE0.54.10,TOP030A,050,020,100A,030B,110,170,180,230;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Lines;
               ESM=L°neas;
               FRC=Lignes;
               ENC=Lines];
    MultipleNewLines=Yes;
    LinksAllowed=No;
    SourceTable=Table37;
    DelayedInsert=Yes;
    SourceTableView=WHERE(Document Type=FILTER(Quote),
                          Document No.=CONST(E38663));
    PageType=ListPart;
    AutoSplitKey=Yes;
    OnInit=BEGIN
             SalesSetup.GET;
             Currency.InitRoundingPrecision;
           END;

    OnOpenPage=VAR
                 TaxGroup@1020000 : Record 321;
               BEGIN
                 //{=======} MODIFIED
                 ;ESACC_EasySecurity(TRUE);
               END;

    OnAfterGetRecord=VAR
                       tmpitem@1000000000 : Record 27;
                     BEGIN
                       {ShowShortcutDimCode(ShortcutDimCode);


                       //<TPZ1545>//EB
                        IF ("Document Type" IN ["Document Type"::Order,"Document Type"::Quote]) AND (Type=Type::Item) THEN BEGIN
                         IF tmpitem.GET("No.") THEN

                        StyleTxtBlocked:= 'Standard';
                           CASE tmpitem.Blocked OF
                             tmpitem.Blocked::All:
                               StyleTxtBlocked :='StandardAccent';
                             tmpitem.Blocked::Sale:
                               StyleTxtBlocked :='Attention';
                             tmpitem.Blocked::Purchase:
                               StyleTxtBlocked :='Ambiguous';
                             tmpitem.Blocked::NPI:
                               StyleTxtBlocked :='favorable';
                             ELSE
                              StyleTxtBlocked:= 'Standard';
                           END;
                         END;
                          //EB </TPZ1545>

                       //<TPZ1125>
                       IF "Actual Unit Price"<>xRec."Actual Unit Price" THEN
                         StyleTxt :="Unit Price Color";
                         //TOP230 KT ABCSI CRP 2 Fixes 05012015  //EB
                       //<TPZ1125>
                       GetLastSalesPrice(Rec); //TOP180 KT ABCSI Customer Pricing - Hot Sheets 04142015
                       }
                     END;

    OnNewRecord=VAR
                  ApplicationAreaSetup@1001 : Record 9178;
                BEGIN
                  IF ApplicationAreaSetup.IsFoundationEnabled THEN
                    Type := Type::Item
                  ELSE
                    InitType;

                  CLEAR(ShortcutDimCode);

                  StyleTxt := Table37EventSubscribers.Tb37_SetStyle(Rec);  //TOP230 KT ABCSI CRP 2 Fixes 05012015
                END;

    OnInsertRecord=VAR
                     ApplicationAreaSetup@1000 : Record 9178;
                   BEGIN
                     IF ApplicationAreaSetup.IsFoundationEnabled THEN
                       Type := Type::Item;
                   END;

    OnDeleteRecord=VAR
                     ReserveSalesLine@1000 : Codeunit 99000832;
                   BEGIN
                     IF (Quantity <> 0) AND ItemExists("No.") THEN BEGIN
                       COMMIT;
                       IF NOT ReserveSalesLine.DeleteLineConfirm(Rec) THEN
                         EXIT(FALSE);
                       ReserveSalesLine.DeleteLine(Rec);
                     END;
                   END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 17      ;1   ;Action    ;
                      Name=InsertExtTexts;
                      AccessByPermission=TableData 279=R;
                      CaptionML=[ENU=Insert &Ext. Text;
                                 ESM=Insertar &textos adicionales;
                                 FRC=InsÇrer te&xtes Çtendus;
                                 ENC=Insert &Ext. Text];
                      ToolTipML=[ENU=Insert an extended description for the sales document.;
                                 ESM=Inserta una descripci¢n ampliada para el documento de venta.;
                                 FRC=InsÇrez une description plus longue pour le document vente.;
                                 ENC=Insert an extended description for the sales document.];
                      ApplicationArea=#Suite;
                      Visible=ESACC_C17_Visible;
                      Enabled=ESACC_C17_Enabled;
                      Image=Text;
                      OnAction=BEGIN
                                 InsertExtendedText(TRUE);
                               END;
                                }
      { 1907075804;1 ;Action    ;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESM=Dimensiones;
                                 FRC=Dimensions;
                                 ENC=Dimensions];
                      ToolTipML=[ENU=View or edits dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESM=Permite ver o editar dimensiones, como el †rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.;
                                 FRC=Affichez ou modifiez les axes analytiques, tels que la zone, le projet ou le dÇpartement que vous pouvez affecter aux documents vente et achat afin de distribuer les coñts et analyser l'historique des transactions.;
                                 ENC=View or edits dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyse transaction history.];
                      ApplicationArea=#Suite;
                      Visible=ESACC_C1907075804_Visible;
                      Enabled=ESACC_C1907075804_Enabled;
                      Image=Dimensions;
                      OnAction=BEGIN
                                 ShowDimensions;
                               END;
                                }
      { 1907935204;1 ;ActionGroup;
                      CaptionML=[ENU=&Line;
                                 ESM=&L°nea;
                                 FRC=&Ligne;
                                 ENC=&Line];
                      Image=Line }
      { 1901743104;2 ;ActionGroup;
                      CaptionML=[ENU=Item Availability by;
                                 ESM=Disponibilidad prod. por;
                                 FRC=DisponibilitÇ article par;
                                 ENC=Item Availability by];
                      Image=ItemAvailability }
      { 5       ;3   ;Action    ;
                      CaptionML=[ENU=Event;
                                 ESM=Evento;
                                 FRC=êvÇnement;
                                 ENC=Event];
                      Visible=ESACC_C5_Visible;
                      Enabled=ESACC_C5_Enabled;
                      Image=Event;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByEvent)
                               END;
                                }
      { 1907981204;3 ;Action    ;
                      CaptionML=[ENU=Period;
                                 ESM=Periodo;
                                 FRC=PÇriode;
                                 ENC=Period];
                      Visible=ESACC_C1907981204_Visible;
                      Enabled=ESACC_C1907981204_Enabled;
                      Image=Period;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByPeriod)
                               END;
                                }
      { 1903587104;3 ;Action    ;
                      CaptionML=[ENU=Variant;
                                 ESM=Variante;
                                 FRC=Variante;
                                 ENC=Variant];
                      Visible=ESACC_C1903587104_Visible;
                      Enabled=ESACC_C1903587104_Enabled;
                      Image=ItemVariant;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByVariant)
                               END;
                                }
      { 1903134404;3 ;Action    ;
                      AccessByPermission=TableData 14=R;
                      CaptionML=[ENU=Location;
                                 ESM=AlmacÇn;
                                 FRC=Magasin;
                                 ENC=Location];
                      Visible=ESACC_C1903134404_Visible;
                      Enabled=ESACC_C1903134404_Enabled;
                      Image=Warehouse;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByLocation)
                               END;
                                }
      { 26      ;3   ;Action    ;
                      CaptionML=[ENU=BOM Level;
                                 ESM=Nivel L.M.;
                                 FRC=Niveau nomenclature;
                                 ENC=BOM Level];
                      Visible=ESACC_C26_Visible;
                      Enabled=ESACC_C26_Enabled;
                      Image=BOMLevel;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByBOM)
                               END;
                                }
      { 1901092104;2 ;Action    ;
                      CaptionML=[ENU=Select Item Substitution;
                                 ESM=Seleccionar prod. alternativo;
                                 FRC=SÇlectionner article de substitution;
                                 ENC=Select Item Substitution];
                      ToolTipML=[ENU=Select another item that has been set up to be sold instead of the original item if it is unavailable.;
                                 ESM=Seleccione otro producto que se haya configurado para venderse en vez del producto original si no est† disponible.;
                                 FRC=SÇlectionnez un autre article qui a ÇtÇ configurÇ pour àtre vendu Ö la place de l'article initial, s'il n'est pas disponible.;
                                 ENC=Select another item that has been set up to be sold instead of the original item if it is unavailable.];
                      ApplicationArea=#Suite;
                      Visible=ESACC_C1901092104_Visible;
                      Enabled=ESACC_C1901092104_Enabled;
                      Image=SelectItemSubstitution;
                      OnAction=BEGIN
                                 ShowItemSub;
                               END;
                                }
      { 1902027204;2 ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESM=C&omentarios;
                                 FRC=Co&mmentaires;
                                 ENC=Co&mments];
                      Visible=ESACC_C1902027204_Visible;
                      Enabled=ESACC_C1902027204_Enabled;
                      Image=ViewComments;
                      OnAction=BEGIN
                                 ShowLineComments;
                               END;
                                }
      { 1907184504;2 ;Action    ;
                      AccessByPermission=TableData 5800=R;
                      CaptionML=[ENU=Item Charge &Assignment;
                                 ESM=&Asignaci¢n cargos prod.;
                                 FRC=&Affectation frais annexes;
                                 ENC=Item Charge &Assignment];
                      Visible=ESACC_C1907184504_Visible;
                      Enabled=ESACC_C1907184504_Enabled;
                      Image=ItemCosts;
                      OnAction=BEGIN
                                 ItemChargeAssgnt;
                               END;
                                }
      { 1905987604;2 ;Action    ;
                      ShortCutKey=Shift+Ctrl+I;
                      CaptionML=[ENU=Item &Tracking Lines;
                                 ESM=L°ns. se&guim. prod.;
                                 FRC=Lignes &traáabilitÇ;
                                 ENC=Item &Tracking Lines];
                      Visible=ESACC_C1905987604_Visible;
                      Enabled=ESACC_C1905987604_Enabled;
                      Image=ItemTrackingLines;
                      OnAction=VAR
                                 Item@1001 : Record 27;
                               BEGIN
                                 Item.GET("No.");
                                 Item.TESTFIELD("Assembly Policy",Item."Assembly Policy"::"Assemble-to-Stock");
                                 TESTFIELD("Qty. to Asm. to Order (Base)",0);
                                 OpenItemTrackingLines;
                               END;
                                }
      { 1000000028;2 ;Action    ;
                      CaptionML=ENU=Change Log Entries;
                      Visible=ESACC_C1000000028_Visible AND (ChangeLogEntriesVisible);
                      Enabled=ESACC_C1000000028_Enabled;
                      Image=History;
                      OnAction=VAR
                                 ChangeLogEntry@1000000000 : Record 405;
                                 Number@1000000001 : Integer;
                                 ChangeLogMgt@1000000002 : Codeunit 423;
                                 Codeunit423EventSubscriber@1000000003 : Codeunit 51876;
                               BEGIN
                                 //<TPZ1728>
                                 Number := "Document Type";
                                 Codeunit423EventSubscriber.CU423_OpenSSRSReport(DATABASE::"Sales Line", FORMAT(Number), "Document No.", FORMAT("Line No."));
                                 EXIT;
                                 //</TPZ1728>


                                 // <TPZ129>
                                 Number := "Document Type";
                                 ChangeLogEntry.RESET;
                                 ChangeLogEntry.SETRANGE("Table No.",DATABASE::"Sales Line");
                                 ChangeLogEntry.SETRANGE("Primary Key Field 1 Value",FORMAT(Number));
                                 ChangeLogEntry.SETRANGE("Primary Key Field 2 Value","Document No.");
                                 ChangeLogEntry.SETRANGE("Primary Key Field 3 Value",FORMAT("Line No."));
                                 PAGE.RUNMODAL(PAGE::"Change Log Entries",ChangeLogEntry);
                                 // </TPZ129>
                               END;
                                }
      { 13      ;2   ;Action    ;
                      AccessByPermission=TableData 5718=R;
                      CaptionML=[ENU=Nonstoc&k Items;
                                 ESM=Prods. no in&ventariables;
                                 FRC=Articles &hors stock;
                                 ENC=Nonstoc&k Items];
                      ApplicationArea=#Basic,#Suite;
                      Visible=ESACC_C13_Visible;
                      Enabled=ESACC_C13_Enabled;
                      Image=NonStockItem;
                      OnAction=BEGIN
                                 ShowNonstockItems;
                               END;
                                }
      { 15      ;2   ;ActionGroup;
                      CaptionML=[ENU=Assemble to Order;
                                 ESM=Ensamblar para pedido;
                                 FRC=Assembler pour commande;
                                 ENC=Assemble to Order];
                      ActionContainerType=NewDocumentItems;
                      Image=AssemblyBOM }
      { 3       ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=Assemble-to-Order Lines;
                                 ESM=Ensamblar para l°neas de pedido;
                                 FRC=Lignes Assembler pour commande;
                                 ENC=Assemble-to-Order Lines];
                      Visible=ESACC_C3_Visible;
                      Enabled=ESACC_C3_Enabled;
                      OnAction=BEGIN
                                 ShowAsmToOrderLines;
                               END;
                                }
      { 9       ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Roll Up &Price;
                                 ESM=Revertir &precio;
                                 FRC=&Prix relation;
                                 ENC=Roll Up &Price];
                      Visible=ESACC_C9_Visible;
                      Enabled=ESACC_C9_Enabled;
                      OnAction=BEGIN
                                 RollupAsmPrice;
                               END;
                                }
      { 7       ;3   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Roll Up &Cost;
                                 ESM=Distribuir &coste;
                                 FRC=&Coñts relation;
                                 ENC=Roll Up &Cost];
                      Visible=ESACC_C7_Visible;
                      Enabled=ESACC_C7_Enabled;
                      OnAction=BEGIN
                                 RollUpAsmCost;
                               END;
                                }
      { 25      ;1   ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESM=F&unciones;
                                 FRC=Fonction&s;
                                 ENC=F&unctions];
                      Image=Action }
      { 23      ;2   ;Action    ;
                      AccessByPermission=TableData 7002=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get &Price;
                                 ESM=Traer &precio;
                                 FRC=Extraire &prix;
                                 ENC=Get &Price];
                      Visible=ESACC_C23_Visible;
                      Enabled=ESACC_C23_Enabled;
                      Image=Price;
                      OnAction=BEGIN
                                 ShowPrices
                               END;
                                }
      { 21      ;2   ;Action    ;
                      AccessByPermission=TableData 7004=R;
                      Ellipsis=Yes;
                      CaptionML=[ENU=Get Li&ne Discount;
                                 ESM=Traer descuento l°&nea;
                                 FRC=E&xtraire remise ligne;
                                 ENC=Get Li&ne Discount];
                      Visible=ESACC_C21_Visible;
                      Enabled=ESACC_C21_Enabled;
                      Image=LineDiscount;
                      OnAction=BEGIN
                                 ShowLineDisc
                               END;
                                }
      { 19      ;2   ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=E&xplode BOM;
                                 ESM=D&esplegar L.M.;
                                 FRC=&Eclater nomenclature;
                                 ENC=E&xplode BOM];
                      Visible=ESACC_C19_Visible;
                      Enabled=ESACC_C19_Enabled;
                      Image=ExplodeBOM;
                      OnAction=BEGIN
                                 ExplodeBOM;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 1000000001;2;Field  ;
                BlankZero=Yes;
                SourceExpr="Qte. Qty. Shipped";
                Visible=ESACC_F51088_Visible;
                HideValue=ESACC_F51088_HideValue }

  }
  CODE
  {
    VAR
      ESACC_ESFLADSMgt@14123801 : Codeunit 14123801;
      ESACC_C3_Visible@905000030 : Boolean INDATASET;
      ESACC_C3_Enabled@905000033 : Boolean INDATASET;
      ESACC_C5_Visible@905000050 : Boolean INDATASET;
      ESACC_C5_Enabled@905000053 : Boolean INDATASET;
      ESACC_C7_Visible@905000070 : Boolean INDATASET;
      ESACC_C7_Enabled@905000073 : Boolean INDATASET;
      ESACC_C9_Visible@905000090 : Boolean INDATASET;
      ESACC_C9_Enabled@905000093 : Boolean INDATASET;
      ESACC_C13_Visible@905000130 : Boolean INDATASET;
      ESACC_C13_Enabled@905000133 : Boolean INDATASET;
      ESACC_C17_Visible@905000170 : Boolean INDATASET;
      ESACC_C17_Enabled@905000173 : Boolean INDATASET;
      ESACC_C19_Visible@905000190 : Boolean INDATASET;
      ESACC_C19_Enabled@905000193 : Boolean INDATASET;
      ESACC_C21_Visible@905000210 : Boolean INDATASET;
      ESACC_C21_Enabled@905000213 : Boolean INDATASET;
      ESACC_C23_Visible@905000230 : Boolean INDATASET;
      ESACC_C23_Enabled@905000233 : Boolean INDATASET;
      ESACC_C26_Visible@905000260 : Boolean INDATASET;
      ESACC_C26_Enabled@905000263 : Boolean INDATASET;
      ESACC_C1000000028_Visible@915000280 : Boolean INDATASET;
      ESACC_C1000000028_Enabled@915000283 : Boolean INDATASET;
      ESACC_C1901092104_Visible@925921040 : Boolean INDATASET;
      ESACC_C1901092104_Enabled@925921043 : Boolean INDATASET;
      ESACC_C1902027204_Visible@935272040 : Boolean INDATASET;
      ESACC_C1902027204_Enabled@935272043 : Boolean INDATASET;
      ESACC_C1903134404_Visible@946344040 : Boolean INDATASET;
      ESACC_C1903134404_Enabled@946344043 : Boolean INDATASET;
      ESACC_C1903587104_Visible@950871040 : Boolean INDATASET;
      ESACC_C1903587104_Enabled@950871043 : Boolean INDATASET;
      ESACC_C1905987604_Visible@974876040 : Boolean INDATASET;
      ESACC_C1905987604_Enabled@974876043 : Boolean INDATASET;
      ESACC_C1907075804_Visible@985758040 : Boolean INDATASET;
      ESACC_C1907075804_Enabled@985758043 : Boolean INDATASET;
      ESACC_C1907184504_Visible@986845040 : Boolean INDATASET;
      ESACC_C1907184504_Enabled@986845043 : Boolean INDATASET;
      ESACC_C1907981204_Visible@904812040 : Boolean INDATASET;
      ESACC_C1907981204_Enabled@904812043 : Boolean INDATASET;
      ESACC_F51088_Visible@900510880 : Boolean INDATASET;
      ESACC_F51088_HideValue@900510882 : Boolean INDATASET;
      TotalSalesHeader@1017 : Record 36;
      TotalSalesLine@1016 : Record 37;
      SalesHeader@1000 : Record 36;
      Currency@1005 : Record 4;
      SalesSetup@1018 : Record 311;
      TransferExtendedText@1002 : Codeunit 378;
      SalesPriceCalcMgt@1004 : Codeunit 7000;
      ItemAvailFormsMgt@1001 : Codeunit 353;
      UserMgt@1000000005 : Codeunit 5700;
      SalesCalcDiscByType@1015 : Codeunit 56;
      DocumentTotals@1014 : Codeunit 57;
      VATAmount@1013 : Decimal;
      ShortcutDimCode@1003 : ARRAY [8] OF Code[20];
      RowIsText@1012 : Boolean;
      UnitofMeasureCodeIsChangeable@1008 : Boolean;
      InvoiceDiscountAmount@1011 : Decimal;
      InvoiceDiscountPct@1006 : Decimal;
      InvDiscAmountEditable@1007 : Boolean;
      TaxGroupCodeVisible@1020000 : Boolean;
      "****ABCSI Globals****"@1000000000 : Integer;
      PgSalesLines@1000000001 : Page 516;
      SalesLine@1000000002 : Record 37;
      StyleTxt@1000000003 : Text;
      ActualUnitPriceEditable@1000000004 : Boolean;
      ChangeLogEntriesVisible@1000000006 : Boolean;
      StyleTxtBlocked@1000000007 : Text;
      Table37EventSubscribers@1000000008 : Codeunit 50077;

    LOCAL PROCEDURE ESACC_EasySecurity@14123801(OpenObject@14123801 : Boolean);
    VAR
      SetFilters@14123802 : Codeunit 14123812;
      TempBoolean@14123803 : Boolean;
    BEGIN
      IF OpenObject THEN BEGIN
        SetFilters.Filter37(Rec,8,50021);

        TempBoolean := CurrPage.EDITABLE;
        IF ESACC_ESFLADSMgt.PageGeneral(37,50021,TempBoolean) THEN
          CurrPage.EDITABLE := TempBoolean;
      END;

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,3,
        ESACC_C3_Visible,ESACC_C3_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,5,
        ESACC_C5_Visible,ESACC_C5_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,7,
        ESACC_C7_Visible,ESACC_C7_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,9,
        ESACC_C9_Visible,ESACC_C9_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,13,
        ESACC_C13_Visible,ESACC_C13_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,17,
        ESACC_C17_Visible,ESACC_C17_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,19,
        ESACC_C19_Visible,ESACC_C19_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,21,
        ESACC_C21_Visible,ESACC_C21_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,23,
        ESACC_C23_Visible,ESACC_C23_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,26,
        ESACC_C26_Visible,ESACC_C26_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,1000000028,
        ESACC_C1000000028_Visible,ESACC_C1000000028_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,1901092104,
        ESACC_C1901092104_Visible,ESACC_C1901092104_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,1902027204,
        ESACC_C1902027204_Visible,ESACC_C1902027204_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,1903134404,
        ESACC_C1903134404_Visible,ESACC_C1903134404_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,1903587104,
        ESACC_C1903587104_Visible,ESACC_C1903587104_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,1905987604,
        ESACC_C1905987604_Visible,ESACC_C1905987604_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,1907075804,
        ESACC_C1907075804_Visible,ESACC_C1907075804_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,1907184504,
        ESACC_C1907184504_Visible,ESACC_C1907184504_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,1,1907981204,
        ESACC_C1907981204_Visible,ESACC_C1907981204_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        37,50021,0,51088,
        ESACC_F51088_Visible,TempBoolean,ESACC_F51088_HideValue);

      ESACC_EasySecurityManual(OpenObject);
    END;

    LOCAL PROCEDURE ESACC_EasySecurityManual@14123811(OpenObject@14123811 : Boolean);
    BEGIN
    END;

    PROCEDURE ApproveCalcInvDisc@1();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Disc. (Yes/No)",Rec);
    END;

    LOCAL PROCEDURE ValidateInvoiceDiscountAmount@22();
    VAR
      SalesHeader@1000 : Record 36;
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      SalesCalcDiscByType.ApplyInvDiscBasedOnAmt(InvoiceDiscountAmount,SalesHeader);
      CurrPage.UPDATE(FALSE);
    END;

    PROCEDURE CalcInvDisc@17();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Calc. Discount",Rec);
    END;

    LOCAL PROCEDURE ExplodeBOM@3();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Sales-Explode BOM",Rec);
    END;

    LOCAL PROCEDURE InsertExtendedText@4(Unconditionally@1000 : Boolean);
    BEGIN
      IF TransferExtendedText.SalesCheckIfAnyExtText(Rec,Unconditionally) THEN BEGIN
        CurrPage.SAVERECORD;
        COMMIT;
        TransferExtendedText.InsertSalesExtText(Rec);
      END;
      IF TransferExtendedText.MakeUpdate THEN
        UpdateForm(TRUE);
    END;

    LOCAL PROCEDURE ShowItemSub@8();
    BEGIN
      ShowItemSub;
    END;

    LOCAL PROCEDURE ShowNonstockItems@10();
    BEGIN
      ShowNonstock;
    END;

    LOCAL PROCEDURE ItemChargeAssgnt@5800();
    BEGIN
      ShowItemChargeAssgnt;
    END;

    PROCEDURE UpdateForm@12(SetSaveRecord@1000 : Boolean);
    BEGIN
      CurrPage.UPDATE(SetSaveRecord);
    END;

    LOCAL PROCEDURE ShowPrices@15();
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLinePrice(SalesHeader,Rec);
    END;

    LOCAL PROCEDURE ShowLineDisc@16();
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLineLineDisc(SalesHeader,Rec);
    END;

    LOCAL PROCEDURE ShowLineComments@11();
    BEGIN
      ShowLineComments;
    END;

    LOCAL PROCEDURE NoOnAfterValidate@19066594();
    BEGIN
      InsertExtendedText(FALSE);
      IF (Type = Type::"Charge (Item)") AND ("No." <> xRec."No.") AND
         (xRec."No." <> '')
      THEN
        CurrPage.SAVERECORD;

      SaveAndAutoAsmToOrder;
    END;

    LOCAL PROCEDURE LocationCodeOnAfterValidate@2();
    BEGIN
      SaveAndAutoAsmToOrder;
    END;

    LOCAL PROCEDURE VariantCodeOnAfterValidate@9();
    BEGIN
      SaveAndAutoAsmToOrder;
    END;

    LOCAL PROCEDURE CrossReferenceNoOnAfterValidat@19048248();
    BEGIN
      InsertExtendedText(FALSE);
    END;

    LOCAL PROCEDURE QuantityOnAfterValidate@19032465();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
      AutoReserve;//TPZ2829
      END;

      IF (Type = Type::Item) AND
         (Quantity <> xRec.Quantity)
      THEN
        CurrPage.UPDATE(TRUE);
    END;

    LOCAL PROCEDURE UnitofMeasureCodeOnAfterValida@19057939();
    BEGIN
      IF Reserve = Reserve::Always THEN BEGIN
        CurrPage.SAVERECORD;
       AutoReserve;//TPZ2829
      END;
    END;

    LOCAL PROCEDURE SaveAndAutoAsmToOrder@13();
    BEGIN
      IF (Type = Type::Item) AND IsAsmToOrderRequired THEN BEGIN
        CurrPage.SAVERECORD;
        AutoAsmToOrder;
        CurrPage.UPDATE(FALSE);
      END;
    END;

    PROCEDURE "****ABCSI Functions****"@1000000000();
    BEGIN
    END;

    PROCEDURE AutoFillQtytoOrder@1000000001();
    BEGIN
      Table37EventSubscribers.Tb37_AutoFillQtyToOrder(Rec,Rec);//TPZ 2829 EventConversion
    END;

    PROCEDURE DeleteQtytoOrder@1000000002();
    BEGIN
      Table37EventSubscribers.Tb37_DeleteQtyToOrder(Rec,Rec);//TPZ 2829 EventConversion
    END;

    PROCEDURE CopyLastUnitPriceToActualUnitPrice@1000000004();
    VAR
      SalesLineLoc@1000000000 : Record 37;
    BEGIN
      // <TPZ929>
      SalesLineLoc.COPY(Rec);
      Table37EventSubscribers.Tb37_CopyLastUnitPriceToActualUnitPrice(SalesLineLoc);
      // </TPZ929>
    END;

    PROCEDURE ClearActualUnitPrice@1000000003();
    VAR
      SalesLineLoc@1000000000 : Record 37;
    BEGIN
      // <TPZ929>
      SalesLineLoc.COPY(Rec);
      Table37EventSubscribers.Tb37_ClearActualUnitPrice(SalesLineLoc);
      // </TPZ929>
    END;

    LOCAL PROCEDURE RedistributeTotalsOnAfterValidate@7();
    BEGIN
      CurrPage.SAVERECORD;

      SalesHeader.GET("Document Type","Document No.");
      DocumentTotals.SalesRedistributeInvoiceDiscountAmounts(Rec,VATAmount,TotalSalesLine);
      CurrPage.UPDATE;
    END;

    LOCAL PROCEDURE ValidateSaveShortcutDimCode@18(FieldNumber@1001 : Integer;VAR ShortcutDimCode@1000 : Code[20]);
    BEGIN
      ValidateShortcutDimCode(FieldNumber,ShortcutDimCode);
      CurrPage.SAVERECORD;
    END;

    LOCAL PROCEDURE UpdateEditableOnRow@19();
    VAR
      SalesLine@1000 : Record 37;
    BEGIN
      RowIsText := ("No." = '') AND (Description <> '');
      IF NOT RowIsText THEN
        UnitofMeasureCodeIsChangeable := CanEditUnitOfMeasureCode
      ELSE
        UnitofMeasureCodeIsChangeable := FALSE;

      IF TotalSalesHeader."No." <> '' THEN BEGIN
        SalesLine.SETRANGE("Document No.",TotalSalesHeader."No.");
        SalesLine.SETRANGE("Document Type",TotalSalesHeader."Document Type");
        IF NOT SalesLine.ISEMPTY THEN
          InvDiscAmountEditable :=
            SalesCalcDiscByType.InvoiceDiscIsAllowed(TotalSalesHeader."Invoice Disc. Code") AND CurrPage.EDITABLE;
      END;
    END;

    LOCAL PROCEDURE UpdatePage@20();
    VAR
      SalesHeader@1001 : Record 36;
    BEGIN
      CurrPage.UPDATE;
      SalesHeader.GET("Document Type","Document No.");
      SalesCalcDiscByType.ApplyDefaultInvoiceDiscount(TotalSalesHeader."Invoice Discount Amount",SalesHeader);
    END;

    LOCAL PROCEDURE GetTotalSalesHeader@14();
    BEGIN
      IF NOT TotalSalesHeader.GET("Document Type","Document No.") THEN
        CLEAR(TotalSalesHeader);
      IF Currency.Code <> TotalSalesHeader."Currency Code" THEN
        IF NOT Currency.GET(TotalSalesHeader."Currency Code") THEN BEGIN
          CLEAR(Currency);
          Currency.InitRoundingPrecision;
        END;
    END;

    LOCAL PROCEDURE CalculateTotals@6();
    BEGIN
      GetTotalSalesHeader;
      TotalSalesHeader.CALCFIELDS("Recalculate Invoice Disc.");

      IF SalesSetup."Calc. Inv. Discount" AND ("Document No." <> '') AND (TotalSalesHeader."Customer Posting Group" <> '') AND
         TotalSalesHeader."Recalculate Invoice Disc."
      THEN
        IF FIND THEN
          CalcInvDisc;

      DocumentTotals.CalculateSalesTotals(TotalSalesLine,VATAmount,Rec);
      InvoiceDiscountAmount := TotalSalesLine."Inv. Discount Amount";
      InvoiceDiscountPct := SalesCalcDiscByType.GetCustInvoiceDiscountPct(Rec);
    END;

    BEGIN
    {
      TOP050 KT ABCSI Modification to Item Cards 01202015
       - Added below field
          Alt. UOM Code
          Alt. Unit of Measure
          Alt. UOM Quantity
          Alt. UOM Unit Price

      TOP020 KT ABCSI Sales Orders by Division 01292015
        - Removed field variable ShortcutDimCode[5] and added "Shortcut Dimension 5 Code" field instead

      TOP030A KT ABCSI Sales Quotes 02132015
        - Added fields
          51086 "Qty. to Order"
          51087 "Qty. Ordered"
          51088 "Qte. Qty. Shipped"
          51089 "Qte. Qty. Invoiced"

        - Added new functions AutoFillQtyToOrder() and DeleteQtyToOrder()

      TOP100A KT ABCSI Multipliers 02182015
        - Added fields Multiplier, "Recomm. Unit Price", "Actual Unit Price", "Alt. UOM Recomm. Unit Price", "Alt. UOM Actual Unit Price"
        - Fields made invisible "Line Discount %", "Unit Price"

      TOP030B KT ABCSI Lost Opportunities 03092015
        - Added fields
         "Reason Code"
         "Reason Code Comment"

      TOP110 KT ABCSI Salesperson 03302015
        - Added new fields Mfr. Rep. Code, ISR Code, CSR Code

      TOP170 KT ABCSI Sales Order Updates 04012015
        - Added field Comment

      TOP180 KT ABCSI Customer Pricing - Hot Sheets 04142015
        - Added function call GetLastSalesPrice(Rec); to OnAfterGetRecord and OnAafterGetCurrRecord triggers
        - Added new fields "Last Unit Price", "Last Price UOM", "Last Price Qty.", "Last Price Date"

      TOP230 KT ABCSI CRP 2 Fixes 05012015
        - Added code under OnAfterGetRecord and OnAfterGetCurrRecord to get the style of the font
        - Set the Style of fonts under Pricing fields
        - Added a new field "Gross Margin %"
        - Added new field "Pricing Logic"
        - Added a new field Lost Opportunity Description

      2015-04-07 TPZ572 VCHERNYA
        Mfr. Rep. Code, ISR Code, and CSR Code fields have been made invisible
      2015-04-17 TPZ146 VCHERNYA
        Tax Group Code, Amount Including Tax (Amount Including VAT), EDI Release No. fields have been made invisible
        Document No. and Line No. fields have been added
      2015-06-29 TPZ704 VCHERNYA
        Alt. UOM Quantity field moved to be prior to Alt. UOM Code field
        Alt. UOM Unit Price field have been made invisible
        BlankZero property set to Yes for Qty. to Order, Qty. Ordered, Qte. Qty. Shipped, Qte. Qty. Invoiced, Alt. UOM Quantity,
          Alt. UOM Unit Price fields
      2015-06-25 TPZ129 TAKHMETO
        Action Change Log Entries has been added
      2015-07-14 TPZ159 VCHERNYA
        Requested Unit Price field has been added
        Actual Unit Price has been made non-editable for Mfr. Reps.
        Change Log Entries menu item has been made invisible for Mfr. Reps.
      2015-07-31 TPZ858 TAKHMETO
        Line Amount field has been made uneditable
      2015-08-11 TPZ865 VCHERNYA
        Vendor Item No. field has been added
      2015-09-23 TPZ1039 VCHERNYA
        Changing of Type to blank has been added to Description field validation
      2015-09-28 TPZ929 VCHERNYA
        CopyLastUnitPriceToActualUnitPrice and ClearActualUnitPrice functions have been added
      2015-10-09 TPZ1067 VCHERNYA
        OnDrillDown trigger code for Qty. Ordered field has been removed
      2016-04-04 TPZ1125 EBAGIM
        Color coding of Actual Unit Price was added
      2016-06-23 TPZ1545 EBAGIM
        Color coding Blocked Items
      2016-09-15 TPZ10452 EBAGIM
        Unit Cost field has been made uneditable
    }
    END.
  }
}

