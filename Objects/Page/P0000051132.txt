OBJECT Page 51132 Freight/Parcel Dialog
{
  OBJECT-PROPERTIES
  {
    Date=10/20/21;
    Time=10:44:54 AM;
    Modified=Yes;
    Version List=;
  }
  PROPERTIES
  {
    CaptionML=ENU=Freight/Parcel Dialog;
    PageType=NavigatePage;
    PromotedActionCategoriesML=ENU="New,Process,Report,          Parcel          ,          Freight           ";
    ActionList=ACTIONS
    {
      { 1000000001;  ;ActionContainer;
                      CaptionML=ENU=ActionItems;
                      ActionContainerType=NewDocumentItems }
      { 1000000005;1 ;ActionGroup;
                      CaptionML=ENU=Items;
                      Visible=false }
      { 1000000003;2 ;Action    ;
                      CaptionML=ENU=Parcel;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=UpdateShipment;
                      PromotedCategory=Category4;
                      PromotedOnly=Yes;
                      OnAction=BEGIN
                                 //MESSAGE('test');
                                 //doPalletDetailsPS
                                 //gFreight := FALSE;
                                 //CurrPage.CLOSE;
                                 doPackageDetailsPS(DocType, codLicensePlateNo);
                                 CurrPage.CLOSE;
                               END;
                                }
      { 1000000002;2 ;Action    ;
                      CaptionML=ENU=Freight;
                      Promoted=Yes;
                      PromotedIsBig=Yes;
                      Image=WageLines;
                      PromotedCategory=Category5;
                      PromotedOnly=Yes;
                      OnAction=BEGIN
                                 //MESSAGE('test');
                                 // gFreight := TRUE;
                                 // CurrPage.CLOSE;
                                 doPalletDetailsPS(codLicensePlateNo);
                                 CurrPage.CLOSE;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1000000000;;Container;
                Name=Container;
                ContainerType=ContentArea }

    { 1000000004;1;Field  ;
                Name=Please Select Parcel or Freight;
                Style=StrongAccent;
                StyleExpr=TRUE }

  }
  CODE
  {
    VAR
      gFreight@1000000000 : Boolean;
      cuPackMgmt@1000000001 : Codeunit 23044601;
      DocType@1000000002 : 'Sales Order,Sales Return Order,Purchase Order,Purchase Return Order,Outbound Transfer,Service Order,Warehouse Shipment,Misc. Shipment';
      codLicensePlateNo@1000000003 : Code[20];
      SourceID@1000000004 : Code[20];

    PROCEDURE IsFreightSelected@1000000000() gFreight : Boolean;
    BEGIN
      //FreightSelected := gFreight;
    END;

    LOCAL PROCEDURE doPalletDetailsPS@1000000056(LPPara@1000000001 : Code[20]);
    VAR
      PalletEntry@1000000000 : Record 50068;
      PalletEntry1@1000000002 : Record 50068;
      WarehouseShipmentHeader@1000000003 : Record 7320;
      PalletDimension@1000000004 : Page 50090;
    BEGIN
      //TPZ3299
      PalletEntry1.RESET;
      PalletEntry1.SETRANGE("Order No.",SourceID);
      //PalletEntry1.SETRANGE("License Plate No.",PalletEntry."License Plate No.");
      WarehouseShipmentHeader.RESET;
      WarehouseShipmentHeader.SETRANGE("Source No.",SourceID);
      IF WarehouseShipmentHeader.FINDFIRST THEN
      PalletEntry1.SETRANGE("Warehouse Shipment No.",WarehouseShipmentHeader."No.");
      PalletEntry1.SETRANGE(Status,PalletEntry1.Status::Released);
      IF PalletEntry1.FINDFIRST THEN
        PalletEntry1.DELETEALL;

      PalletEntry.INIT;
      PalletEntry."License Plate No." := LPPara;
      PalletEntry."Order No." := SourceID;
      WarehouseShipmentHeader.RESET;
      WarehouseShipmentHeader.SETRANGE("Source No.",SourceID);
      IF WarehouseShipmentHeader.FINDFIRST THEN
        PalletEntry."Warehouse Shipment No." := WarehouseShipmentHeader."No.";
      PalletEntry.Status := PalletEntry.Status::Released;
      PalletEntry.INSERT(TRUE);
      COMMIT;
      PalletEntry1.RESET;
      PalletEntry1.SETRANGE("Order No.",PalletEntry."Order No.");
      PalletEntry1.SETRANGE("License Plate No.",PalletEntry."License Plate No.");
      PalletEntry1.SETRANGE("Warehouse Shipment No.",PalletEntry."Warehouse Shipment No.");
      PalletEntry1.SETRANGE(Status,PalletEntry1.Status::Released);
      IF PalletEntry1.FINDFIRST THEN;
      //PAGE.RUNMODAL(50090,PalletEntry1);
      PalletDimension.SetValues(PalletEntry1."License Plate No.",PalletEntry1."Warehouse Shipment No.",PalletEntry1."Order No.");
      PalletDimension.SETTABLEVIEW(PalletEntry1);
      PalletDimension.RUNMODAL;
    END;

    LOCAL PROCEDURE doPackageDetailsPS@1000000055(poptDocType@1000000000 : Option;pcodNo@1000000001 : Code[50]);
    VAR
      lrecLPHeader@1000000002 : Record 23044505;
    BEGIN
      //TPZ3143
      cuPackMgmt.getLPSrcTypeFromDShipDocType(poptDocType, poptDocType);
      lrecLPHeader.SETRANGE("No.", pcodNo);
      IF (lrecLPHeader.FINDSET(TRUE)) THEN BEGIN
        PAGE.RUN(PAGE::"DSHIP Package Details List", lrecLPHeader);
      END;
    END;

    PROCEDURE SetValues@1000000002(ParDocType@1000000000 : 'Sales Order,Sales Return Order,Purchase Order,Purchase Return Order,Outbound Transfer,Service Order,Warehouse Shipment,Misc. Shipment';ParLPNo@1000000001 : Code[20];ParSourceID@1000000002 : Code[20]);
    BEGIN
      DocType := ParDocType;
      codLicensePlateNo := ParLPNo;
      SourceID := ParSourceID;
    END;

    BEGIN
    END.
  }
}

