OBJECT Page 510 Blanket Purchase Order Subform
{
  OBJECT-PROPERTIES
  {
    Date=10/22/20;
    Time=[ 4:57:39 AM];
    Version List=NAVW111.00.00.38590,NAVNA11.00.00.38590;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Lines;
               ESM=L°neas;
               FRC=Lignes;
               ENC=Lines];
    MultipleNewLines=Yes;
    LinksAllowed=No;
    SourceTable=Table39;
    DelayedInsert=Yes;
    SourceTableView=WHERE(Document Type=FILTER(Blanket Order));
    PageType=ListPart;
    AutoSplitKey=Yes;
    OnInit=BEGIN
             PurchasesPayablesSetup.GET;
             Currency.InitRoundingPrecision;
           END;

    OnOpenPage=BEGIN
                 ;ESACC_EasySecurity(TRUE);
               END;

    OnFindRecord=BEGIN
                   DocumentTotals.PurchaseCheckAndClearTotals(Rec,xRec,TotalPurchaseLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
                   EXIT(FIND(Which));
                 END;

    OnAfterGetRecord=BEGIN
                       ShowShortcutDimCode(ShortcutDimCode);
                       CLEAR(DocumentTotals);
                     END;

    OnNewRecord=BEGIN
                  InitType;
                  CLEAR(ShortcutDimCode);
                END;

    OnModifyRecord=BEGIN
                     DocumentTotals.PurchaseCheckIfDocumentChanged(Rec,xRec);
                   END;

    OnDeleteRecord=BEGIN
                     DocumentTotals.PurchaseDocTotalsNotUpToDate;
                   END;

    OnAfterGetCurrRecord=BEGIN
                           GetTotalsPurchaseHeader;
                           CalculateTotals;
                           UpdateEditableOnRow;
                         END;

    ActionList=ACTIONS
    {
      { 1900000004;0 ;ActionContainer;
                      ActionContainerType=ActionItems }
      { 1906587504;1 ;ActionGroup;
                      CaptionML=[ENU=F&unctions;
                                 ESM=Acci&ones;
                                 FRC=Fonction&s;
                                 ENC=F&unctions];
                      Image=Action }
      { 1901312904;2 ;Action    ;
                      AccessByPermission=TableData 90=R;
                      CaptionML=[ENU=E&xplode BOM;
                                 ESM=D&esplegar L.M.;
                                 FRC=&Eclater nomenclature;
                                 ENC=E&xplode BOM];
                      ToolTipML=[ENU=Insert new lines for the components on the bill of materials, for example to sell the parent item as a kit. CAUTION: The line for the parent item will be deleted and represented by a description only. To undo, you must delete the component lines and add a line the parent item again.;
                                 ESM=Insertar nuevas l°neas para los componentes de la lista de materiales, por ejemplo, para vender el producto principal como un kit. ATENCI‡N: La l°nea para el producto principal se eliminar† y quedar† representada tan solo por una descripci¢n. Para deshacerlo, debe eliminar las l°neas de componente y volver a agregar una l°nea de producto principal.;
                                 FRC=InsÇrez les nouvelles lignes pour les composantes de la nomenclature, par exemple pour vendre l'article parent en tant que kit. Attentionˇ: La ligne de l'article parent sera supprimÇe et reprÇsentÇe par une description uniquement. Pour annuler, vous devez supprimer les lignes composante et ajouter Ö nouveau une ligne de l'article parent.;
                                 ENC=Insert new lines for the components on the bill of materials, for example to sell the parent item as a kit. CAUTION: The line for the parent item will be deleted and represented by a description only. To undo, you must delete the component lines and add a line the parent item again.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1901312904_Visible;
                      Enabled=ESACC_C1901312904_Enabled;
                      Image=ExplodeBOM;
                      OnAction=BEGIN
                                 ExplodeBOM;
                               END;
                                }
      { 1901313304;2 ;Action    ;
                      AccessByPermission=TableData 279=R;
                      CaptionML=[ENU=Insert &Ext. Text;
                                 ESM=Insertar t&extos adicionales;
                                 FRC=InsÇrer te&xtes Çtendus;
                                 ENC=Insert &Ext. Text];
                      ToolTipML=[ENU=Insert the extended item description that is set up for the item that is being processed on the line.;
                                 ESM=Insertar la descripci¢n de producto ampliada que se configur¢ para el producto que se est† procesando en la l°nea.;
                                 FRC=InsÇrer la description plus longue qui est paramÇtrÇe pour l'article en cours de traitement sur la ligne.;
                                 ENC=Insert the extended item description that is set up for the item that is being processed on the line.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1901313304_Visible;
                      Enabled=ESACC_C1901313304_Enabled;
                      Image=Text;
                      OnAction=BEGIN
                                 InsertExtendedText(TRUE);
                               END;
                                }
      { 1907935204;1 ;ActionGroup;
                      CaptionML=[ENU=&Line;
                                 ESM=&L°nea;
                                 FRC=&Ligne;
                                 ENC=&Line];
                      Image=Line }
      { 1901991404;2 ;ActionGroup;
                      CaptionML=[ENU=Item Availability by;
                                 ESM=Disponibilidad prod. por;
                                 FRC=DisponibilitÇ article par;
                                 ENC=Item Availability by];
                      Image=ItemAvailability }
      { 5       ;3   ;Action    ;
                      CaptionML=[ENU=Event;
                                 ESM=Evento;
                                 FRC=êvÇnement;
                                 ENC=Event];
                      ToolTipML=[ENU=View how the actual and the projected available balance of an item will develop over time according to supply and demand events.;
                                 ESM=Permite ver c¢mo el saldo disponible real y previsto de un art°culo se desarrollar†n a lo largo del tiempo seg£n los eventos de oferta y demanda.;
                                 FRC=Afficher le dÇveloppement du niveau de stock rÇel et prÇvisionnel d'un article dans le temps en fonction des ÇvÇnements de l'offre et de la demande.;
                                 ENC=View how the actual and the projected available balance of an item will develop over time according to supply and demand events.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C5_Visible;
                      Enabled=ESACC_C5_Enabled;
                      Image=Event;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromPurchLine(Rec,ItemAvailFormsMgt.ByEvent)
                               END;
                                }
      { 1900205704;3 ;Action    ;
                      CaptionML=[ENU=Period;
                                 ESM=Periodo;
                                 FRC=PÇriode;
                                 ENC=Period];
                      ToolTipML=[ENU=View the projected quantity of the item over time according to time periods, such as day, week, or month.;
                                 ESM=Permite ver la cantidad proyectada del producto a lo largo de los periodos de tiempo, como d°as, semanas o meses.;
                                 FRC=Afficher la quantitÇ prÇvisionnelle de l'article dans le temps en fonction de pÇriodes de temps, par exemple jour, semaine ou mois.;
                                 ENC=View the projected quantity of the item over time according to time periods, such as day, week, or month.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1900205704_Visible;
                      Enabled=ESACC_C1900205704_Enabled;
                      Image=Period;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromPurchLine(Rec,ItemAvailFormsMgt.ByPeriod)
                               END;
                                }
      { 1901652104;3 ;Action    ;
                      CaptionML=[ENU=Variant;
                                 ESM=Variante;
                                 FRC=Variante;
                                 ENC=Variant];
                      ToolTipML=[ENU=View or edit the item's variants. Instead of setting up each color of an item as a separate item, you can set up the various colors as variants of the item.;
                                 ESM=Permite ver o editar las variantes del art°culo. En lugar de configurar cada color de un art°culo como un art°culo diferente, puede configurar varios colores como variantes del art°culo.;
                                 FRC=Afficher ou modifier les variantes article. Au lieu de crÇer chaque couleur pour un article en tant qu'article sÇparÇ, vous pouvez spÇcifier les diffÇrentes couleurs comme variantes de l'article.;
                                 ENC=View or edit the item's variants. Instead of setting up each colour of an item as a separate item, you can set up the various colours as variants of the item.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1901652104_Visible;
                      Enabled=ESACC_C1901652104_Enabled;
                      Image=ItemVariant;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromPurchLine(Rec,ItemAvailFormsMgt.ByVariant)
                               END;
                                }
      { 1901313404;3 ;Action    ;
                      AccessByPermission=TableData 14=R;
                      CaptionML=[ENU=Location;
                                 ESM=AlmacÇn;
                                 FRC=Magasin;
                                 ENC=Location];
                      ToolTipML=[ENU=View the actual and projected quantity of the item per location.;
                                 ESM=Permite ver la cantidad real y proyectada del producto por almacÇn.;
                                 FRC=Affichez la quantitÇ rÇelle et prÇvisionnelle de l'article par emplacement.;
                                 ENC=View the actual and projected quantity of the item per location.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1901313404_Visible;
                      Enabled=ESACC_C1901313404_Enabled;
                      Image=Warehouse;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromPurchLine(Rec,ItemAvailFormsMgt.ByLocation)
                               END;
                                }
      { 3       ;3   ;Action    ;
                      CaptionML=[ENU=BOM Level;
                                 ESM=Nivel L.M.;
                                 FRC=Niveau nomenclature;
                                 ENC=BOM Level];
                      ToolTipML=[ENU=View availability figures for items on bills of materials that show how many units of a parent item you can make based on the availability of child items.;
                                 ESM=Permite ver las cifras correspondientes a los productos en listas de materiales que indican cu†ntas unidades de un producto principal puede producir seg£n la disponibilidad de productos secundarios.;
                                 FRC=Affichez les chiffres de disponibilitÇ pour les articles de nomenclature qui indiquent combien d'unitÇs d'un parent vous pouvez effectuer sur la base de la disponibilitÇ des ÇlÇments enfant.;
                                 ENC=View availability figures for items on bills of materials that show how many units of a parent item you can make based on the availability of child items.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C3_Visible;
                      Enabled=ESACC_C3_Enabled;
                      Image=BOMLevel;
                      OnAction=BEGIN
                                 ItemAvailFormsMgt.ShowItemAvailFromPurchLine(Rec,ItemAvailFormsMgt.ByBOM)
                               END;
                                }
      { 1903868004;2 ;ActionGroup;
                      CaptionML=[ENU=Unposted Lines;
                                 ESM=L°neas no registradas;
                                 FRC=Lignes non validÇes;
                                 ENC=Unposted Lines];
                      Image=Order }
      { 1903100004;3 ;Action    ;
                      CaptionML=[ENU=Orders;
                                 ESM=Pedidos;
                                 FRC=Commandes;
                                 ENC=Orders];
                      ToolTipML=[ENU=View related purchase orders.;
                                 ESM=Permite ver los pedidos de compra relacionados.;
                                 FRC=Affichez les bons de commande associÇs.;
                                 ENC=View related purchase orders.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1903100004_Visible;
                      Enabled=ESACC_C1903100004_Enabled;
                      Image=Document;
                      OnAction=BEGIN
                                 ShowOrders;
                               END;
                                }
      { 1900546404;3 ;Action    ;
                      CaptionML=[ENU=Invoices;
                                 ESM=Facturas;
                                 FRC=Factures;
                                 ENC=Invoices];
                      ToolTipML=[ENU=View a list of ongoing purchase invoices for the order.;
                                 ESM=Permite ver una lista de facturas de compra en curso para el pedido.;
                                 FRC=Afficher la liste des factures achat en cours pour la commande.;
                                 ENC=View a list of ongoing purchase invoices for the order.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1900546404_Visible;
                      Enabled=ESACC_C1900546404_Enabled;
                      Image=Invoice;
                      OnAction=BEGIN
                                 ShowInvoices;
                               END;
                                }
      { 1903098504;3 ;Action    ;
                      AccessByPermission=TableData 6650=R;
                      CaptionML=[ENU=Return Orders;
                                 ESM=Devoluciones;
                                 FRC=Retours;
                                 ENC=Return Orders];
                      ToolTipML=[ENU=Open the list of ongoing return orders.;
                                 ESM=Abre la lista de pedidos de devoluci¢n de venta en curso.;
                                 FRC=Ouvrir la liste des retours en cours.;
                                 ENC=Open the list of ongoing return orders.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1903098504_Visible;
                      Enabled=ESACC_C1903098504_Enabled;
                      Image=ReturnOrder;
                      OnAction=BEGIN
                                 ShowReturnOrders;
                               END;
                                }
      { 1901992804;3 ;Action    ;
                      CaptionML=[ENU=Credit Memos;
                                 ESM=Notas de CrÇdito;
                                 FRC=Avoirs;
                                 ENC=Credit Memos];
                      ToolTipML=[ENU=View a list of ongoing credit memos for the order.;
                                 ESM=Permite ver una lista de notas de crÇdito actuales para la orden.;
                                 FRC=Affichez une liste des notes de crÇdit en cours pour la commande.;
                                 ENC=View a list of ongoing credit memos for the order.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1901992804_Visible;
                      Enabled=ESACC_C1901992804_Enabled;
                      Image=CreditMemo;
                      OnAction=BEGIN
                                 ShowCreditMemos;
                               END;
                                }
      { 1901314404;2 ;ActionGroup;
                      CaptionML=[ENU=Posted Lines;
                                 ESM=L°neas registradas;
                                 FRC=Lignes validÇes;
                                 ENC=Posted Lines];
                      Image=Post }
      { 1900296804;3 ;Action    ;
                      CaptionML=[ENU=Receipts;
                                 ESM=Recepciones;
                                 FRC=Reáus;
                                 ENC=Receipts];
                      ToolTipML=[ENU=View a list of posted purchase receipts for the order.;
                                 ESM=Permite ver una lista de recepciones de compra para el pedido.;
                                 FRC=Affichez une liste des rÇceptions achat reportÇes pour la commande.;
                                 ENC=View a list of posted purchase receipts for the order.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1900296804_Visible;
                      Enabled=ESACC_C1900296804_Enabled;
                      Image=PostedReceipts;
                      OnAction=BEGIN
                                 ShowPostedReceipts;
                               END;
                                }
      { 1904522204;3 ;Action    ;
                      CaptionML=[ENU=Invoices;
                                 ESM=Facturas;
                                 FRC=Factures;
                                 ENC=Invoices];
                      ToolTipML=[ENU=View a list of ongoing purchase invoices for the order.;
                                 ESM=Permite ver una lista de facturas de compra en curso para el pedido.;
                                 FRC=Afficher la liste des factures achat en cours pour la commande.;
                                 ENC=View a list of ongoing purchase invoices for the order.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1904522204_Visible;
                      Enabled=ESACC_C1904522204_Enabled;
                      Image=Invoice;
                      OnAction=BEGIN
                                 ShowPostedInvoices;
                               END;
                                }
      { 1903926304;3 ;Action    ;
                      CaptionML=[ENU=Return Receipts;
                                 ESM=Recep. devoluci¢n;
                                 FRC=RÇceptions retour;
                                 ENC=Return Receipts];
                      ToolTipML=[ENU=View a list of posted return receipts for the order.;
                                 ESM=Permite ver una lista de recepciones de devoluci¢n registradas para el pedido.;
                                 FRC=Affichez une liste des rÇceptions retour reportÇes pour la commande.;
                                 ENC=View a list of posted return receipts for the order.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1903926304_Visible;
                      Enabled=ESACC_C1903926304_Enabled;
                      Image=ReturnReceipt;
                      OnAction=BEGIN
                                 ShowPostedReturnReceipts;
                               END;
                                }
      { 1902056104;3 ;Action    ;
                      CaptionML=[ENU=Credit Memos;
                                 ESM=Notas de CrÇdito;
                                 FRC=Avoirs;
                                 ENC=Credit Memos];
                      ToolTipML=[ENU=View a list of ongoing credit memos for the order.;
                                 ESM=Permite ver una lista de notas de crÇdito actuales para la orden.;
                                 FRC=Affichez une liste des notes de crÇdit en cours pour la commande.;
                                 ENC=View a list of ongoing credit memos for the order.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1902056104_Visible;
                      Enabled=ESACC_C1902056104_Enabled;
                      Image=CreditMemo;
                      OnAction=BEGIN
                                 ShowPostedCreditMemos;
                               END;
                                }
      { 1906874004;2 ;Action    ;
                      AccessByPermission=TableData 348=R;
                      ShortCutKey=Shift+Ctrl+D;
                      CaptionML=[ENU=Dimensions;
                                 ESM=Dimensiones;
                                 FRC=Dimensions;
                                 ENC=Dimensions];
                      ToolTipML=[ENU=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyze transaction history.;
                                 ESM=Permite ver o editar dimensiones, como el †rea, el proyecto o el departamento, que pueden asignarse a los documentos de venta y compra para distribuir costes y analizar el historial de transacciones.;
                                 FRC=Affichez ou modifiez les axes analytiques, tels que la zone, le projet ou le dÇpartement que vous pouvez affecter aux documents vente et achat afin de distribuer les coñts et analyser l'historique des transactions.;
                                 ENC=View or edit dimensions, such as area, project, or department, that you can assign to sales and purchase documents to distribute costs and analyse transaction history.];
                      ApplicationArea=#Dimensions;
                      Visible=ESACC_C1906874004_Visible;
                      Enabled=ESACC_C1906874004_Enabled;
                      Image=Dimensions;
                      OnAction=BEGIN
                                 ShowDimensions;
                               END;
                                }
      { 1900978604;2 ;Action    ;
                      CaptionML=[ENU=Co&mments;
                                 ESM=Co&mentarios;
                                 FRC=Co&mmentaires;
                                 ENC=Co&mments];
                      ToolTipML=[ENU=View or add comments for the record.;
                                 ESM=Permite ver o agregar comentarios para el registro.;
                                 FRC=Affichez ou ajoutez des commentaires pour l'enregistrement.;
                                 ENC=View or add comments for the record.];
                      ApplicationArea=#Advanced;
                      Visible=ESACC_C1900978604_Visible;
                      Enabled=ESACC_C1900978604_Enabled;
                      Image=ViewComments;
                      OnAction=BEGIN
                                 ShowLineComments;
                               END;
                                }
    }
  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 1   ;1   ;Group     ;
                GroupType=Repeater }

    { 2   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the line type.;
                           ESM=Especifica el tipo de l°nea.;
                           FRC=SpÇcifie le type de ligne.;
                           ENC=Specifies the line type.];
                ApplicationArea=#Advanced;
                SourceExpr=Type;
                Visible=ESACC_F5_Visible;
                Editable=ESACC_F5_Editable;
                HideValue=ESACC_F5_HideValue;
                OnValidate=BEGIN
                             NoOnAfterValidate;
                             DeltaUpdateTotals;
                           END;
                            }

    { 4   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the number of the involved entry or record, according to the specified number series.;
                           ESM=Especifica el n£mero de la entrada o el registro relacionado, seg£n la serie numÇrica especificada.;
                           FRC=SpÇcifie le numÇro de l'Çcriture ou de l'enregistrement concernÇ, en fonction de la sÇrie de numÇros spÇcifiÇe.;
                           ENC=Specifies the number of the involved entry or record, according to the specified number series.];
                ApplicationArea=#Advanced;
                SourceExpr="No.";
                Visible=ESACC_F6_Visible;
                Editable=ESACC_F6_Editable;
                HideValue=ESACC_F6_HideValue;
                OnValidate=BEGIN
                             ShowShortcutDimCode(ShortcutDimCode);
                             NoOnAfterValidate;
                             DeltaUpdateTotals;
                           END;
                            }

    { 22  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cross-referenced item number. If you enter a cross reference between yours and your vendor's or customer's item number, then this number will override the standard item number when you enter the cross-reference number on a sales or purchase document.;
                           ESM=Especifica el n£mero de producto de la referencia cruzada. Si introduce una referencia cruzada entre su n£mero de producto y el del proveedor o el cliente, sobrescribir† el n£mero de producto est†ndar cuando introduzca el n£mero de referencia cruzada en un documento de venta o de compra.;
                           FRC=SpÇcifie le numÇro d'article Ö rÇfÇrence externe. Si vous saisissez une rÇfÇrence externe entre votre numÇro d'article et celui de votre fournisseur ou client, ce numÇro remplace le numÇro d'article standard lorsque vous saisissez le numÇro de rÇfÇrence externe sur un document vente ou achat.;
                           ENC=Specifies the cross-referenced item number. If you enter a cross reference between yours and your vendor's or customer's item number, then this number will override the standard item number when you enter the cross-reference number on a sales or purchase document.];
                ApplicationArea=#Advanced;
                SourceExpr="Cross-Reference No.";
                Visible=FALSE;
                Enabled=ESACC_F5705_Editable;
                Editable=ESACC_F5705_Editable;
                HideValue=ESACC_F5705_HideValue;
                OnValidate=BEGIN
                             CrossReferenceNoOnAfterValidat;
                           END;

                OnLookup=BEGIN
                           CrossReferenceNoLookUp;
                           InsertExtendedText(FALSE);
                         END;
                          }

    { 36  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the variant of the item on the line.;
                           ESM=Especifica la variante del producto que figura en la l°nea.;
                           FRC=Indique la variante de l'article sur la ligne.;
                           ENC=Specifies the variant of the item on the line.];
                ApplicationArea=#Advanced;
                SourceExpr="Variant Code";
                Visible=FALSE;
                Editable=ESACC_F5402_Editable;
                HideValue=ESACC_F5402_HideValue }

    { 1030000;2;Field     ;
                ToolTipML=[ENU=Specifies the type of goods and services tax (GST) for the purchase line. You can select Acquisition, Self-Assessment, Rebate, New Housing Rebates, or Pension Rebate for the GST tax.;
                           ESM=Especifica el tipo de impuesto sobre bienes y servicios (GST) de la l°nea de compra. Puede seleccionar los campos Costo, Autoevaluaci¢n, Devoluci¢n, Nuevas devoluciones sobre el alojamiento o Devoluciones sobre pensiones para el GST.;
                           FRC=SpÇcifie le type de taxe sur les produits et services (TPS) de la ligne achat. Vous pouvez sÇlectionner Acquisition, Auto-Çvaluation, Remise, Remises pour habitation neuve ou Remise pour retraite pour la taxe TPS.;
                           ENC=Specifies the type of goods and services tax (GST) for the purchase line. You can select Acquisition, Self-Assessment, Rebate, New Housing Rebates, or Pension Rebate for the GST tax.];
                SourceExpr="GST/HST";
                Visible=ESACC_F10025_Visible;
                Editable=ESACC_F10025_Editable;
                HideValue=ESACC_F10025_HideValue }

    { 14  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the Tax specification of the involved item or resource to link transactions made for this record with the appropriate general ledger account according to the Tax posting setup.;
                           ESM=Indica la especificaci¢n de IVA del elemento o el recurso relacionado para vincular las transacciones realizadas para este registro con la cuenta de contabilidad general correspondiente de acuerdo con la configuraci¢n de registro de IVA.;
                           FRC=SpÇcifie le dÇtail TVA de l'article ou de la ressource concernÇe pour lier les transactions effectuÇes pour cet enregistrement au compte GL appropriÇ en fonction de la configuration de report TVA.;
                           ENC=Specifies the Tax specification of the involved item or resource to link transactions made for this record with the appropriate general ledger account according to the Tax posting setup.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="VAT Prod. Posting Group";
                Visible=FALSE;
                Editable=ESACC_F90_Editable;
                HideValue=ESACC_F90_HideValue;
                OnValidate=BEGIN
                             //{=======} MODIFIED
                             RedistributeTotalsOnAfterValidate;
                             //{=======} TARGET
                             DeltaUpdateTotals;
                             {<<<<<<<}
                           END;
                            }

    { 6   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a description of the blanket purchase order.;
                           ESM=Especifica una descripci¢n del pedido de compra abierto.;
                           FRC=SpÇcifie une description de la commande permanente achats.;
                           ENC=Specifies a description of the blanket purchase order.];
                ApplicationArea=#Advanced;
                SourceExpr=Description;
                Visible=ESACC_F11_Visible;
                Editable=ESACC_F11_Editable;
                HideValue=ESACC_F11_HideValue;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 74  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies a code for the location where you want the items to be placed when they are received.;
                           ESM=Especifica el c¢digo de almacÇn donde quiere que se guarden los productos recibidos.;
                           FRC=SpÇcifie un code pour l'emplacement dans lequel vous souhaitez que les articles soient stockÇs lorsqu'ils sont rÇceptionnÇs.;
                           ENC=Specifies a code for the location where you want the items to be placed when they are received.];
                ApplicationArea=#Advanced;
                SourceExpr="Location Code";
                Visible=ESACC_F7_Visible;
                Editable=ESACC_F7_Editable;
                HideValue=ESACC_F7_HideValue }

    { 8   ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of the purchase order line.;
                           ESM=Especifica la cantidad de la l°nea de pedido de compra.;
                           FRC=SpÇcifie la quantitÇ de la ligne bon de commande.;
                           ENC=Specifies the quantity of the purchase order line.];
                ApplicationArea=#Advanced;
                BlankZero=Yes;
                SourceExpr=Quantity;
                Visible=ESACC_F15_Visible;
                Editable=ESACC_F15_Editable;
                HideValue=ESACC_F15_HideValue;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 10  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how each unit of the item or resource is measured, such as in pieces or hours. By default, the value in the Base Unit of Measure field on the item or resource card is inserted.;
                           ESM=Especifica c¢mo se mide cada unidad del producto o el recurso, por ejemplo, en piezas u horas. De forma predeterminada, se inserta el valor en el campo Unidad de medida base de la ficha de producto o recurso.;
                           FRC=SpÇcifie la maniäre dont chaque unitÇ de mesure de l'article ou de la ressource est mesurÇe, par exemple en unitÇ de mesures ou en heures. Par dÇfaut, la valeur du champ unitÇ de mesure de base de la fiche article ou la ressource est insÇrÇe.;
                           ENC=Specifies how each unit of the item or resource is measured, such as in pieces or hours. By default, the value in the Base Unit of Measure field on the item or resource card is inserted.];
                ApplicationArea=#Suite;
                SourceExpr="Unit of Measure Code";
                Visible=ESACC_F5407_Visible;
                Editable=ESACC_F5407_Editable;
                HideValue=ESACC_F5407_HideValue;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 40  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the name of the item or resource's unit of measure, such as piece or hour.;
                           ESM=Especifica el nombre de la unidad de medida del producto o recurso, como la unidad o la hora.;
                           FRC=SpÇcifie le nom de l'unitÇ de mesure de l'article ou de la ressource, par exemple piäce ou heure.;
                           ENC=Specifies the name of the item or resource's unit of measure, such as piece or hour.];
                ApplicationArea=#Advanced;
                SourceExpr="Unit of Measure";
                Visible=FALSE;
                Editable=ESACC_F13_Editable;
                HideValue=ESACC_F13_HideValue }

    { 12  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cost of one unit of the selected item or resource.;
                           ESM=Especifica el costo unitario del producto o el recurso seleccionado.;
                           FRC=SpÇcifie le coñt unitaire d'une ressource ou d'un article sÇlectionnÇ.;
                           ENC=Specifies the cost of one unit of the selected item or resource.];
                ApplicationArea=#Advanced;
                BlankZero=Yes;
                SourceExpr="Direct Unit Cost";
                Visible=ESACC_F22_Visible;
                Editable=ESACC_F22_Editable;
                HideValue=ESACC_F22_HideValue;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 28  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the percentage of the item's last purchase cost that includes indirect costs, such as freight that is associated with the purchase of the item.;
                           ESM=Especifica el porcentaje del £ltimo costo de compra del art°culo, que incluye los costos indirectos, como el flete asociado con la compra del art°culo.;
                           FRC=SpÇcifie le pourcentage du dernier coñt d'achat de l'article qui inclut les coñts indirects comme la gestion du fret et des entrepìts associÇs Ö l'achat de l'article.;
                           ENC=Specifies the percentage of the item's last purchase cost that includes indirect costs, such as freight that is associated with the purchase of the item.];
                ApplicationArea=#Advanced;
                SourceExpr="Indirect Cost %";
                Visible=FALSE;
                Editable=ESACC_F54_Editable;
                HideValue=ESACC_F54_HideValue }

    { 68  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the cost, in $, of one unit of the item or resource on the line.;
                           ESM=Especifica el costo, en $, de una unidad del producto o del recurso en la l°nea.;
                           FRC=SpÇcifie le coñt, en $, d'une unitÇ de l'article ou de la ressource sur la ligne.;
                           ENC=Specifies the cost, in $, of one unit of the item or resource on the line.];
                ApplicationArea=#Advanced;
                SourceExpr="Unit Cost (LCY)";
                Visible=FALSE;
                Editable=ESACC_F23_Editable;
                HideValue=ESACC_F23_HideValue }

    { 30  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the price, in $, of one unit of the item or resource. You can enter a price manually or have it entered according to the Price/Profit Calculation field on the related card.;
                           ESM=Especifica el precio, en $, de una unidad del producto o del recurso. Se puede indicar un precio manualmente o hacer que se indique en funci¢n del campo C†lculo precio/bfß bruto en la ficha relacionada.;
                           FRC=SpÇcifie le prix, en $, d'une unitÇ de l'article ou de la ressource. Vous pouvez entrer un prix manuellement ou le gÇnÇrer automatiquement conformÇment au champ Calcul prix ou profit de la fiche associÇe.;
                           ENC=Specifies the price, in $, of one unit of the item or resource. You can enter a price manually or have it entered according to the Price/Profit Calculation field on the related card.];
                ApplicationArea=#Advanced;
                SourceExpr="Unit Price (LCY)";
                Visible=FALSE;
                Editable=ESACC_F31_Editable;
                HideValue=ESACC_F31_HideValue }

    { 1000000002;2;Field  ;
                SourceExpr="Alt. UOM Code";
                Visible=ESACC_F50500_Visible;
                Editable=ESACC_F50500_Editable;
                HideValue=ESACC_F50500_HideValue }

    { 1000000003;2;Field  ;
                SourceExpr="Alt. Unit of Measure";
                Visible=FALSE;
                Editable=ESACC_F50501_Editable;
                HideValue=ESACC_F50501_HideValue }

    { 1000000000;2;Field  ;
                SourceExpr="Alt. UOM Quantity";
                Visible=ESACC_F50502_Visible;
                Editable=ESACC_F50502_Editable;
                HideValue=ESACC_F50502_HideValue }

    { 1000000001;2;Field  ;
                SourceExpr="Alt. UOM Direct Unit Cost";
                Visible=ESACC_F50503_Visible;
                Editable=ESACC_F50503_Editable;
                HideValue=ESACC_F50503_HideValue }

    { 1480000;2;Field     ;
                ToolTipML=[ENU=Specifies if this vendor charges you sales tax for purchases.;
                           ESM=Especifica si este proveedor le cobra el impuesto sobre las ventas por las compras.;
                           FRC=SpÇcifie si le fournisseur vous facture la taxe de vente pour vos achats.;
                           ENC=Specifies if this vendor charges you sales tax for purchases.];
                SourceExpr="Tax Liable";
                Visible=FALSE;
                Editable=FALSE;
                HideValue=ESACC_F86_HideValue }

    { 1480004;2;Field     ;
                ToolTipML=[ENU=Specifies the tax area that is used to calculate and post sales tax.;
                           ESM=Especifica el †rea fiscal que se usa para calcular y registrar el impuesto sobre las ventas.;
                           FRC=SpÇcifie la rÇgion fiscale utilisÇe pour calculer et reporter la taxe de vente.;
                           ENC=Specifies the tax area that is used to calculate and post sales tax.];
                SourceExpr="Tax Area Code";
                Visible=FALSE;
                Editable=ESACC_F85_Editable;
                HideValue=ESACC_F85_HideValue;
                OnValidate=BEGIN
                             RedistributeTotalsOnAfterValidate;
                           END;
                            }

    { 1400000;2;Field     ;
                ToolTipML=[ENU=Specifies the tax area code for self assessed Provincial Sales Tax for the company.;
                           ESM=Especifica el c¢digo del †rea fiscal del impuesto sobre las ventas provincial autoevaluado de la empresa.;
                           FRC=SpÇcifie le code de rÇgion fiscale pour la taxe de vente provinciale auto-ÇvaluÇe de la compagnie.;
                           ENC=Specifies the tax area code for self assessed Provincial Sales Tax for the company.];
                SourceExpr="Provincial Tax Area Code";
                Visible=FALSE;
                Editable=ESACC_F10017_Editable;
                HideValue=ESACC_F10017_HideValue }

    { 1480002;2;Field     ;
                ToolTipML=[ENU=Specifies the tax group code for the tax detail entry.;
                           ESM=Especifica el c¢digo de grupo de impuestos para el movimiento de detalle de impuestos.;
                           FRC=SpÇcifie le code groupe fiscal de l'Çcriture spÇcification de taxe.;
                           ENC=Specifies the tax group code for the tax detail entry.];
                SourceExpr="Tax Group Code";
                Visible=FALSE;
                Editable=ESACC_F87_Editable;
                HideValue=ESACC_F87_HideValue;
                OnValidate=BEGIN
                             RedistributeTotalsOnAfterValidate;
                           END;
                            }

    { 1480006;2;Field     ;
                ToolTipML=[ENU=Specifies a U.S. sales tax that is paid on items purchased by a company that are used by the company, instead of being sold to a customer.;
                           ESM=Especifica un impuesto sobre las ventas de EE.ˇUU. que se paga por los productos que una empresa compra y usa para s° misma, en lugar de venderlos a un cliente.;
                           FRC=SpÇcifie une taxe de vente amÇricaine payÇe sur les articles achetÇs par une compagnie pour son propre usage plutìt que pour la vente Ö un client.;
                           ENC=Specifies a U.S. sales tax that is paid on items purchased by a company that are used by the company, instead of being sold to a customer.];
                SourceExpr="Use Tax";
                Visible=FALSE;
                Editable=ESACC_F88_Editable;
                HideValue=ESACC_F88_HideValue }

    { 16  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount percentage that is granted for the item on the line.;
                           ESM=Especifica el porcentaje de descuento aplicable al producto de la l°nea.;
                           FRC=SpÇcifie le pourcentage d'escompte octroyÇ pour l'article de la ligne.;
                           ENC=Specifies the discount percentage that is granted for the item on the line.];
                ApplicationArea=#Advanced;
                BlankZero=Yes;
                SourceExpr="Line Discount %";
                Visible=ESACC_F27_Visible;
                Editable=ESACC_F27_Editable;
                HideValue=ESACC_F27_HideValue;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 32  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the net amount, excluding any invoice discount amount, that must be paid for products on the line.;
                           ESM=Especifica el importe neto, menos cualquier importe de descuento en factura, que se debe pagar por los productos de la l°nea.;
                           FRC=SpÇcifie le montant net, hors montant d'escompte de la facture, Ö payer pour les produits sur la ligne.;
                           ENC=Specifies the net amount, excluding any invoice discount amount, that must be paid for products on the line.];
                ApplicationArea=#Advanced;
                BlankZero=Yes;
                SourceExpr="Line Amount";
                Visible=ESACC_F103_Visible;
                Editable=ESACC_F103_Editable;
                HideValue=ESACC_F103_HideValue;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 60  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the discount amount that is granted for the item on the line.;
                           ESM=Especifica la cantidad de descuento aplicable al producto de la l°nea.;
                           FRC=SpÇcifie le montant de l'escompte octroyÇ pour l'article de la ligne.;
                           ENC=Specifies the discount amount that is granted for the item on the line.];
                ApplicationArea=#Advanced;
                SourceExpr="Line Discount Amount";
                Visible=FALSE;
                Editable=ESACC_F28_Editable;
                HideValue=ESACC_F28_HideValue;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 58  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies if the invoice line is included when the invoice discount is calculated.;
                           ESM=Especifica si la l°nea de factura se incluye cuando se calcula el descuento en la factura.;
                           FRC=SpÇcifie si la ligne facture est incluse lors du calcul de la escompte facture.;
                           ENC=Specifies if the invoice line is included when the invoice discount is calculated.];
                ApplicationArea=#Advanced;
                SourceExpr="Allow Invoice Disc.";
                Visible=FALSE;
                Editable=ESACC_F32_Editable;
                HideValue=ESACC_F32_HideValue;
                OnValidate=BEGIN
                             DeltaUpdateTotals;
                           END;
                            }

    { 18  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the quantity of items that remains to be received.;
                           ESM=Especifica la cantidad de productos que queda por recibir.;
                           FRC=Indique la quantitÇ d'articles restant Ö recevoir.;
                           ENC=Specifies the quantity of items that remains to be received.];
                ApplicationArea=#Advanced;
                BlankZero=Yes;
                SourceExpr="Qty. to Receive";
                Visible=ESACC_F18_Visible;
                Editable=ESACC_F18_Editable;
                HideValue=ESACC_F18_HideValue }

    { 20  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item on the line have been posted as received.;
                           ESM=Especifica cu†ntas unidades del producto que figura en la l°nea se han registrado como recibidas.;
                           FRC=SpÇcifie le nombre d'unitÇs de l'article sur la ligne qui ont dÇjÖ ÇtÇ reportÇes comme reáues.;
                           ENC=Specifies how many units of the item on the line have been posted as received.];
                ApplicationArea=#Advanced;
                BlankZero=Yes;
                SourceExpr="Quantity Received";
                Visible=ESACC_F60_Visible;
                Editable=ESACC_F60_Editable;
                HideValue=ESACC_F60_HideValue }

    { 24  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies how many units of the item on the line have been posted as invoiced.;
                           ESM=Especifica cu†ntas unidades del producto que figura en la l°nea se han registrado como facturadas.;
                           FRC=SpÇcifie le nombre d'unitÇs de l'article sur la ligne qui ont dÇjÖ ÇtÇ reportÇes comme facturÇes.;
                           ENC=Specifies how many units of the item on the line have been posted as invoiced.];
                ApplicationArea=#Advanced;
                BlankZero=Yes;
                SourceExpr="Quantity Invoiced";
                Visible=ESACC_F61_Visible;
                Editable=ESACC_F61_Editable;
                HideValue=ESACC_F61_HideValue }

    { 26  ;2   ;Field     ;
                ToolTipML=[ENU="Specifies the date you expect the items to be available in your warehouse. If you leave the field blank, it will be calculated as follows: Planned Receipt Date + Safety Lead Time + Inbound Warehouse Handling Time = Expected Receipt Date.";
                           ESM="Permite especificar la fecha en que se espera que los productos estÇn disponibles en su almacÇn. Si deja el campo vac°o, se calcular† de la siguiente manera: Fecha de recepci¢n planificada + Plazo de seguridad + Tiempo de manipulaci¢n en almacÇn de entrada = Fecha de recepci¢n esperada.";
                           FRC=SpÇcifie la date Ö laquelle les articles doivent àtre disponibles dans l'entrepìt. Si vous laissez ce champ vide, le calcul est effectuÇ comme suitˇ: Date planifiÇe de rÇception + DÇlai de sÇcuritÇ + DÇlai enlogement + Date rÇception prÇvue.;
                           ENC="Specifies the date you expect the items to be available in your warehouse. If you leave the field blank, it will be calculated as follows: Planned Receipt Date + Safety Lead Time + Inbound Warehouse Handling Time = Expected Receipt Date."];
                ApplicationArea=#Advanced;
                SourceExpr="Expected Receipt Date";
                Visible=FALSE;
                Editable=ESACC_F10_Editable;
                HideValue=ESACC_F10_HideValue }

    { 78  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESM=Especifica el c¢digo de dimensi¢n del acceso directo 1, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.;
                           FRC=SpÇcifie le code du raccourci dimensionˇ1 qui est l'un des codes de dimension principaux que vous configurez dans la fenàtre configuration du grand livre.;
                           ENC=Specifies the code for Shortcut Dimension 1, which is one of two global dimension codes that you set up in the General Ledger Setup window.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 1 Code";
                Visible=FALSE;
                Editable=ESACC_F40_Editable;
                HideValue=ESACC_F40_HideValue }

    { 76  ;2   ;Field     ;
                ToolTipML=[ENU=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.;
                           ESM=Especifica el c¢digo de dimensi¢n del acceso directo 2, que es uno de los dos c¢digos de dimensi¢n globales que se configuran en la ventana Configuraci¢n de contabilidad.;
                           FRC=SpÇcifie le code du raccourci dimensionˇ2 qui est l'un des codes de dimension principaux que vous configurez dans la fenàtre configuration du grand livre.;
                           ENC=Specifies the code for Shortcut Dimension 2, which is one of two global dimension codes that you set up in the General Ledger Setup window.];
                ApplicationArea=#Dimensions;
                SourceExpr="Shortcut Dimension 2 Code";
                Visible=FALSE;
                Editable=ESACC_F41_Editable;
                HideValue=ESACC_F41_HideValue }

    { 300 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[3];
                CaptionClass='1,2,3';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(3),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(3,ShortcutDimCode[3]);
                           END;
                            }

    { 302 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[4];
                CaptionClass='1,2,4';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(4),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(4,ShortcutDimCode[4]);
                           END;
                            }

    { 304 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[5];
                CaptionClass='1,2,5';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(5),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(5,ShortcutDimCode[5]);
                           END;
                            }

    { 306 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[6];
                CaptionClass='1,2,6';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(6),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(6,ShortcutDimCode[6]);
                           END;
                            }

    { 308 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[7];
                CaptionClass='1,2,7';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(7),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(7,ShortcutDimCode[7]);
                           END;
                            }

    { 310 ;2   ;Field     ;
                ApplicationArea=#Dimensions;
                SourceExpr=ShortcutDimCode[8];
                CaptionClass='1,2,8';
                TableRelation="Dimension Value".Code WHERE (Global Dimension No.=CONST(8),
                                                            Dimension Value Type=CONST(Standard),
                                                            Blocked=CONST(No));
                Visible=FALSE;
                OnValidate=BEGIN
                             ValidateShortcutDimCode(8,ShortcutDimCode[8]);
                           END;
                            }

    { 37  ;1   ;Group     ;
                GroupType=Group }

    { 33  ;2   ;Group     ;
                GroupType=Group }

    { 31  ;3   ;Field     ;
                Name=Invoice Discount Amount;
                CaptionML=[ENU=Invoice Discount Amount;
                           ESM=Importe descuento factura;
                           FRC=Montant remise facture;
                           ENC=Invoice Discount Amount];
                ApplicationArea=#Suite;
                SourceExpr=InvoiceDiscountAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetInvoiceDiscAmountWithVATAndCurrencyCaption(FIELDCAPTION("Inv. Discount Amount"),Currency.Code);
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.PurchaseDocTotalsNotUpToDate;
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 29  ;3   ;Field     ;
                Name=Invoice Disc. Pct.;
                CaptionML=[ENU=Invoice Discount %;
                           ESM=% descuento en factura;
                           FRC=% escompte facture;
                           ENC=Invoice Discount %];
                ApplicationArea=#Suite;
                DecimalPlaces=0:2;
                SourceExpr=InvoiceDiscountPct;
                Editable=InvDiscAmountEditable;
                OnValidate=BEGIN
                             DocumentTotals.PurchaseDocTotalsNotUpToDate;
                             AmountWithDiscountAllowed := DocumentTotals.CalcTotalPurchAmountOnlyDiscountAllowed(Rec);
                             InvoiceDiscountAmount := ROUND(AmountWithDiscountAllowed * InvoiceDiscountPct / 100,Currency."Amount Rounding Precision");
                             ValidateInvoiceDiscountAmount;
                           END;
                            }

    { 15  ;2   ;Group     ;
                GroupType=Group }

    { 13  ;3   ;Field     ;
                Name=Total Amount Excl. VAT;
                DrillDown=No;
                CaptionML=[ENU=Total Amount Excl. Tax;
                           ESM=Importe total excl. IVA;
                           FRC=Montant total HT;
                           ENC=Total Amount Excl. Tax];
                ApplicationArea=#Suite;
                SourceExpr=TotalPurchaseLine.Amount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalExclVATCaption(Currency.Code);
                Editable=FALSE }

    { 11  ;3   ;Field     ;
                Name=Total VAT Amount;
                CaptionML=[ENU=Total Tax;
                           ESM=IVA total;
                           FRC=Total TVA;
                           ENC=Total Tax];
                ApplicationArea=#Suite;
                SourceExpr=VATAmount;
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalVATCaption(Currency.Code);
                Editable=FALSE }

    { 9   ;3   ;Field     ;
                Name=Total Amount Incl. VAT;
                CaptionML=[ENU=Total Amount Incl. Tax;
                           ESM=Importe total incl. IVA;
                           FRC=Montant total TTC;
                           ENC=Total Amount Incl. Tax];
                ApplicationArea=#Suite;
                SourceExpr=TotalPurchaseLine."Amount Including VAT";
                AutoFormatType=1;
                AutoFormatExpr="Currency Code";
                CaptionClass=DocumentTotals.GetTotalInclVATCaption(Currency.Code);
                Editable=FALSE }

    { 7   ;3   ;Field     ;
                Name=RefreshTotals;
                DrillDown=Yes;
                SourceExpr=RefreshMessageText;
                Enabled=RefreshMessageEnabled;
                Editable=FALSE;
                OnDrillDown=BEGIN
                              DocumentTotals.PurchaseRedistributeInvoiceDiscountAmounts(Rec,VATAmount,TotalPurchaseLine);
                              DocumentTotals.PurchaseUpdateTotalsControls(Rec,TotalPurchaseHeader,TotalPurchaseLine,RefreshMessageEnabled,
                                TotalAmountStyle,RefreshMessageText,InvDiscAmountEditable,VATAmount);
                            END;

                ShowCaption=No }

  }
  CODE
  {
    VAR
      ESACC_ESFLADSMgt@14123801 : Codeunit 14123801;
      ESACC_C3_Visible@905000030 : Boolean INDATASET;
      ESACC_C3_Enabled@905000033 : Boolean INDATASET;
      ESACC_C5_Visible@905000050 : Boolean INDATASET;
      ESACC_C5_Enabled@905000053 : Boolean INDATASET;
      ESACC_C1900205704_Visible@917057040 : Boolean INDATASET;
      ESACC_C1900205704_Enabled@917057043 : Boolean INDATASET;
      ESACC_C1900296804_Visible@917968040 : Boolean INDATASET;
      ESACC_C1900296804_Enabled@917968043 : Boolean INDATASET;
      ESACC_C1900546404_Visible@920464040 : Boolean INDATASET;
      ESACC_C1900546404_Enabled@920464043 : Boolean INDATASET;
      ESACC_C1900978604_Visible@924786040 : Boolean INDATASET;
      ESACC_C1900978604_Enabled@924786043 : Boolean INDATASET;
      ESACC_C1901312904_Visible@928129040 : Boolean INDATASET;
      ESACC_C1901312904_Enabled@928129043 : Boolean INDATASET;
      ESACC_C1901313304_Visible@928133040 : Boolean INDATASET;
      ESACC_C1901313304_Enabled@928133043 : Boolean INDATASET;
      ESACC_C1901313404_Visible@928134040 : Boolean INDATASET;
      ESACC_C1901313404_Enabled@928134043 : Boolean INDATASET;
      ESACC_C1901652104_Visible@931521040 : Boolean INDATASET;
      ESACC_C1901652104_Enabled@931521043 : Boolean INDATASET;
      ESACC_C1901992804_Visible@934928040 : Boolean INDATASET;
      ESACC_C1901992804_Enabled@934928043 : Boolean INDATASET;
      ESACC_C1902056104_Visible@935561040 : Boolean INDATASET;
      ESACC_C1902056104_Enabled@935561043 : Boolean INDATASET;
      ESACC_C1903098504_Visible@945985040 : Boolean INDATASET;
      ESACC_C1903098504_Enabled@945985043 : Boolean INDATASET;
      ESACC_C1903100004_Visible@946000040 : Boolean INDATASET;
      ESACC_C1903100004_Enabled@946000043 : Boolean INDATASET;
      ESACC_C1903926304_Visible@954263040 : Boolean INDATASET;
      ESACC_C1903926304_Enabled@954263043 : Boolean INDATASET;
      ESACC_C1904522204_Visible@960222040 : Boolean INDATASET;
      ESACC_C1904522204_Enabled@960222043 : Boolean INDATASET;
      ESACC_C1906874004_Visible@983740040 : Boolean INDATASET;
      ESACC_C1906874004_Enabled@983740043 : Boolean INDATASET;
      ESACC_F5_Visible@900000050 : Boolean INDATASET;
      ESACC_F5_Editable@900000051 : Boolean INDATASET;
      ESACC_F5_HideValue@900000052 : Boolean INDATASET;
      ESACC_F6_Visible@900000060 : Boolean INDATASET;
      ESACC_F6_Editable@900000061 : Boolean INDATASET;
      ESACC_F6_HideValue@900000062 : Boolean INDATASET;
      ESACC_F7_Visible@900000070 : Boolean INDATASET;
      ESACC_F7_Editable@900000071 : Boolean INDATASET;
      ESACC_F7_HideValue@900000072 : Boolean INDATASET;
      ESACC_F10_Visible@900000100 : Boolean INDATASET;
      ESACC_F10_Editable@900000101 : Boolean INDATASET;
      ESACC_F10_HideValue@900000102 : Boolean INDATASET;
      ESACC_F11_Visible@900000110 : Boolean INDATASET;
      ESACC_F11_Editable@900000111 : Boolean INDATASET;
      ESACC_F11_HideValue@900000112 : Boolean INDATASET;
      ESACC_F13_Visible@900000130 : Boolean INDATASET;
      ESACC_F13_Editable@900000131 : Boolean INDATASET;
      ESACC_F13_HideValue@900000132 : Boolean INDATASET;
      ESACC_F15_Visible@900000150 : Boolean INDATASET;
      ESACC_F15_Editable@900000151 : Boolean INDATASET;
      ESACC_F15_HideValue@900000152 : Boolean INDATASET;
      ESACC_F18_Visible@900000180 : Boolean INDATASET;
      ESACC_F18_Editable@900000181 : Boolean INDATASET;
      ESACC_F18_HideValue@900000182 : Boolean INDATASET;
      ESACC_F22_Visible@900000220 : Boolean INDATASET;
      ESACC_F22_Editable@900000221 : Boolean INDATASET;
      ESACC_F22_HideValue@900000222 : Boolean INDATASET;
      ESACC_F23_Visible@900000230 : Boolean INDATASET;
      ESACC_F23_Editable@900000231 : Boolean INDATASET;
      ESACC_F23_HideValue@900000232 : Boolean INDATASET;
      ESACC_F27_Visible@900000270 : Boolean INDATASET;
      ESACC_F27_Editable@900000271 : Boolean INDATASET;
      ESACC_F27_HideValue@900000272 : Boolean INDATASET;
      ESACC_F28_Visible@900000280 : Boolean INDATASET;
      ESACC_F28_Editable@900000281 : Boolean INDATASET;
      ESACC_F28_HideValue@900000282 : Boolean INDATASET;
      ESACC_F31_Visible@900000310 : Boolean INDATASET;
      ESACC_F31_Editable@900000311 : Boolean INDATASET;
      ESACC_F31_HideValue@900000312 : Boolean INDATASET;
      ESACC_F32_Visible@900000320 : Boolean INDATASET;
      ESACC_F32_Editable@900000321 : Boolean INDATASET;
      ESACC_F32_HideValue@900000322 : Boolean INDATASET;
      ESACC_F40_Visible@900000400 : Boolean INDATASET;
      ESACC_F40_Editable@900000401 : Boolean INDATASET;
      ESACC_F40_HideValue@900000402 : Boolean INDATASET;
      ESACC_F41_Visible@900000410 : Boolean INDATASET;
      ESACC_F41_Editable@900000411 : Boolean INDATASET;
      ESACC_F41_HideValue@900000412 : Boolean INDATASET;
      ESACC_F54_Visible@900000540 : Boolean INDATASET;
      ESACC_F54_Editable@900000541 : Boolean INDATASET;
      ESACC_F54_HideValue@900000542 : Boolean INDATASET;
      ESACC_F60_Visible@900000600 : Boolean INDATASET;
      ESACC_F60_Editable@900000601 : Boolean INDATASET;
      ESACC_F60_HideValue@900000602 : Boolean INDATASET;
      ESACC_F61_Visible@900000610 : Boolean INDATASET;
      ESACC_F61_Editable@900000611 : Boolean INDATASET;
      ESACC_F61_HideValue@900000612 : Boolean INDATASET;
      ESACC_F85_Visible@900000850 : Boolean INDATASET;
      ESACC_F85_Editable@900000851 : Boolean INDATASET;
      ESACC_F85_HideValue@900000852 : Boolean INDATASET;
      ESACC_F86_Visible@900000860 : Boolean INDATASET;
      ESACC_F86_Editable@900000861 : Boolean INDATASET;
      ESACC_F86_HideValue@900000862 : Boolean INDATASET;
      ESACC_F87_Visible@900000870 : Boolean INDATASET;
      ESACC_F87_Editable@900000871 : Boolean INDATASET;
      ESACC_F87_HideValue@900000872 : Boolean INDATASET;
      ESACC_F88_Visible@900000880 : Boolean INDATASET;
      ESACC_F88_Editable@900000881 : Boolean INDATASET;
      ESACC_F88_HideValue@900000882 : Boolean INDATASET;
      ESACC_F90_Visible@900000900 : Boolean INDATASET;
      ESACC_F90_Editable@900000901 : Boolean INDATASET;
      ESACC_F90_HideValue@900000902 : Boolean INDATASET;
      ESACC_F103_Visible@900001030 : Boolean INDATASET;
      ESACC_F103_Editable@900001031 : Boolean INDATASET;
      ESACC_F103_HideValue@900001032 : Boolean INDATASET;
      ESACC_F5402_Visible@900054020 : Boolean INDATASET;
      ESACC_F5402_Editable@900054021 : Boolean INDATASET;
      ESACC_F5402_HideValue@900054022 : Boolean INDATASET;
      ESACC_F5407_Visible@900054070 : Boolean INDATASET;
      ESACC_F5407_Editable@900054071 : Boolean INDATASET;
      ESACC_F5407_HideValue@900054072 : Boolean INDATASET;
      ESACC_F5705_Visible@900057050 : Boolean INDATASET;
      ESACC_F5705_Editable@900057051 : Boolean INDATASET;
      ESACC_F5705_HideValue@900057052 : Boolean INDATASET;
      ESACC_F10017_Visible@900100170 : Boolean INDATASET;
      ESACC_F10017_Editable@900100171 : Boolean INDATASET;
      ESACC_F10017_HideValue@900100172 : Boolean INDATASET;
      ESACC_F10025_Visible@900100250 : Boolean INDATASET;
      ESACC_F10025_Editable@900100251 : Boolean INDATASET;
      ESACC_F10025_HideValue@900100252 : Boolean INDATASET;
      ESACC_F50500_Visible@900505000 : Boolean INDATASET;
      ESACC_F50500_Editable@900505001 : Boolean INDATASET;
      ESACC_F50500_HideValue@900505002 : Boolean INDATASET;
      ESACC_F50501_Visible@900505010 : Boolean INDATASET;
      ESACC_F50501_Editable@900505011 : Boolean INDATASET;
      ESACC_F50501_HideValue@900505012 : Boolean INDATASET;
      ESACC_F50502_Visible@900505020 : Boolean INDATASET;
      ESACC_F50502_Editable@900505021 : Boolean INDATASET;
      ESACC_F50502_HideValue@900505022 : Boolean INDATASET;
      ESACC_F50503_Visible@900505030 : Boolean INDATASET;
      ESACC_F50503_Editable@900505031 : Boolean INDATASET;
      ESACC_F50503_HideValue@900505032 : Boolean INDATASET;
      TotalPurchaseHeader@1013 : Record 38;
      TotalPurchaseLine@1012 : Record 39;
      PurchLine@1001 : Record 39;
      CurrentPurchLine@1000 : Record 39;
      Currency@1005 : Record 4;
      PurchasesPayablesSetup@1008 : Record 312;
      TransferExtendedText@1002 : Codeunit 378;
      ItemAvailFormsMgt@1004 : Codeunit 353;
      PurchCalcDiscByType@1015 : Codeunit 66;
      DocumentTotals@1014 : Codeunit 57;
      ShortcutDimCode@1003 : ARRAY [8] OF Code[20];
      VATAmount@1011 : Decimal;
      InvoiceDiscountAmount@1026 : Decimal;
      InvoiceDiscountPct@1025 : Decimal;
      AmountWithDiscountAllowed@1024 : Decimal;
      InvDiscAmountEditable@1010 : Boolean;
      UpdateInvDiscountQst@1007 : TextConst 'ENU=One or more lines have been invoiced. The discount distributed to invoiced lines will not be taken into account.\\Do you want to update the invoice discount?;ESM=Se han facturado una o varias l°neas. No se tendr† en cuenta el descuento distribuido entre las l°neas facturadas.\\®Desea actualizar el descuento en factura?;FRC=Une ou plusieurs lignes ont ÇtÇ facturÇes. L''escompte rÇparti sur les lignes facturÇes n''est pas pris en compte.\\Voulez-vous mettre Ö jour l''escompte facture?;ENC=One or more lines have been invoiced. The discount distributed to invoiced lines will not be taken into account.\\Do you want to update the invoice discount?';
      TotalAmountStyle@1009 : Text;
      RefreshMessageEnabled@11008 : Boolean;
      RefreshMessageText@11007 : Text;

    LOCAL PROCEDURE ESACC_EasySecurity@14123801(OpenObject@14123801 : Boolean);
    VAR
      SetFilters@14123802 : Codeunit 14123812;
      TempBoolean@14123803 : Boolean;
    BEGIN
      IF OpenObject THEN BEGIN
        SetFilters.Filter39(Rec,8,510);

        TempBoolean := CurrPage.EDITABLE;
        IF ESACC_ESFLADSMgt.PageGeneral(39,510,TempBoolean) THEN
          CurrPage.EDITABLE := TempBoolean;
      END;

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,3,
        ESACC_C3_Visible,ESACC_C3_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,5,
        ESACC_C5_Visible,ESACC_C5_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1900205704,
        ESACC_C1900205704_Visible,ESACC_C1900205704_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1900296804,
        ESACC_C1900296804_Visible,ESACC_C1900296804_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1900546404,
        ESACC_C1900546404_Visible,ESACC_C1900546404_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1900978604,
        ESACC_C1900978604_Visible,ESACC_C1900978604_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1901312904,
        ESACC_C1901312904_Visible,ESACC_C1901312904_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1901313304,
        ESACC_C1901313304_Visible,ESACC_C1901313304_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1901313404,
        ESACC_C1901313404_Visible,ESACC_C1901313404_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1901652104,
        ESACC_C1901652104_Visible,ESACC_C1901652104_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1901992804,
        ESACC_C1901992804_Visible,ESACC_C1901992804_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1902056104,
        ESACC_C1902056104_Visible,ESACC_C1902056104_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1903098504,
        ESACC_C1903098504_Visible,ESACC_C1903098504_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1903100004,
        ESACC_C1903100004_Visible,ESACC_C1903100004_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1903926304,
        ESACC_C1903926304_Visible,ESACC_C1903926304_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1904522204,
        ESACC_C1904522204_Visible,ESACC_C1904522204_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,1,1906874004,
        ESACC_C1906874004_Visible,ESACC_C1906874004_Enabled,TempBoolean);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,5,
        ESACC_F5_Visible,ESACC_F5_Editable,ESACC_F5_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,6,
        ESACC_F6_Visible,ESACC_F6_Editable,ESACC_F6_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,7,
        ESACC_F7_Visible,ESACC_F7_Editable,ESACC_F7_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,10,
        ESACC_F10_Visible,ESACC_F10_Editable,ESACC_F10_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,11,
        ESACC_F11_Visible,ESACC_F11_Editable,ESACC_F11_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,13,
        ESACC_F13_Visible,ESACC_F13_Editable,ESACC_F13_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,15,
        ESACC_F15_Visible,ESACC_F15_Editable,ESACC_F15_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,18,
        ESACC_F18_Visible,ESACC_F18_Editable,ESACC_F18_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,22,
        ESACC_F22_Visible,ESACC_F22_Editable,ESACC_F22_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,23,
        ESACC_F23_Visible,ESACC_F23_Editable,ESACC_F23_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,27,
        ESACC_F27_Visible,ESACC_F27_Editable,ESACC_F27_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,28,
        ESACC_F28_Visible,ESACC_F28_Editable,ESACC_F28_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,31,
        ESACC_F31_Visible,ESACC_F31_Editable,ESACC_F31_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,32,
        ESACC_F32_Visible,ESACC_F32_Editable,ESACC_F32_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,40,
        ESACC_F40_Visible,ESACC_F40_Editable,ESACC_F40_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,41,
        ESACC_F41_Visible,ESACC_F41_Editable,ESACC_F41_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,54,
        ESACC_F54_Visible,ESACC_F54_Editable,ESACC_F54_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,60,
        ESACC_F60_Visible,ESACC_F60_Editable,ESACC_F60_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,61,
        ESACC_F61_Visible,ESACC_F61_Editable,ESACC_F61_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,85,
        ESACC_F85_Visible,ESACC_F85_Editable,ESACC_F85_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,86,
        ESACC_F86_Visible,ESACC_F86_Editable,ESACC_F86_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,87,
        ESACC_F87_Visible,ESACC_F87_Editable,ESACC_F87_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,88,
        ESACC_F88_Visible,ESACC_F88_Editable,ESACC_F88_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,90,
        ESACC_F90_Visible,ESACC_F90_Editable,ESACC_F90_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,103,
        ESACC_F103_Visible,ESACC_F103_Editable,ESACC_F103_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,5402,
        ESACC_F5402_Visible,ESACC_F5402_Editable,ESACC_F5402_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,5407,
        ESACC_F5407_Visible,ESACC_F5407_Editable,ESACC_F5407_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,5705,
        ESACC_F5705_Visible,ESACC_F5705_Editable,ESACC_F5705_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,10017,
        ESACC_F10017_Visible,ESACC_F10017_Editable,ESACC_F10017_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,10025,
        ESACC_F10025_Visible,ESACC_F10025_Editable,ESACC_F10025_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,50500,
        ESACC_F50500_Visible,ESACC_F50500_Editable,ESACC_F50500_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,50501,
        ESACC_F50501_Visible,ESACC_F50501_Editable,ESACC_F50501_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,50502,
        ESACC_F50502_Visible,ESACC_F50502_Editable,ESACC_F50502_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        39,510,0,50503,
        ESACC_F50503_Visible,ESACC_F50503_Editable,ESACC_F50503_HideValue);

      ESACC_EasySecurityManual(OpenObject);
    END;

    LOCAL PROCEDURE ESACC_EasySecurityManual@14123811(OpenObject@14123811 : Boolean);
    BEGIN
    END;

    [External]
    PROCEDURE ApproveCalcInvDisc@7();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Purch.-Disc. (Yes/No)",Rec);
      DocumentTotals.PurchaseDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE ValidateInvoiceDiscountAmount@30();
    VAR
      PurchaseHeader@1000 : Record 38;
    BEGIN
      PurchaseHeader.GET("Document Type","Document No.");
      IF PurchaseHeader.InvoicedLineExists THEN
        IF NOT CONFIRM(UpdateInvDiscountQst,FALSE) THEN
          EXIT;

      DocumentTotals.PurchaseDocTotalsNotUpToDate;
      PurchCalcDiscByType.ApplyInvDiscBasedOnAmt(InvoiceDiscountAmount,PurchaseHeader);
      CurrPage.UPDATE(FALSE);
    END;

    LOCAL PROCEDURE ExplodeBOM@3();
    BEGIN
      CODEUNIT.RUN(CODEUNIT::"Purch.-Explode BOM",Rec);
      DocumentTotals.PurchaseDocTotalsNotUpToDate;
    END;

    LOCAL PROCEDURE InsertExtendedText@6(Unconditionally@1000 : Boolean);
    BEGIN
      IF TransferExtendedText.PurchCheckIfAnyExtText(Rec,Unconditionally) THEN BEGIN
        CurrPage.SAVERECORD;
        TransferExtendedText.InsertPurchExtText(Rec);
      END;
      IF TransferExtendedText.MakeUpdate THEN
        UpdateForm(TRUE);
    END;

    [External]
    PROCEDURE UpdateForm@12(SetSaveRecord@1000 : Boolean);
    BEGIN
      CurrPage.UPDATE(SetSaveRecord);
    END;

    PROCEDURE RedistributeTotalsOnAfterValidate@1020000();
    BEGIN
      CurrPage.SAVERECORD;

      DocumentTotals.PurchaseRedistributeInvoiceDiscountAmounts(Rec,VATAmount,TotalPurchaseLine);
    END;

    LOCAL PROCEDURE GetTotalsPurchaseHeader@19();
    BEGIN
      DocumentTotals.GetTotalPurchaseHeaderAndCurrency(Rec,TotalPurchaseHeader,Currency);
    END;

    LOCAL PROCEDURE CalculateTotals@18();
    BEGIN
      DocumentTotals.PurchaseCheckIfDocumentChanged(Rec,xRec);
      DocumentTotals.CalculatePurchaseSubPageTotals(
        TotalPurchaseHeader,TotalPurchaseLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      DocumentTotals.RefreshPurchaseLine(Rec);
    END;

    LOCAL PROCEDURE DeltaUpdateTotals@1();
    BEGIN
      DocumentTotals.PurchaseDeltaUpdateTotals(Rec,xRec,TotalPurchaseLine,VATAmount,InvoiceDiscountAmount,InvoiceDiscountPct);
      IF "Line Amount" <> xRec."Line Amount" THEN BEGIN
        CurrPage.SAVERECORD;
        SendLineInvoiceDiscountResetNotification;
        CurrPage.UPDATE(FALSE);
      END;
    END;

    LOCAL PROCEDURE UpdateEditableOnRow@20();
    BEGIN
      InvDiscAmountEditable := CurrPage.EDITABLE AND NOT PurchasesPayablesSetup."Calc. Inv. Discount";
    END;

    LOCAL PROCEDURE ShowOrders@2();
    BEGIN
      CurrentPurchLine := Rec;
      PurchLine.RESET;
      PurchLine.SETCURRENTKEY("Document Type","Blanket Order No.","Blanket Order Line No.");
      PurchLine.SETRANGE("Document Type",PurchLine."Document Type"::Order);
      PurchLine.SETRANGE("Blanket Order No.",CurrentPurchLine."Document No.");
      PurchLine.SETRANGE("Blanket Order Line No.",CurrentPurchLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Purchase Lines",PurchLine);
    END;

    LOCAL PROCEDURE ShowInvoices@4();
    BEGIN
      CurrentPurchLine := Rec;
      PurchLine.RESET;
      PurchLine.SETCURRENTKEY("Document Type","Blanket Order No.","Blanket Order Line No.");
      PurchLine.SETRANGE("Document Type",PurchLine."Document Type"::Invoice);
      PurchLine.SETRANGE("Blanket Order No.",CurrentPurchLine."Document No.");
      PurchLine.SETRANGE("Blanket Order Line No.",CurrentPurchLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Purchase Lines",PurchLine);
    END;

    LOCAL PROCEDURE ShowReturnOrders@9();
    BEGIN
      CurrentPurchLine := Rec;
      PurchLine.RESET;
      PurchLine.SETCURRENTKEY("Document Type","Blanket Order No.","Blanket Order Line No.");
      PurchLine.SETRANGE("Document Type",PurchLine."Document Type"::"Return Order");
      PurchLine.SETRANGE("Blanket Order No.",CurrentPurchLine."Document No.");
      PurchLine.SETRANGE("Blanket Order Line No.",CurrentPurchLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Purchase Lines",PurchLine);
    END;

    LOCAL PROCEDURE ShowCreditMemos@10();
    BEGIN
      CurrentPurchLine := Rec;
      PurchLine.RESET;
      PurchLine.SETCURRENTKEY("Document Type","Blanket Order No.","Blanket Order Line No.");
      PurchLine.SETRANGE("Document Type",PurchLine."Document Type"::"Credit Memo");
      PurchLine.SETRANGE("Blanket Order No.",CurrentPurchLine."Document No.");
      PurchLine.SETRANGE("Blanket Order Line No.",CurrentPurchLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Purchase Lines",PurchLine);
    END;

    LOCAL PROCEDURE ShowPostedReceipts@17();
    VAR
      PurchRcptLine@1000 : Record 121;
    BEGIN
      CurrentPurchLine := Rec;
      PurchRcptLine.RESET;
      PurchRcptLine.SETCURRENTKEY("Blanket Order No.","Blanket Order Line No.");
      PurchRcptLine.SETRANGE("Blanket Order No.",CurrentPurchLine."Document No.");
      PurchRcptLine.SETRANGE("Blanket Order Line No.",CurrentPurchLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Posted Purchase Receipt Lines",PurchRcptLine);
    END;

    LOCAL PROCEDURE ShowPostedInvoices@14();
    VAR
      PurchInvLine@1000 : Record 123;
    BEGIN
      CurrentPurchLine := Rec;
      PurchInvLine.RESET;
      PurchInvLine.SETCURRENTKEY("Blanket Order No.","Blanket Order Line No.");
      PurchInvLine.SETRANGE("Blanket Order No.",CurrentPurchLine."Document No.");
      PurchInvLine.SETRANGE("Blanket Order Line No.",CurrentPurchLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Posted Purchase Invoice Lines",PurchInvLine);
    END;

    LOCAL PROCEDURE ShowPostedReturnReceipts@13();
    VAR
      ReturnShptLine@1000 : Record 6651;
    BEGIN
      CurrentPurchLine := Rec;
      ReturnShptLine.RESET;
      ReturnShptLine.SETCURRENTKEY("Blanket Order No.","Blanket Order Line No.");
      ReturnShptLine.SETRANGE("Blanket Order No.",CurrentPurchLine."Document No.");
      ReturnShptLine.SETRANGE("Blanket Order Line No.",CurrentPurchLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Posted Return Shipment Lines",ReturnShptLine);
    END;

    LOCAL PROCEDURE ShowPostedCreditMemos@11();
    VAR
      PurchCrMemoLine@1000 : Record 125;
    BEGIN
      CurrentPurchLine := Rec;
      PurchCrMemoLine.RESET;
      PurchCrMemoLine.SETCURRENTKEY("Blanket Order No.","Blanket Order Line No.");
      PurchCrMemoLine.SETRANGE("Blanket Order No.",CurrentPurchLine."Document No.");
      PurchCrMemoLine.SETRANGE("Blanket Order Line No.",CurrentPurchLine."Line No.");
      PAGE.RUNMODAL(PAGE::"Posted Purchase Cr. Memo Lines",PurchCrMemoLine);
    END;

    LOCAL PROCEDURE NoOnAfterValidate@19066594();
    BEGIN
      InsertExtendedText(FALSE);
    END;

    LOCAL PROCEDURE CrossReferenceNoOnAfterValidat@19048248();
    BEGIN
      InsertExtendedText(FALSE);
    END;

    BEGIN
    {
      TOP050 KT ABCSI Modification to Item Cards 01292015
       - Added below field
          Alt. UOM Code
          Alt. Unit of Measure
          Alt. UOM Quantity
          Alt. UOM Unit Cost
    }
    END.
  }
}

