OBJECT Page 9087 Sales Line FactBox
{
  OBJECT-PROPERTIES
  {
    Date=11/06/20;
    Time=[ 7:58:39 AM];
    Modified=Yes;
    Version List=NAVW111.00.00.36462;
  }
  PROPERTIES
  {
    CaptionML=[ENU=Sales Line Details;
               ESM=Detalles l¡neas venta;
               FRC=D‚tails ligne vente;
               ENC=Sales Line Details];
    SourceTable=Table37;
    PageType=CardPart;
    OnOpenPage=BEGIN
                 Page9087EventPublisher.Pg9087_OnOpenPage(FieldsEnabled);//NAVEVENT
                 ;ESACC_EasySecurity(TRUE);
               END;

    OnAfterGetRecord=BEGIN
                       CALCFIELDS("Reserved Quantity");
                       SalesInfoPaneMgt.ResetItemNo;
                     END;

    OnAfterGetCurrRecord=BEGIN
                           ClearSalesHeader;
                         END;

  }
  CONTROLS
  {
    { 1900000001;0;Container;
                ContainerType=ContentArea }

    { 8   ;1   ;Field     ;
                Name=ItemNo;
                Lookup=No;
                CaptionML=[ENU=Item No.;
                           ESM=N§ producto;
                           FRC=Nø article;
                           ENC=Item No.];
                ToolTipML=[ENU=Specifies the item that is handled on the sales line.;
                           ESM=Especifica el producto que se manipula en la l¡nea de venta.;
                           FRC=Sp‚cifie l'article g‚r‚ sur la ligne vente.;
                           ENC=Specifies the item that is handled on the sales line.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=ShowNo;
                OnDrillDown=BEGIN
                              SalesInfoPaneMgt.LookupItem(Rec);
                            END;
                             }

    { 13  ;1   ;Field     ;
                Name=Required Quantity;
                CaptionML=[ENU=Required Quantity;
                           ESM=Cantidad requerida;
                           FRC=Quantit‚ requise;
                           ENC=Required Quantity];
                ToolTipML=[ENU=Specifies how many units of the item are required on the sales line.;
                           ESM=Especifica cu ntas unidades del producto se necesitan en la l¡nea de venta.;
                           FRC=Sp‚cifie le nombre d'unit‚s de l'article n‚cessaires sur la ligne vente.;
                           ENC=Specifies how many units of the item are required on the sales line.];
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:5;
                SourceExpr="Outstanding Quantity" - "Reserved Quantity" }

    { 12  ;1   ;Group     ;
                Name=Availability;
                CaptionML=[ENU=Availability;
                           ESM=Disponibilidad;
                           FRC=Disponibilit‚;
                           ENC=Availability];
                GroupType=Group }

    { 1000000009;2;Field  ;
                CaptionML=ENU=Quantity on Hand;
                ApplicationArea=#Basic,#Suite;
                DecimalPlaces=0:5;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcInventory(Rec);
                Editable=FieldsEnabled;
                OnDrillDown=VAR
                              ItemLedgerEntry@1000000000 : Record 32;
                            BEGIN
                              // <TPZ1032>
                              IF Type <> Type::Item THEN
                                EXIT;

                              ItemLedgerEntry.RESET;
                              ItemLedgerEntry.SETRANGE("Item No.","No.");
                              ItemLedgerEntry.SETRANGE("Variant Code","Variant Code");
                              ItemLedgerEntry.SETRANGE("Location Code","Location Code");
                              PAGE.RUN(0,ItemLedgerEntry);
                              // </TPZ1032>
                            END;
                             }

    { 1000000008;2;Field  ;
                CaptionML=ENU=Qty. on Purch. Order;
                DecimalPlaces=0:5;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcQtyOnPurchOrder(Rec);
                Enabled=FieldsEnabled;
                OnDrillDown=VAR
                              PurchLine@1000000000 : Record 39;
                            BEGIN
                              // <TPZ1032>
                              IF Type <> Type::Item THEN
                                EXIT;

                              PurchLine.RESET;
                              PurchLine.SETRANGE("Document Type",PurchLine."Document Type"::Order);
                              PurchLine.SETRANGE(Type,PurchLine.Type::Item);
                              PurchLine.SETRANGE("No.","No.");
                              PurchLine.SETRANGE("Variant Code","Variant Code");
                              PurchLine.SETRANGE("Location Code","Location Code");
                              PAGE.RUN(0,PurchLine);
                              // </TPZ1032>
                            END;
                             }

    { 1000000007;2;Field  ;
                CaptionML=ENU=Qty. on Sales Order;
                DecimalPlaces=0:5;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcQtyOnSalesOrder(Rec);
                Enabled=FieldsEnabled;
                OnDrillDown=VAR
                              SalesLine@1000000000 : Record 37;
                            BEGIN
                              // <TPZ1032>
                              IF Type <> Type::Item THEN
                                EXIT;

                              SalesLine.RESET;
                              SalesLine.SETRANGE("Document Type",SalesLine."Document Type"::Order);
                              SalesLine.SETRANGE(Type,SalesLine.Type::Item);
                              SalesLine.SETRANGE("No.","No.");
                              SalesLine.SETRANGE("Variant Code","Variant Code");
                              SalesLine.SETRANGE("Location Code","Location Code");
                              PAGE.RUN(0,SalesLine);
                              // </TPZ1032>
                            END;
                             }

    { 1000000006;2;Field  ;
                CaptionML=ENU=Qty. in Transit;
                DecimalPlaces=0:5;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcQtyInTransit(Rec);
                Enabled=FieldsEnabled;
                OnDrillDown=VAR
                              TransferLine@1000000000 : Record 5741;
                            BEGIN
                              // <TPZ1032>
                              IF Type <> Type::Item THEN
                                EXIT;

                              TransferLine.RESET;
                              TransferLine.SETRANGE("Item No.","No.");
                              TransferLine.SETRANGE("Variant Code","Variant Code");
                              TransferLine.SETRANGE("Transfer-to Code","Location Code");
                              PAGE.RUN(0,TransferLine);
                              // </TPZ1032>
                            END;
                             }

    { 1000000004;2;Field  ;
                CaptionML=ENU=Qty. on Assembly Order;
                DecimalPlaces=0:5;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcQtyOnAssemblyOrder(Rec);
                Enabled=FieldsEnabled;
                OnDrillDown=VAR
                              AssemblyHeader@1000000000 : Record 900;
                            BEGIN
                              // <TPZ1032>
                              IF Type <> Type::Item THEN
                                EXIT;

                              AssemblyHeader.RESET;
                              AssemblyHeader.SETRANGE("Document Type",AssemblyHeader."Document Type"::Order);
                              AssemblyHeader.SETRANGE("Item No.","No.");
                              AssemblyHeader.SETRANGE("Variant Code","Variant Code");
                              AssemblyHeader.SETRANGE("Location Code","Location Code");
                              PAGE.RUN(0,AssemblyHeader);
                              // </TPZ1032>
                            END;
                             }

    { 1000000005;2;Field  ;
                CaptionML=ENU=Qty. on Asm. Component;
                DecimalPlaces=0:5;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcQtyOnAsmComponent(Rec);
                Enabled=FieldsEnabled;
                OnDrillDown=VAR
                              AssemblyLine@1000000000 : Record 901;
                            BEGIN
                              // <TPZ1032>
                              IF Type <> Type::Item THEN
                                EXIT;

                              AssemblyLine.RESET;
                              AssemblyLine.SETRANGE("Document Type",AssemblyLine."Document Type"::Order);
                              AssemblyLine.SETRANGE(Type,AssemblyLine.Type::Item);
                              AssemblyLine.SETRANGE("No.","No.");
                              AssemblyLine.SETRANGE("Variant Code","Variant Code");
                              AssemblyLine.SETRANGE("Location Code","Location Code");
                              PAGE.RUN(0,AssemblyLine);
                              // </TPZ1032>
                            END;
                             }

    { 1000000003;2;Field  ;
                CaptionML=ENU=Qty. Available;
                DecimalPlaces=0:5;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcQtyAvailable(Rec);
                Enabled=FieldsEnabled }

    { 1000000002;2;Field  ;
                CaptionML=ENU=Qty. on Pick;
                DecimalPlaces=0:5;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcQtyOnPick(Rec);
                Enabled=FieldsEnabled;
                OnDrillDown=VAR
                              WhseActivityLine@1000000000 : Record 5767;
                            BEGIN
                              // <TPZ1032>
                              IF Type <> Type::Item THEN
                                EXIT;

                              WhseActivityLine.RESET;
                              WhseActivityLine.SETRANGE("Activity Type",WhseActivityLine."Activity Type"::Pick);
                              WhseActivityLine.SETRANGE("Item No.","No.");
                              WhseActivityLine.SETRANGE("Variant Code","Variant Code");
                              WhseActivityLine.SETRANGE("Location Code","Location Code");
                              WhseActivityLine.SETFILTER(
                                "Action Type",
                                '%1|%2',
                                WhseActivityLine."Action Type"::" ",
                                WhseActivityLine."Action Type"::Take);
                              WhseActivityLine.SETRANGE("Breakbulk No.",0);
                              PAGE.RUN(0,WhseActivityLine);
                              // </TPZ1032>
                            END;
                             }

    { 1000000001;2;Field  ;
                CaptionML=ENU=Qty. Avail to Pick;
                DecimalPlaces=0:5;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcQtyAvailableToPick(Rec);
                Enabled=FieldsEnabled;
                OnDrillDown=VAR
                              Location@1000000000 : Record 14;
                              Item@1000000002 : Record 27;
                              BinContent@1000000001 : Record 7302;
                            BEGIN
                              // <TPZ1032>
                              IF Type <> Type::Item THEN
                                EXIT;

                              IF Location.GET("Location Code") AND
                                Location."Bin Mandatory"
                              THEN BEGIN
                                BinContent.RESET;
                                BinContent.SETRANGE("Location Code","Location Code");
                                BinContent.SETRANGE("Item No.","No.");
                                BinContent.SETRANGE("Bin Type Code",'PICKPUT');
                                BinContent.SETFILTER("Block Movement",'<>%1&<>%2',BinContent."Block Movement"::Outbound,BinContent."Block Movement"::All);
                                PAGE.RUN(PAGE::"Item Bin Contents",BinContent);
                              END;
                              // </TPZ1032>
                            END;
                             }

    { 1000000000;2;Field  ;
                Name=Shipment Date;
                CaptionML=[ENU=Shipment Date;
                           ESM=Fecha env¡o;
                           FRC=Date de livraison;
                           ENC=Shipment Date];
                SourceExpr=SalesInfoPaneMgt.CalcAvailabilityDate(Rec);
                Visible=FALSE;
                Enabled=FieldsEnabled }

    { 1000000015;2;Field  ;
                Name=Item Availability;
                DrillDown=Yes;
                CaptionML=[ENU=Item Availability;
                           ESM=Disponibilidad de producto;
                           FRC=Disponibilit‚ article;
                           ENC=Item Availability];
                DecimalPlaces=2:0;
                SourceExpr=SalesInfoPaneMgt.CalcAvailability(Rec);
                Visible=FALSE;
                Enabled=FieldsEnabled;
                OnDrillDown=BEGIN
                              ItemAvailFormsMgt.ShowItemAvailFromSalesLine(Rec,ItemAvailFormsMgt.ByEvent);
                              CurrPage.UPDATE(TRUE);
                            END;
                             }

    { 1000000014;2;Field  ;
                Name=Available Inventory;
                CaptionML=[ENU=Available Inventory;
                           ESM=Existencias disponibles;
                           FRC=Inventaire disponible;
                           ENC=Available Inventory];
                DecimalPlaces=0:5;
                SourceExpr=SalesInfoPaneMgt.CalcAvailableInventory(Rec);
                Visible=FALSE;
                Enabled=FieldsEnabled }

    { 1000000013;2;Field  ;
                Name=Scheduled Receipt;
                CaptionML=[ENU=Scheduled Receipt;
                           ESM=Recepci¢n programada;
                           FRC=R‚ception programm‚e;
                           ENC=Scheduled Receipt];
                DecimalPlaces=0:5;
                SourceExpr=SalesInfoPaneMgt.CalcScheduledReceipt(Rec);
                Visible=FALSE;
                Enabled=FieldsEnabled }

    { 1000000011;2;Field  ;
                Name=Gross Requirements;
                CaptionML=[ENU=Gross Requirements;
                           ESM=Necesidades brutas;
                           FRC=Besoins bruts;
                           ENC=Gross Requirements];
                DecimalPlaces=0:5;
                SourceExpr=SalesInfoPaneMgt.CalcGrossRequirements(Rec);
                Visible=FALSE;
                Enabled=FieldsEnabled }

    { 1000000010;2;Field  ;
                Name=Reserved Requirements;
                CaptionML=[ENU=Reserved Requirements;
                           ESM=Requisitos de reserva;
                           FRC=Besoins r‚serv‚s;
                           ENC=Reserved Requirements];
                DecimalPlaces=0:5;
                SourceExpr=SalesInfoPaneMgt.CalcReservedDemand(Rec);
                Visible=FALSE;
                Enabled=FieldsEnabled }

    { 16  ;1   ;Group     ;
                Name=Item;
                CaptionML=[ENU=Item;
                           ESM=Producto;
                           FRC=Article;
                           ENC=Item];
                GroupType=Group }

    { 15  ;2   ;Field     ;
                Name=UnitofMeasureCode;
                CaptionML=[ENU=Unit of Measure Code;
                           ESM=C¢d. unidad medida;
                           FRC=Code unit‚ de mesure;
                           ENC=Unit of Measure Code];
                ToolTipML=[ENU=Specifies the unit of measure that is used to determine the value in the Unit Price field on the sales line.;
                           ESM=Especifica la unidad de medida que se usa para determinar el valor del campo Precio venta de la l¡nea de ventas.;
                           FRC=Sp‚cifie l'unit‚ de mesure utilis‚e pour d‚terminer la valeur dans le champ Prix unitaire de la ligne vente.;
                           ENC=Specifies the unit of measure that is used to determine the value in the Unit Price field on the sales line.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Unit of Measure Code";
                Visible=ESACC_F5407_Visible;
                Editable=ESACC_F5407_Editable;
                HideValue=ESACC_F5407_HideValue }

    { 14  ;2   ;Field     ;
                Name=Qty. per Unit of Measure;
                CaptionML=[ENU=Qty. per Unit of Measure;
                           ESM=Cdad. por unidad medida;
                           FRC=Quantit‚ par unit‚;
                           ENC=Qty. per Unit of Measure];
                ToolTipML=[ENU=Specifies an auto-filled number if you have included Sales Unit of Measure on the item card and a quantity in the Qty. per Unit of Measure field.;
                           ESM=Especifica un n£mero de relleno autom tico si se ha incluido el campo Unidad medida venta en la ficha de producto y una cantidad en el campo Cdad.ÿpor unidad medida.;
                           FRC=Sp‚cifie un num‚ro renseign‚ automatiquement si vous avez inclus l'Unit‚ de vente sur la fiche article et une quantit‚ dans le champ Quantit‚ par unit‚.;
                           ENC=Specifies an auto-filled number if you have included Sales Unit of Measure on the item card and a quantity in the Qty. per Unit of Measure field.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr="Qty. per Unit of Measure";
                Visible=ESACC_F5404_Visible;
                Editable=ESACC_F5404_Editable;
                HideValue=ESACC_F5404_HideValue }

    { 5   ;2   ;Field     ;
                Name=Substitutions;
                DrillDown=Yes;
                CaptionML=[ENU=Substitutions;
                           ESM=Sustituciones;
                           FRC=Substitutions;
                           ENC=Substitutions];
                ToolTipML=[ENU=Specifies other items that are set up to be traded instead of the item in case it is not available.;
                           ESM=Especifica otros productos que est n configurados para comercializarse en lugar del producto en caso de que este no est‚ disponible.;
                           FRC=Sp‚cifie d'autres articles qui sont configur‚s pour ˆtre n‚goci‚s … la place de l'article, s'il n'est pas disponible.;
                           ENC=Specifies other items that are set up to be traded instead of the item in case it is not available.];
                ApplicationArea=#Suite;
                SourceExpr=SalesInfoPaneMgt.CalcNoOfSubstitutions(Rec);
                OnDrillDown=BEGIN
                              CurrPage.SAVERECORD;
                              ShowItemSub;
                              CurrPage.UPDATE(TRUE);
                              AutoReserve;//TPZ2829
                            END;
                             }

    { 7   ;2   ;Field     ;
                Name=SalesPrices;
                DrillDown=Yes;
                CaptionML=[ENU=Sales Prices;
                           ESM=Precios ventas;
                           FRC=Prix vente;
                           ENC=Sales Prices];
                ToolTipML=[ENU=Specifies special sales prices that you grant when certain conditions are met, such as customer, quantity, or ending date. The price agreements can be for individual customers, for a group of customers, for all customers or for a campaign.;
                           ESM=Especifica los precios de venta especiales que se conceden si se cumplen ciertas condiciones, tales como cliente, cantidad o fecha final. Los acuerdos de precios pueden ser para clientes individuales, un grupo de clientes, todos los clientes o una campa¤a.;
                           FRC=Sp‚cifie des prix vente sp‚ciaux que vous octroyez lorsque certaines conditions sont respect‚es, par exemple client, quantit‚ ou date de fin. Les ententes de prix peuvent concerner des clients particuliers, un groupe de clients, tous les clients ou une promotion.;
                           ENC=Specifies special sales prices that you grant when certain conditions are met, such as customer, quantity, or ending date. The price agreements can be for individual customers, for a group of customers, for all customers or for a campaign.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=SalesInfoPaneMgt.CalcNoOfSalesPrices(Rec);
                OnDrillDown=BEGIN
                              ShowPrices;
                              CurrPage.UPDATE;
                            END;
                             }

    { 11  ;2   ;Field     ;
                Name=SalesLineDiscounts;
                DrillDown=Yes;
                CaptionML=[ENU=Sales Line Discounts;
                           ESM=Descuentos l¡nea ventas;
                           FRC=Remises ligne vente;
                           ENC=Sales Line Discounts];
                ToolTipML=[ENU=Specifies how many special discounts you grant for the sales line. Choose the value to see the sales line discounts.;
                           ESM=Especifica cu ntos descuentos especiales concede para la l¡nea de venta. Elija el valor para ver los descuentos de l¡nea de venta.;
                           FRC=Sp‚cifie le nombre de remises sp‚ciales que vous accordez … la ligne vente. Choisissez la valeur pour voir les remises ligne vente.;
                           ENC=Specifies how many special discounts you grant for the sales line. Choose the value to see the sales line discounts.];
                ApplicationArea=#Basic,#Suite;
                SourceExpr=SalesInfoPaneMgt.CalcNoOfSalesLineDisc(Rec);
                OnDrillDown=BEGIN
                              ShowLineDisc;
                              CurrPage.UPDATE;
                            END;
                             }

    { 1000000017;2;Field  ;
                Name=EnterpriseInventory;
                CaptionML=ENU=Enterprise Inventory;
                DecimalPlaces=0:0;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcEnterPriseInventory(Rec) }

    { 1000000016;2;Field  ;
                Name=MonthsofStock;
                CaptionML=ENU=Months of Stock;
                DecimalPlaces=1:1;
                SourceExpr=Codeunit7171EventSubscriber.CU7171_CalcMonthOfStock(Rec) }

    { 1000000018;2;Field  ;
                Name=ABC Code;
                SourceExpr=Page9087EventSubscriber.Pg9087_ShowABCCode(Rec) }

  }
  CODE
  {
    VAR
      ESACC_ESFLADSMgt@14123801 : Codeunit 14123801;
      ESACC_F5404_Visible@900054040 : Boolean INDATASET;
      ESACC_F5404_Editable@900054041 : Boolean INDATASET;
      ESACC_F5404_HideValue@900054042 : Boolean INDATASET;
      ESACC_F5407_Visible@900054070 : Boolean INDATASET;
      ESACC_F5407_Editable@900054071 : Boolean INDATASET;
      ESACC_F5407_HideValue@900054072 : Boolean INDATASET;
      SalesHeader@1000 : Record 36;
      SalesPriceCalcMgt@1002 : Codeunit 7000;
      SalesInfoPaneMgt@1001 : Codeunit 7171;
      ItemAvailFormsMgt@1003 : Codeunit 353;
      FieldsEnabled@1000000000 : Boolean;
      UserSetupMgt@1000000001 : Codeunit 5700;
      ABCCode@1000000002 : Code[10];
      item@1000000003 : Record 27;
      Codeunit7171EventSubscriber@1000000005 : Codeunit 51952;
      Page9087EventSubscriber@1000000004 : Codeunit 51896;
      Page9087EventPublisher@1000000006 : Codeunit 51986;

    LOCAL PROCEDURE ESACC_EasySecurity@14123801(OpenObject@14123801 : Boolean);
    VAR
      SetFilters@14123802 : Codeunit 14123812;
      TempBoolean@14123803 : Boolean;
    BEGIN
      IF OpenObject THEN BEGIN
        SetFilters.Filter37(Rec,8,9087);

        TempBoolean := CurrPage.EDITABLE;
        IF ESACC_ESFLADSMgt.PageGeneral(37,9087,TempBoolean) THEN
          CurrPage.EDITABLE := TempBoolean;
      END;

      ESACC_ESFLADSMgt.PageControl(
        37,9087,0,5404,
        ESACC_F5404_Visible,ESACC_F5404_Editable,ESACC_F5404_HideValue);

      ESACC_ESFLADSMgt.PageControl(
        37,9087,0,5407,
        ESACC_F5407_Visible,ESACC_F5407_Editable,ESACC_F5407_HideValue);

      ESACC_EasySecurityManual(OpenObject);
    END;

    LOCAL PROCEDURE ESACC_EasySecurityManual@14123811(OpenObject@14123811 : Boolean);
    BEGIN
    END;

    LOCAL PROCEDURE ShowPrices@15();
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLinePrice(SalesHeader,Rec);
    END;

    LOCAL PROCEDURE ShowLineDisc@16();
    BEGIN
      SalesHeader.GET("Document Type","Document No.");
      CLEAR(SalesPriceCalcMgt);
      SalesPriceCalcMgt.GetSalesLineLineDisc(SalesHeader,Rec);
    END;

    LOCAL PROCEDURE ShowNo@29() : Code[20];
    BEGIN
      IF Type <> Type::Item THEN
        EXIT('');
      EXIT("No.");
    END;

    BEGIN
    {
      2015-10-26 TPZ159 VCHERNYA
        Fields have been made disabled for Mfr. Reps.
      2018-01-10 TPZ2141 DKUMAR
        Code merging issue fixed for (Fields have been made disabled for Mfr. Reps.)
      2018-08-25 TPZ2389 UCHOUHAN
        Change caption from "Qty. Available to Pick" to "Qty. Avail to Pick"
      2019-06-21 TPZ2590 UCHOUHAN
        Added Enterprise Inventory and "monthly of Stock" fields.
      2019-11-26 TPZ2718 UCHOUHAN
        Change Blankzero Property to YES for 'Month of Stock' Field.
      2020-2-20 TPZ2784 VAHAMAD
       Added Code in function ShowNo and Field ABC Code added
    }
    END.
  }
}

