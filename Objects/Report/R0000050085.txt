OBJECT Report 50085 Update Sales Discount
{
  OBJECT-PROPERTIES
  {
    Date=07/01/20;
    Time=12:00:00 AM;
    Modified=Yes;
    Version List=TPZ000.00.00;
  }
  PROPERTIES
  {
    ProcessingOnly=Yes;
  }
  DATASET
  {
    { 1000000000;;DataItem;                  ;
               DataItemTable=Table18;
               DataItemTableView=SORTING(No.)
                                 ORDER(Ascending)
                                 WHERE(Electric Division=CONST(Yes));
               OnPreDataItem=BEGIN
                               IF SLDCode = '' THEN
                                 ERROR('Sales Line Multiplier Code Should not be blank..!');
                               IF Discount = 0 THEN
                                 ERROR('Sales Line Multiplier Discount % Should not be blank..!');
                             END;

               OnAfterGetRecord=BEGIN
                                  SalesLineDiscount.INIT;
                                  SalesLineDiscount."Sales Type":=SalesLineDiscount."Sales Type"::Customer;
                                  SalesLineDiscount.VALIDATE("Sales Code","No.");
                                  SalesLineDiscount.Type:=SalesLineDiscount.Type::"Item Disc. Group";
                                  SalesLineDiscount.VALIDATE(Code,SLDCode);
                                  SalesLineDiscount."Starting Date":=WORKDATE;
                                  SalesLineDiscount.VALIDATE("Line Discount %",Discount);
                                  SalesLineDiscount.INSERT(TRUE);
                                END;

               OnPostDataItem=BEGIN
                                MESSAGE('Batch Process Completed..!');
                              END;

               ReqFilterFields=No. }

  }
  REQUESTPAGE
  {
    PROPERTIES
    {
    }
    CONTROLS
    {
      { 1000000000;0;Container;
                  ContainerType=ContentArea }

      { 1000000001;1;Group  ;
                  CaptionML=[ENU=Options;
                             ESM=Opciones;
                             FRC=Options;
                             ENC=Options] }

      { 1000000002;2;Field  ;
                  Name=Discount;
                  SourceExpr=Discount }

      { 1000000003;2;Field  ;
                  Name=Code;
                  SourceExpr=SLDCode;
                  OnLookup=VAR
                             ItemDiscountGroup@1000000000 : Record 341;
                             ItemDiscGroups@1000000001 : Page 513;
                           BEGIN
                             ItemDiscountGroup.RESET;
                             CLEAR(ItemDiscGroups);
                             ItemDiscGroups.SETRECORD(ItemDiscountGroup);
                             ItemDiscGroups.SETTABLEVIEW(ItemDiscountGroup);
                             ItemDiscGroups.LOOKUPMODE(TRUE);
                             IF ItemDiscGroups.RUNMODAL = ACTION::LookupOK THEN BEGIN
                               ItemDiscGroups.GETRECORD(ItemDiscountGroup);
                               SLDCode := ItemDiscountGroup.Code;
                             END;
                           END;
                            }

    }
  }
  LABELS
  {
  }
  CODE
  {
    VAR
      SalesLineDiscount@1000000000 : Record 7004;
      Discount@1000000001 : Decimal;
      SLDCode@1000000002 : Code[20];

    BEGIN
    END.
  }
  RDLDATA
  {
  }
}

