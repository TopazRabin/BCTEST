OBJECT Report 23044525 IWX Bulk LP Bin Move
{
  OBJECT-PROPERTIES
  {
    Date=10/03/19;
    Time=[ 9:01:58 AM];
    Version List=IWX2.4.7684.0;
  }
  PROPERTIES
  {
    CaptionML=[ENU=WHI Bulk LP Bin Move;
               ESM=WHI Abultar LP Bin Move;
               FRC=WHI Bulk LP Bin Move;
               ENC=WHI Bulk LP Bin Move];
    ProcessingOnly=Yes;
    OnInitReport=BEGIN
                   iNextLineNumber := 0;
                   CLEAR(codTemplateName);
                   CLEAR(codBatchName);
                   recLPSetup.GET; //<IW author="R.Trudeau" date="01/08/19" issue="TFS4388" />
                 END;

  }
  DATASET
  {
    { 1000000000;;DataItem;                  ;
               DataItemTable=Table23044505;
               DataItemTableView=SORTING(No.)
                                 ORDER(Ascending)
                                 WHERE(Parent License Plate No.=FILTER(=''));
               OnPreDataItem=BEGIN
                               "IWX License Plate Header".SETRANGE("Location Code", codLocationCode);
                               "IWX License Plate Header".SETRANGE("Bin Code", codFromBinCode);
                             END;

               OnAfterGetRecord=BEGIN

                                  //<IW author="t.dimsdale" date="03/25/14" issue="TFS1083" >
                                  // moved code from this report to license plate management codeunit

                                  IF codTemplateName = '' THEN BEGIN
                                    IF( recLocation.GET("Location Code") ) THEN BEGIN
                                      IF( recLocation."Directed Put-away and Pick" ) THEN BEGIN
                                        codTemplateName := cuCommonBase.getWhseTemplate(PAGE::"Whse. Reclassification Journal");
                                        codBatchName := recLPSetup."LP Bin Whse. Move Batch Name";
                                      END ELSE BEGIN
                                        codTemplateName := cuCommonBase.getTemplate(PAGE::"Item Reclass. Journal");
                                        codBatchName := recLPSetup."LP Bin Move Batch Name";
                                      END;
                                    END;
                                  END;

                                  cuLPCommon.changeBinOnLicensePlate(
                                    codTemplateName,
                                    codBatchName,
                                    "IWX License Plate Header", // passed by reference !
                                    "IWX License Plate Header"."Location Code", // this report assumes bin change must be in the same location.
                                    codSendToBinCode);
                                END;

               OnPostDataItem=VAR
                                lrecItemJournalLine@1000000000 : Record 83;
                              BEGIN
                              END;

               ReqFilterFields=No. }

  }
  REQUESTPAGE
  {
    PROPERTIES
    {
    }
    CONTROLS
    {
      { 1000000000;;Container;
                  Name=options;
                  ContainerType=ContentArea }

      { 1000000001;1;Group  ;
                  CaptionML=ENU=Options;
                  GroupType=Group }

      { 1000000004;2;Field  ;
                  Name=LocationCode;
                  CaptionML=[ENU=Location Code;
                             FRC=code d'emplacement;
                             ENC=Location Code];
                  NotBlank=Yes;
                  SourceExpr=codLocationCode;
                  TableRelation=Location }

      { 1000000003;2;Field  ;
                  Name=FromBinCode;
                  CaptionML=[ENU=From-to Bin;
                             FRC=De-… Bin;
                             ENC=From-to Bin];
                  NotBlank=Yes;
                  SourceExpr=codFromBinCode;
                  TableRelation=Bin.Code }

      { 1000000002;2;Field  ;
                  Name=SendToBinCode;
                  CaptionML=[ENU=Send-to Bin;
                             FRC=Envoyer … Bin;
                             ENC=Send-to Bin];
                  NotBlank=Yes;
                  DateFormula=No;
                  SourceExpr=codSendToBinCode;
                  TableRelation=Bin.Code }

    }
  }
  LABELS
  {
  }
  CODE
  {
    VAR
      recItemJournalLine@1000000000 : Record 83;
      recLPSetup@1000000008 : Record 23044523;
      recLocation@1000000009 : Record 14;
      cuCommonBase@1000000010 : Codeunit 23044519;
      codSendToBinCode@1000000001 : Code[20];
      iNextLineNumber@1000000002 : Integer;
      codTemplateName@1000000004 : Code[10];
      codBatchName@1000000003 : Code[10];
      codFromBinCode@1000000005 : Code[20];
      codLocationCode@1000000006 : Code[10];
      cuLPCommon@1000000007 : Codeunit 23044541;

    PROCEDURE setTemplateBatchName@1000000001(pcodTemplateName@1000000001 : Code[10];pcodBatchName@1000000000 : Code[10]);
    BEGIN
      codTemplateName := pcodTemplateName;
      codBatchName := pcodBatchName;
    END;

    BEGIN
    {
      ************************
      Copyright Notice
      This objects content is copyright of Insight Works 2011.  All rights reserved.
      Any redistribution or reproduction of part or all of the contents in any form is prohibited.
      ************************
    }
    END.
  }
  RDLDATA
  {
  }
}

