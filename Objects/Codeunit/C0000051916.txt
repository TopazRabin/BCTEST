OBJECT Codeunit 51916 Codeunit7301EventSubscribers
{
  OBJECT-PROPERTIES
  {
    Date=10/19/20;
    Time=[ 3:50:58 PM];
    Modified=Yes;
    Version List=NAVEVENT,001;
  }
  PROPERTIES
  {
    OnRun=BEGIN
          END;

  }
  CODE
  {

    [EventSubscriber(Codeunit,51915,CU7301_CheckBinContent)]
    LOCAL PROCEDURE CU7301_CheckBinContent@1000000001(VAR Sender@1000000002 : Codeunit 51915;WhseJnlLine1@1000000003 : Record 7311;Sign@1000000004 : Integer);
    VAR
      FromBinContent@1000000000 : Record 7302;
      Text000@1000000001 : TextConst '@@@="%1 = the value of the Quantity that is in the bin; %2 = the value of the Quantity that is not available.";ENU=is not sufficient to complete this action. The quantity in the bin is %1. %2 units are not available;ESM=no es suficiente para completar esta acci�n. La cantidad en la ubicaci�n es %1. %2 unidades no est�n disponibles;FRC=n''est pas suffisant pour r�aliser cette action. La quantit� dans la zone est %1. %2 unit�s ne sont pas disponibles;ENC=is not sufficient to complete this action. The quantity in the bin is %1. %2 units are not available';
      Text001@100000000 : TextConst '@@@="%1 = the value of the Quantity that is in the bin; %2 = the value of the Quantity that is not available.";ENU=The quantity in the bin is %1. %2 units are not available;ESM=no es suficiente para completar esta acci�n. La cantidad en la ubicaci�n es %1. %2 unidades no est�n disponibles;FRC=n''est pas suffisant pour r�aliser cette action. La quantit� dans la zone est %1. %2 unit�s ne sont pas disponibles;ENC=is not sufficient to complete this action. The quantity in the bin is %1. %2 units are not available';
    BEGIN
      //<TPZ2608>
      //>>001 TPZ3033
      IF Sign <> -1 THEN
        EXIT;
      //<<001 TPZ3033
      WITH WhseJnlLine1 DO BEGIN
        IF ("Journal Template Name" = 'RECLASSIFI') AND FromBinContent.GET("Location Code","From Bin Code","Item No.","Variant Code","Unit of Measure Code")
          THEN
            IF (FromBinContent.CalcQtyAvailToTakeUOM < "Qty. (Base)") THEN
              ERROR(STRSUBSTNO(Text001,FromBinContent.CalcQtyAvailToTakeUOM,(-FromBinContent.CalcQtyAvailToTakeUOM + "Qty. (Base)")));

      END;
      //</TPZ2608>
    END;

    [EventSubscriber(Codeunit,51915,CU7301_UpdateCreationDateTime)]
    LOCAL PROCEDURE CU7301_UpdateCreationDateTime@1000000000(VAR WhseEntry@1000000000 : Record 7312);
    BEGIN
      WhseEntry."Creation Date Time" := CURRENTDATETIME;
    END;

    [EventSubscriber(Codeunit,51915,CU7301_InsertToBinContent)]
    LOCAL PROCEDURE CU7301_InsertToBinContent@1000000002(VAR BinContent@1000000000 : Record 7302;Sorting@1000000001 : Integer);
    BEGIN
      BinContent."Bin Sorting" := Sorting;
    END;

    [EventSubscriber(Codeunit,51915,CU7301_InsertWhseReg)]
    PROCEDURE CU7301_InsertWhseReg@1000000003(VAR Sender@1000000000 : Codeunit 51915;VAR WhseReg@1000000001 : Record 7313);
    BEGIN
      //<TPZ1604>
      WhseReg."Creation Date Time" := CURRENTDATETIME;
      WhseReg."Creation Time" := TIME;
      //</TPZ1604>
    END;

    BEGIN
    {
      2020-05-28  TPZ2830  PSHUKLA
      001 TPZ3033 RPS 01132021 | Ad Hoc Movements Issue | Event
    }
    END.
  }
}

