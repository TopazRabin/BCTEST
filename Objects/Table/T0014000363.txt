OBJECT Table 14000363 EDI Conditional
{
  OBJECT-PROPERTIES
  {
    Date=08/27/08;
    Time=12:00:00 PM;
    Version List=SE0.50.32;
  }
  PROPERTIES
  {
    CaptionML=ENU=EDI Conditional;
  }
  FIELDS
  {
    { 5   ;   ;Trade Partner No.   ;Code20        ;TableRelation="EDI Element"."Trade Partner No.";
                                                   CaptionML=ENU=Trade Partner No. }
    { 10  ;   ;Navision Document   ;Code10        ;TableRelation="EDI Element"."Navision Document" WHERE (Trade Partner No.=FIELD(Trade Partner No.));
                                                   CaptionML=ENU=Navision Document }
    { 15  ;   ;EDI Document No.    ;Code3         ;TableRelation="EDI Element"."EDI Document No." WHERE (Trade Partner No.=FIELD(Trade Partner No.),
                                                                                                         Navision Document=FIELD(Navision Document));
                                                   CaptionML=ENU=EDI Document No. }
    { 20  ;   ;Version             ;Code10        ;TableRelation="EDI Element".Version WHERE (Trade Partner No.=FIELD(Trade Partner No.),
                                                                                              Navision Document=FIELD(Navision Document),
                                                                                              EDI Document No.=FIELD(EDI Document No.));
                                                   CaptionML=ENU=Version }
    { 25  ;   ;Type                ;Option        ;TableRelation="EDI Element".Type WHERE (Trade Partner No.=FIELD(Trade Partner No.),
                                                                                           Navision Document=FIELD(Navision Document),
                                                                                           EDI Document No.=FIELD(EDI Document No.),
                                                                                           Version=FIELD(Version));
                                                   CaptionML=ENU=Type;
                                                   OptionCaptionML=ENU=" ,Import,Export";
                                                   OptionString=[ ,Import,Export] }
    { 27  ;   ;Proc Seq            ;Integer       ;TableRelation="EDI Element"."Proc Seq" WHERE (Trade Partner No.=FIELD(Trade Partner No.),
                                                                                                 Navision Document=FIELD(Navision Document),
                                                                                                 EDI Document No.=FIELD(EDI Document No.),
                                                                                                 Version=FIELD(Version),
                                                                                                 Type=FIELD(Type));
                                                   CaptionML=ENU=Proc Seq }
    { 30  ;   ;Segment             ;Code15        ;TableRelation="EDI Element".Segment WHERE (Trade Partner No.=FIELD(Trade Partner No.),
                                                                                              Navision Document=FIELD(Navision Document),
                                                                                              EDI Document No.=FIELD(EDI Document No.),
                                                                                              Version=FIELD(Version),
                                                                                              Type=FIELD(Type),
                                                                                              Proc Seq=FIELD(Proc Seq));
                                                   CaptionML=ENU=Segment }
    { 45  ;   ;Element             ;Code2         ;OnValidate=BEGIN
                                                                GetElement;
                                                                ClearRecord;
                                                              END;

                                                   CaptionML=ENU=Element;
                                                   NotBlank=No }
    { 47  ;   ;Cond. Segment       ;Code3         ;CaptionML=ENU=Cond. Segment }
    { 48  ;   ;Cond. Element       ;Code2         ;CaptionML=ENU=Cond. Element }
    { 50  ;   ;Cond. Value         ;Code10        ;CaptionML=ENU=Cond. Value }
    { 52  ;   ;Cond. Sequence      ;Integer       ;CaptionML=ENU=Cond. Sequence }
    { 55  ;   ;Origin              ;Option        ;OnValidate=BEGIN
                                                                GetElement;
                                                                IF xRec.Origin <> Rec.Origin THEN BEGIN
                                                                  xRec.Origin := Rec.Origin;
                                                                  xRec."Cond. Segment" := Rec."Cond. Segment";
                                                                  Rec.INIT;
                                                                  Rec.Origin := xRec.Origin;
                                                                  Rec."Cond. Segment" := xRec."Cond. Segment";
                                                                END;
                                                              END;

                                                   CaptionML=ENU=Origin;
                                                   OptionCaptionML=ENU=" ,Navision,EDI Out,EDI In";
                                                   OptionString=[ ,Navision,EDI Out,EDI In] }
    { 60  ;   ;NAV Table No.       ;Integer       ;TableRelation="EDI NAV Tables"."NAV Table No.";
                                                   OnValidate=BEGIN
                                                                //CALCFIELDS("NAV Table Name");
                                                                GetElement;
                                                                IF "Nav Field No." <> 0 THEN BEGIN
                                                                  EDINavFields.GET("NAV Table No.","Field Name");
                                                                  IF EDIElement."Nav Data Type" <> EDINavFields.Type THEN
                                                                    ERROR(Text001);
                                                                END;
                                                              END;

                                                   TestTableRelation=No;
                                                   CaptionML=ENU=NAV Table No. }
    { 65  ;   ;NAV Table Name      ;Text40        ;TableRelation=IF (Origin=FILTER(Navision)) "EDI NAV Tables"."NAV Table Name";
                                                   OnValidate=BEGIN
                                                                IF "NAV Table Name" = '' THEN
                                                                  "NAV Table No." := 0;
                                                                EDINavTables.SETRANGE(EDINavTables."NAV Table Name","NAV Table Name");
                                                                IF EDINavTables.FIND('-') THEN
                                                                  VALIDATE("NAV Table No.",EDINavTables."NAV Table No.");

                                                                IF xRec."NAV Table Name" <> "NAV Table Name" THEN BEGIN
                                                                  xRec.Origin := Origin;
                                                                  xRec."Cond. Segment" := Rec."Cond. Segment";
                                                                  xRec."NAV Table No." := "NAV Table No.";
                                                                  xRec."NAV Table Name" := "NAV Table Name";
                                                                  Rec.INIT;
                                                                  Origin := xRec.Origin;
                                                                  "Cond. Segment" := xRec."Cond. Segment";
                                                                  "NAV Table No." := xRec."NAV Table No.";
                                                                  "NAV Table Name" := xRec."NAV Table Name";
                                                                END;
                                                              END;

                                                   TestTableRelation=No;
                                                   CaptionML=ENU=NAV Table Name }
    { 70  ;   ;Nav Field No.       ;Integer       ;TableRelation="EDI NAV Fields"."NAV Field No." WHERE (NAV Table No.=FIELD(NAV Table No.));
                                                   OnValidate=BEGIN
                                                                //CALCFIELDS("Field Name");
                                                              END;

                                                   TestTableRelation=No;
                                                   CaptionML=ENU=Nav Field No. }
    { 75  ;   ;Field Name          ;Text40        ;TableRelation=IF (Origin=CONST(Navision)) "EDI NAV Fields"."NAV Field Name" WHERE (NAV Table No.=FIELD(NAV Table No.))
                                                                 ELSE IF (Origin=CONST(EDI In)) "EDI Fields"."EDI Field Code" WHERE (Navision Document=FIELD(Navision Document),
                                                                                                                                     Field Type=CONST(EDI In))
                                                                                                                                     ELSE IF (Origin=CONST(EDI Out)) "EDI Fields"."EDI Field Code" WHERE (Navision Document=FIELD(Navision Document),
                                                                                                                                                                                                          Field Type=CONST(EDI Out));
                                                   OnValidate=BEGIN
                                                                IF xRec."Field Name" <> "Field Name" THEN BEGIN
                                                                  xRec.Origin := Origin;
                                                                  xRec."Cond. Segment" := Rec."Cond. Segment";
                                                                  xRec."NAV Table No." := "NAV Table No.";
                                                                  xRec."NAV Table Name" := "NAV Table Name";
                                                                  xRec."Field Name" := "Field Name";
                                                                  Rec.INIT;
                                                                  Origin := xRec.Origin;
                                                                  "Cond. Segment" := xRec."Cond. Segment";
                                                                  "NAV Table No." := xRec."NAV Table No.";
                                                                  "NAV Table Name" := xRec."NAV Table Name";
                                                                  "Field Name" := xRec."Field Name";
                                                                END;
                                                                //
                                                                CASE Origin OF
                                                                  Origin::Navision:
                                                                    BEGIN
                                                                      EDINavFields.GET("NAV Table No.","Field Name");
                                                                      "Nav Field No." := EDINavFields."NAV Field No.";
                                                                //      "Data Type" := EDINAVFields.Type;
                                                                //      CASE EDINAVFields.Type OF
                                                                //        EDINAVFields.Type::Decimal:
                                                                //          Format := Format::"Dec Implied";
                                                                //        EDINAVFields.Type::Integer:
                                                                //          Format := Format::"Dec Implied";
                                                                //        EDINAVFields.Type::Text:
                                                                //          Format := Format::Text;
                                                                //        EDINAVFields.Type::Code:
                                                                //          Format := Format::Text;
                                                                //        EDINAVFields.Type::Date:
                                                                //          BEGIN
                                                                //            Format := Format::"Date YYMMDD";
                                                                //            VALIDATE(Length,6);
                                                                //          END;
                                                                //      END;
                                                                    END;
                                                                  Origin::"EDI Out":
                                                                    BEGIN
                                                                      EDIFields.GET("Navision Document",EDIFields."Field Type"::"EDI Out","Field Name");
                                                                      "Nav Field No." := 0;
                                                                //      "Data Type" := EDIFields."Data Type";
                                                                //      CASE EDIFields."Data Type" OF
                                                                //        EDIFields."Data Type"::Decimal:
                                                                //          Format := Format::"Dec Implied";
                                                                //        EDIFields."Data Type"::Integer:
                                                                //          Format := Format::Integer;
                                                                //        EDIFields."Data Type"::Text:
                                                                //          Format := Format::Text;
                                                                //        EDIFields."Data Type"::Code:
                                                                //          Format := Format::Text;
                                                                //        EDIFields."Data Type"::Date:
                                                                //          BEGIN
                                                                //            Format := Format::"Date YYMMDD";
                                                                //            VALIDATE(Length,6);
                                                                //          END;
                                                                //      END;
                                                                    END;
                                                                ELSE BEGIN
                                                                    "Nav Field No." := 0;
                                                                //    "Data Type" := "Data Type"::"N/A";
                                                                  END;
                                                                END;
                                                              END;

                                                   TestTableRelation=No;
                                                   CaptionML=ENU=Field Name;
                                                   Editable=Yes }
    { 80  ;   ;Trigger             ;Boolean       ;CaptionML=ENU=Trigger }
  }
  KEYS
  {
    {    ;Trade Partner No.,Navision Document,EDI Document No.,Version,Type,Proc Seq,Segment,Element,Cond. Element,Cond. Value,Cond. Sequence;
                                                   Clustered=Yes }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      EDINavTables@1000000000 : Record 14000351;
      EDINavFields@1000000001 : Record 14000352;
      EDIFields@1000000002 : Record 14000356;
      EDIElement@1000000003 : Record 14000355;
      Text001@1001 : TextConst 'ENU=Field data type does not match %1 which was defined on the EDI Element';

    PROCEDURE GetElement@1();
    BEGIN
      EDIElement.SETRANGE(EDIElement."Trade Partner No.","Trade Partner No.");
      EDIElement.SETRANGE(EDIElement."Navision Document","Navision Document");
      EDIElement.SETRANGE(EDIElement."EDI Document No.","EDI Document No.");
      EDIElement.SETRANGE(EDIElement.Version,Version);
      EDIElement.SETRANGE(EDIElement.Type,Type);
      EDIElement.SETRANGE(EDIElement.Segment,Segment);
      EDIElement.FIND('-');
    END;

    PROCEDURE ClearRecord@2();
    BEGIN
      INIT;
    END;

    BEGIN
    END.
  }
}

