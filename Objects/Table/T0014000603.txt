OBJECT Table 14000603 Posted Receive
{
  OBJECT-PROPERTIES
  {
    Date=06/28/17;
    Time=12:00:00 PM;
    Version List=SE0.60.03;
  }
  PROPERTIES
  {
    OnDelete=BEGIN
               PostedReceiveLine.RESET;
               PostedReceiveLine.SETRANGE("Receive No.","No.");
               PostedReceiveLine.DELETEALL;

               // Receive Labels are not deleted by Purpose
             END;

    CaptionML=ENU=Posted Receive;
    LookupPageID=Page14000610;
  }
  FIELDS
  {
    { 1   ;   ;No.                 ;Code20        ;CaptionML=ENU=No.;
                                                   Editable=No }
    { 11  ;   ;Description         ;Text50        ;CaptionML=ENU=Description;
                                                   Editable=No }
    { 12  ;   ;Closed              ;Boolean       ;CaptionML=ENU=Closed;
                                                   Editable=No }
    { 13  ;   ;Closed by Receive Station Code;Code10;
                                                   TableRelation="Receive Station";
                                                   CaptionML=ENU=Closed by Receive Station Code;
                                                   Editable=No }
    { 14  ;   ;Receive Date        ;Date          ;CaptionML=ENU=Receive Date;
                                                   Editable=No }
    { 15  ;   ;Exist in Other Receive;Boolean     ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Posted Receive Line" WHERE (Type=CONST(Receive),
                                                                                                  No.=FIELD(No.)));
                                                   CaptionML=ENU=Exist in Other Receive;
                                                   Editable=No }
    { 16  ;   ;Comment             ;Boolean       ;FieldClass=FlowField;
                                                   CalcFormula=Exist("Receive Comment Line" WHERE (Table ID=CONST(14000601),
                                                                                                   Code=FIELD(No.)));
                                                   CaptionML=ENU=Comment;
                                                   Editable=No }
    { 21  ;   ;Scale Weight        ;Decimal       ;CaptionML=ENU=Scale Weight;
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 22  ;   ;Override Weight     ;Decimal       ;CaptionML=ENU=Override Weight;
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 23  ;   ;Calculation Weight  ;Decimal       ;CaptionML=ENU=Calculation Weight;
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 24  ;   ;Override Volume     ;Decimal       ;CaptionML=ENU=Override Volume;
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 25  ;   ;Calculation Volume  ;Decimal       ;CaptionML=ENU=Calculation Volume;
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 26  ;   ;Net Weight          ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Posted Receive Line"."Net Weight" WHERE (Receive No.=FIELD(No.)));
                                                   CaptionML=ENU=Net Weight;
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 27  ;   ;Gross Weight        ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Posted Receive Line"."Gross Weight" WHERE (Receive No.=FIELD(No.)));
                                                   CaptionML=ENU=Gross Weight;
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 28  ;   ;Dim. Weight         ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Posted Receive Line"."Dimmed Weight" WHERE (Receive No.=FIELD(No.)));
                                                   CaptionML=ENU=Dim. Weight;
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 29  ;   ;Volume              ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Posted Receive Line".Volume WHERE (Receive No.=FIELD(No.)));
                                                   CaptionML=ENU=Volume;
                                                   DecimalPlaces=0:5;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 31  ;   ;Shipping Agent Code ;Code10        ;TableRelation="Shipping Agent".Code;
                                                   CaptionML=ENU=Shipping Agent Code;
                                                   Editable=No }
    { 32  ;   ;World Wide Service  ;Boolean       ;CaptionML=ENU=World Wide Service;
                                                   Editable=No }
    { 33  ;   ;Shipping Agent Service;Code30      ;TableRelation="E-Ship Agent Service".Code WHERE (Shipping Agent Code=FIELD(Shipping Agent Code),
                                                                                                    World Wide Service=FIELD(World Wide Service));
                                                   CaptionML=ENU=Shipping Agent Service;
                                                   Editable=No }
    { 34  ;   ;External Tracking No.;Text30       ;CaptionML=ENU=External Tracking No. }
    { 35  ;   ;Creation Time       ;Time          ;CaptionML=ENU=Creation Time;
                                                   Editable=No }
    { 36  ;   ;Receive Time        ;Time          ;CaptionML=ENU=Receive Time;
                                                   Editable=No }
    { 41  ;   ;Shipping Charge     ;Decimal       ;CaptionML=ENU=Shipping Charge;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 42  ;   ;Receive No.         ;Integer       ;CaptionML=ENU=Receive No.;
                                                   Editable=No }
    { 43  ;   ;Total Receives      ;Integer       ;CaptionML=ENU=Total Receives;
                                                   Editable=No }
    { 46  ;   ;No. Series          ;Code10        ;CaptionML=ENU=No. Series;
                                                   Editable=No }
    { 47  ;   ;Posting Date        ;Date          ;CaptionML=ENU=Posting Date;
                                                   Editable=No }
    { 48  ;   ;External Document No.;Code35       ;CaptionML=ENU=External Document No.;
                                                   Editable=No }
    { 51  ;   ;COD                 ;Boolean       ;CaptionML=ENU=COD;
                                                   Editable=No }
    { 52  ;   ;COD Amount          ;Decimal       ;CaptionML=ENU=COD Amount;
                                                   BlankZero=Yes;
                                                   Editable=No }
    { 53  ;   ;COD Cashiers Check  ;Boolean       ;CaptionML=ENU=COD Cashiers Check;
                                                   Editable=No }
    { 54  ;   ;Source Type         ;Integer       ;CaptionML=ENU=Source Type;
                                                   Editable=No }
    { 55  ;   ;Source Subtype      ;Option        ;CaptionML=ENU=Source Subtype;
                                                   OptionCaptionML=ENU=0,1,2,3,4,5,6,7,8,9,10;
                                                   OptionString=0,1,2,3,4,5,6,7,8,9,10;
                                                   Editable=No }
    { 56  ;   ;Source ID           ;Code20        ;CaptionML=ENU=Source ID;
                                                   Editable=No }
    { 57  ;   ;Posted Source ID    ;Code20        ;CaptionML=ENU=Posted Source ID;
                                                   Editable=No }
    { 58  ;   ;Location Code       ;Code10        ;TableRelation=Location;
                                                   CaptionML=ENU=Location Code;
                                                   Editable=No }
    { 60  ;   ;Ship-from Type      ;Option        ;CaptionML=ENU=Ship-from Type;
                                                   OptionCaptionML=ENU=Customer,Vendor,,,,,,Location;
                                                   OptionString=Customer,Vendor,,,,,,Location }
    { 61  ;   ;Ship-from No.       ;Code20        ;TableRelation=IF (Ship-from Type=CONST(Customer)) Customer
                                                                 ELSE IF (Ship-from Type=CONST(Vendor)) Vendor
                                                                 ELSE IF (Ship-from Type=CONST(Location)) Location;
                                                   CaptionML=ENU=Ship-from No.;
                                                   Editable=No }
    { 62  ;   ;Ship-from Code      ;Code10        ;TableRelation=IF (Ship-from Type=CONST(Customer)) "Ship-to Address".Code WHERE (Customer No.=FIELD(Ship-from No.))
                                                                 ELSE IF (Ship-from Type=CONST(Vendor)) "Order Address".Code WHERE (Vendor No.=FIELD(Ship-from No.));
                                                   CaptionML=ENU=Ship-from Code;
                                                   Editable=No }
    { 63  ;   ;Ship-from Name      ;Text50        ;CaptionML=ENU=Ship-from Name;
                                                   Editable=No }
    { 64  ;   ;Ship-from Name 2    ;Text50        ;CaptionML=ENU=Ship-from Name 2;
                                                   Editable=No }
    { 65  ;   ;Ship-from Address   ;Text50        ;CaptionML=ENU=Ship-from Address;
                                                   Editable=No }
    { 66  ;   ;Ship-from Address 2 ;Text50        ;CaptionML=ENU=Ship-from Address 2;
                                                   Editable=No }
    { 67  ;   ;Ship-from City      ;Text30        ;CaptionML=ENU=Ship-from City;
                                                   Editable=No }
    { 68  ;   ;Ship-from Contact   ;Text50        ;CaptionML=ENU=Ship-from Contact;
                                                   Editable=No }
    { 69  ;   ;Ship-from ZIP Code  ;Code20        ;TableRelation="Post Code";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=ENU=Ship-from ZIP Code;
                                                   Editable=No }
    { 70  ;   ;Ship-from State     ;Text30        ;CaptionML=ENU=Ship-from State;
                                                   Editable=No }
    { 71  ;   ;Ship-from Country Code;Code10      ;TableRelation=Country/Region;
                                                   CaptionML=ENU=Ship-from Country Code;
                                                   Editable=No }
    { 72  ;   ;Ship-from Phone No. ;Text30        ;CaptionML=ENU=Ship-from Phone No.;
                                                   Editable=No }
    { 73  ;   ;Ship-from Fax No.   ;Text30        ;CaptionML=ENU=Ship-from Fax No.;
                                                   Editable=No }
    { 81  ;   ;Multi Document Receive;Boolean     ;CaptionML=ENU=Multi Document Receive;
                                                   Editable=No }
    { 82  ;   ;Multi Document Order No.;Code250   ;CaptionML=ENU=Multi Document Order No.;
                                                   Editable=No }
    { 83  ;   ;Multi Document Receive Split;Boolean;
                                                   CaptionML=ENU=Multi Document Receive Split;
                                                   Editable=No }
    { 84  ;   ;Original Receive No.;Code20        ;CaptionML=ENU=Original Receive No.;
                                                   Editable=No }
    { 85  ;   ;Original Shipping Charge;Decimal   ;CaptionML=ENU=Original Shipping Charge;
                                                   Editable=No }
    { 86  ;   ;Distribution Factor ;Decimal       ;CaptionML=ENU=Distribution Factor;
                                                   Editable=No }
    { 87  ;   ;Original Exist in Other Rec.;Boolean;
                                                   FieldClass=FlowField;
                                                   CalcFormula=Exist("Posted Receive Line" WHERE (Type=CONST(Receive),
                                                                                                  No.=FIELD(Original Receive No.)));
                                                   CaptionML=ENU=Original Exist in Other Rec.;
                                                   Editable=No }
    { 7300;   ;Length              ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Max("Posted Receive Line".Length WHERE (Receive No.=FIELD(No.),
                                                                                                       Use Unit of measure Dimensions=CONST(Yes)));
                                                   CaptionML=ENU=Length;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 7301;   ;Width               ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Max("Posted Receive Line".Width WHERE (Receive No.=FIELD(No.),
                                                                                                      Use Unit of measure Dimensions=CONST(Yes)));
                                                   CaptionML=ENU=Width;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 7302;   ;Height              ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Posted Receive Line".Height WHERE (Receive No.=FIELD(No.)));
                                                   CaptionML=ENU=Height;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 7303;   ;Cubage              ;Decimal       ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Posted Receive Line".Cubage WHERE (Receive No.=FIELD(No.)));
                                                   CaptionML=ENU=Cubage;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 7304;   ;Unit of Measure Weight;Decimal     ;FieldClass=FlowField;
                                                   CalcFormula=Sum("Posted Receive Line"."Unit of Measure Weight" WHERE (Receive No.=FIELD(No.)));
                                                   CaptionML=ENU=Unit of Measure Weight;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 7305;   ;Override Dimensions ;Boolean       ;CaptionML=ENU=Override Dimensions;
                                                   Editable=No }
    { 7306;   ;Override Length     ;Decimal       ;CaptionML=ENU=Override Length;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 7307;   ;Override Width      ;Decimal       ;CaptionML=ENU=Override Width;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 7308;   ;Override Height     ;Decimal       ;CaptionML=ENU=Override Height;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 7309;   ;Calculation Length  ;Decimal       ;CaptionML=ENU=Calculation Length;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 7310;   ;Calculation Width   ;Decimal       ;CaptionML=ENU=Calculation Width;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 7311;   ;Calculation Height  ;Decimal       ;CaptionML=ENU=Calculation Height;
                                                   DecimalPlaces=0:5;
                                                   MinValue=0;
                                                   Editable=No }
    { 14000801;;LTL Freight Type   ;Code10        ;TableRelation="LTL Freight Type";
                                                   CaptionML=ENU=LTL Freight Type;
                                                   Editable=No }
    { 14000821;;UCC No.            ;Code30        ;OnValidate=BEGIN
                                                                GetReceiveSetup;
                                                                IF ReceiveSetup."Enable Label Printing" THEN
                                                                  LabelMgt.FormatUCC128PrintPostedReceive(Rec);
                                                              END;

                                                   CaptionML=ENU=UCC No. }
    { 14000822;;UCC No. (Print)    ;Code50        ;CaptionML=ENU=UCC No. (Print) }
  }
  KEYS
  {
    {    ;No.                                     ;Clustered=Yes }
    {    ;Shipping Agent Code,Shipping Agent Service;
                                                   SumIndexFields=Calculation Weight }
    {    ;Source Type,Posted Source ID            ;SumIndexFields=Calculation Weight,Calculation Volume,Shipping Charge }
    {    ;Source Type,Source Subtype,Source ID     }
    {    ;External Tracking No.                    }
    {    ;Ship-from Type,Ship-from No.,Ship-from Code }
    {    ;Posted Source ID,Posting Date            }
    {    ;Original Receive No.                     }
    {    ;UCC No.                                  }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      Country@1240030000 : Record 9;
      ShippingAgent@1240030001 : Record 291;
      PostedReceive@1240030002 : Record 14000603;
      PostedReceiveLine@1240030003 : Record 14000604;
      Receive@1240030004 : Record 14000601;
      ReceiveSetup@1240030007 : Record 14000607;
      NavigateForm@1240030005 : Page 344;
      LabelMgt@1240030006 : Codeunit 14000841;
      ReceiveSetupRetrieved@1240030008 : Boolean;

    PROCEDURE StartTrackingReceive@1();
    BEGIN
      IF "Ship-from Country Code" <> '' THEN
        Country.GET("Ship-from Country Code");
      TESTFIELD("Shipping Agent Code");
      ShippingAgent.GET("Shipping Agent Code");
      HYPERLINK(
        STRSUBSTNO(
           ShippingAgent."Internet Address","External Tracking No.",Country.Name,
           "Receive Date",ShippingAgent."Account No."));
    END;

    PROCEDURE InsertLabelFile@29(LabelFile@1240030000 : Text[250];LabelDescription@1240030001 : Text[30];LabelType@1240030002 : Integer;PrinterPort@1240030003 : Code[100];ReceiveStationCode@1240030004 : Code[10];LabelPrinted@1240030005 : Boolean;DoNotImportLabelFile@1240030007 : Boolean);
    VAR
      Receive@1240030006 : Record 14000601;
    BEGIN
      Receive.TRANSFERFIELDS(Rec);
      Receive.InsertLabelFile(
        LabelFile,LabelDescription,LabelType,PrinterPort,
        ReceiveStationCode,LabelPrinted,DoNotImportLabelFile);
    END;

    PROCEDURE PrintStdReceiveLabel@32();
    BEGIN
      LabelMgt.PrintPostedStdReceiveLabel(Rec);
    END;

    PROCEDURE Navigate@2();
    BEGIN
      NavigateForm.SetDoc("Posting Date","Posted Source ID");
      NavigateForm.RUN;
    END;

    PROCEDURE LookupMultiDocReceive@39();
    BEGIN
      TESTFIELD("Multi Document Receive");

      IF NOT PostedReceive.GET("Original Receive No.") THEN BEGIN
        Receive.RESET;
        Receive.SETRANGE("No.","Original Receive No.");
        PAGE.RUNMODAL(PAGE::Receive,Receive);
      END ELSE BEGIN
        PostedReceive.RESET;
        PostedReceive.SETRANGE("No.","Original Receive No.");
        PAGE.RUNMODAL(PAGE::"Posted Receive",PostedReceive);
      END;
    END;

    PROCEDURE ReceiveLevel@3() : Integer;
    VAR
      MinimumLevel@1240030000 : Integer;
      TempLevel@1240030001 : Integer;
    BEGIN
      IF "Original Receive No." <> '' THEN BEGIN
        IF NOT PostedReceive.GET("Original Receive No.") THEN
          EXIT(0);
      END ELSE
        PostedReceive := Rec;

      PostedReceiveLine.RESET;
      PostedReceiveLine.SETRANGE("Receive No.",PostedReceive."No.");
      PostedReceiveLine.SETRANGE(
        Type,PostedReceiveLine.Type::"Account (G/L)",PostedReceiveLine.Type::"3");
      PostedReceiveLine.SETFILTER("No.",'<>%1','');
      IF PostedReceiveLine.FIND('-') THEN BEGIN
        EXIT(1);
      END ELSE BEGIN
        PostedReceiveLine.SETRANGE(Type,PostedReceiveLine.Type::Receive);
        IF PostedReceiveLine.FIND('-') THEN BEGIN
          REPEAT
            IF NOT PostedReceive.GET(PostedReceiveLine."No.") THEN
              EXIT(0);

            TempLevel := PostedReceive.ReceiveLevel;
            IF MinimumLevel = 0 THEN
              MinimumLevel := TempLevel
            ELSE
              IF TempLevel < MinimumLevel THEN
                MinimumLevel := TempLevel;

            IF MinimumLevel = 1 THEN
              EXIT(2);
          UNTIL PostedReceiveLine.NEXT = 0;
            EXIT(MinimumLevel + 1);
        END ELSE
          EXIT(1);
      END;
    END;

    LOCAL PROCEDURE GetReceiveSetup@22();
    BEGIN
      IF NOT ReceiveSetupRetrieved THEN BEGIN
        ReceiveSetup.GET;
        ReceiveSetupRetrieved := TRUE;
      END;
    END;

    BEGIN
    END.
  }
}

