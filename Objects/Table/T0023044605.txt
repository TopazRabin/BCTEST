OBJECT Table 23044605 DSHIP Shipment Customs Header
{
  OBJECT-PROPERTIES
  {
    Date=08/30/18;
    Time=[ 3:37:48 PM];
    Version List=DSHIP2.0.0;
  }
  PROPERTIES
  {
    DataCaptionFields=No.,Document Type,Document No.;
    OnInsert=BEGIN

               IF ( "No." = '' ) THEN BEGIN
                 recPackSetup.GET;
                 "No." := cuNoSeries.GetNextNo(recPackSetup."Customs Nos.", TODAY, TRUE);
               END;


               "Created On" := TODAY;
               "Created By" :=  USERID;
               "Last Modified On" := TODAY;
               "Last Modified By" := USERID;
             END;

    OnModify=BEGIN

               "Last Modified By" := USERID;
               "Last Modified On" := TODAY;
             END;

    OnDelete=VAR
               lrecCustomsLine@1000000000 : Record 23044606;
               lrecLPHeader@1000000001 : Record 23044505;
             BEGIN

               lrecCustomsLine.SETRANGE("Customs No.", "No.");
               lrecCustomsLine.DELETEALL;


               lrecLPHeader.SETRANGE("Customs No.", "No.");
               lrecLPHeader.MODIFYALL("Customs No.", '');
             END;

    CaptionML=[ENU=Dynamic Ship Customs Header;
               ESM=Dynamic Ship Encabezado de aduanas;
               FRC=Dynamic Ship En-tˆte des douanes;
               ENC=Dynamic Ship Customs Header];
    LookupPageID=Page23044606;
    DrillDownPageID=Page23044606;
  }
  FIELDS
  {
    { 1   ;   ;No.                 ;Code20        ;CaptionML=[ENU=No.;
                                                              ESM=N§;
                                                              FRC=Nø;
                                                              ENC=No.];
                                                   Editable=No }
    { 2   ;   ;Document Type       ;Option        ;CaptionML=[ENU=Document Type;
                                                              ESM=Tipo documento;
                                                              FRC=Type de document;
                                                              ENC=Document Type];
                                                   OptionCaptionML=[ENU=Sales Order,Sales Return Order,Purchase Order,Purchase Return Order,Outbound Transfer,Service Order,Warehouse Shipment,Misc. Shipment;
                                                                    ESM=Pedido venta,Devoluci¢n venta,Pedido compra,Devoluci¢n compra,Transferencia salida,Pedido servicio,Env¡o de Almacenes;
                                                                    FRC=Document de vente,Retour vente,Bon de commande,Retour achat,Transfert sortant,Commande service,Exp‚dition d'entrep“t;
                                                                    ENC=Sales Order,Sales Return Order,Purchase Order,Purchase Return Order,Outbound Transfer,Service Order,Warehouse Shipment,Misc. Shipment];
                                                   OptionString=Sales Order,Sales Return Order,Purchase Order,Purchase Return Order,Outbound Transfer,Service Order,Warehouse Shipment,Misc. Shipment }
    { 3   ;   ;Document No.        ;Code20        ;CaptionML=[ENU=Document No.;
                                                              ESM=N§ documento;
                                                              FRC=Nø de document;
                                                              ENC=Document No.] }
    { 4   ;   ;Content Type        ;Option        ;CaptionML=[ENU=Content Type;
                                                              ESM=Tipo de contenido;
                                                              FRC=Type de contenu;
                                                              ENC=Content Type];
                                                   OptionCaptionML=[ENU=Merchandise,Returned Goods,Documents,Gift,Sample,Other;
                                                                    ESM=Mercanc¡as,Mercanc¡as Regresadas,Documentos,Regalo,Muestra,Otro;
                                                                    FRC=Marchandises,Produits retourn‚s,Documents,Cadeaux,Echantillons,Autres;
                                                                    ENC=Merchandise,Returned Goods,Documents,Gift,Sample,Other];
                                                   OptionString=merchandise,returned_goods,documents,gift,sample,other }
    { 5   ;   ;Content Explanation ;Text250       ;CaptionML=[ENU=Content Explanation;
                                                              ESM=Explicaci¢n del contenido;
                                                              FRC=Explication du contenu;
                                                              ENC=Content Explanation] }
    { 6   ;   ;Restriction Type    ;Option        ;CaptionML=[ENU=Restriction Type;
                                                              ESM=Tipo de restricci¢n;
                                                              FRC=Type de restriction;
                                                              ENC=Restriction Type];
                                                   OptionCaptionML=[ENU=None,Other,Quarantine,Sanitary Phytosanitary Inspection;
                                                                    ESM=Ninguno,Otros,Cuarentena,Inspecci¢n Sanitaria Fitosanitaria;
                                                                    FRC=Aucun,Autre,Quarantaine,Inspection sanitaire phytosanitaire;
                                                                    ENC=None,Other,Quarantine,Sanitary Phytosanitary Inspection];
                                                   OptionString=none,other,quarantine,sanitary_phytosanitary_inspection }
    { 7   ;   ;Restriction Comments;Text250       ;CaptionML=[ENU=Restriction Comments;
                                                              ESM=Restricci¢n Comentarios;
                                                              FRC=Restriction Commentaires;
                                                              ENC=Restriction Comments] }
    { 8   ;   ;Customs Certified   ;Option        ;CaptionML=[ENU=Customs Certified;
                                                              ESM=Certificado Aduanero;
                                                              FRC=Douanes certifi‚es;
                                                              ENC=Customs Certified];
                                                   OptionCaptionML=[ENU=No,Yes;
                                                                    ESM=No,Si;
                                                                    FRC=Non,Oui;
                                                                    ENC=No,Yes];
                                                   OptionString=No,Yes }
    { 9   ;   ;Customs Signer      ;Code50        ;TableRelation=User."User Name";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Customs Signer;
                                                              ESM=Aduanero;
                                                              FRC=Signataire des douanes;
                                                              ENC=Customs Signer] }
    { 10  ;   ;Non Delivery Option ;Option        ;InitValue=return;
                                                   CaptionML=[ENU=Non Delivery Option;
                                                              ESM=Opci¢n de no entrega;
                                                              FRC=Non disponible;
                                                              ENC=Non Delivery Option];
                                                   OptionCaptionML=[ENU=Abandon,Return;
                                                                    ESM=Abandonar,Regresar;
                                                                    FRC=Abandonner,Retour;
                                                                    ENC=Abandon,Return];
                                                   OptionString=abandon,return }
    { 11  ;   ;EEL PFC             ;Text50        ;CaptionML=[ENU=EEL PFC;
                                                              ESM=EEL PFC;
                                                              FRC=EEL PFC;
                                                              ENC=EEL PFC] }
    { 12  ;   ;Created By          ;Code50        ;TableRelation=User."User Name";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Created By;
                                                              ESM=Creado por;
                                                              FRC=Cr‚‚ par;
                                                              ENC=Created By] }
    { 13  ;   ;Created On          ;Date          ;CaptionML=[ENU=Created On;
                                                              ESM=Creado en;
                                                              FRC=Cr‚‚ sur;
                                                              ENC=Created On] }
    { 14  ;   ;Last Modified By    ;Code50        ;TableRelation=User."User Name";
                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   CaptionML=[ENU=Last Modified By;
                                                              ESM=Ultima modificacion por;
                                                              FRC=DerniŠre modification par;
                                                              ENC=Last Modified By] }
    { 15  ;   ;Last Modified On    ;Date          ;CaptionML=[ENU=Last Modified On;
                                                              ESM=ðltima modificaci¢n en;
                                                              FRC=DerniŠre modification sur;
                                                              ENC=Last Modified On] }
    { 16  ;   ;Posting Date        ;Date          ;CaptionML=[ENU=Posting Date;
                                                              ESM=Fecha registro;
                                                              FRC=Date de report;
                                                              ENC=Posting Date] }
    { 17  ;   ;Commercial Invoice URL;Text150     ;CaptionML=ENU=Commercial Invoice URL;
                                                   Description=TFS3683 }
  }
  KEYS
  {
    {    ;No.                                     ;Clustered=Yes }
    {    ;Document Type,Document No.               }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      recPackSetup@1000000000 : Record 23044600;
      cuNoSeries@1000000001 : Codeunit 396;

    PROCEDURE certify@1000000000(pbShowConfirm@1000000000 : Boolean);
    VAR
      ltcConfirm@1000000001 : TextConst 'ENU=Are you sure all information is correct?;ESM=¨Est s seguro de que toda la informaci¢n es correcta?;FRC=àtes-vous s–r que toutes les informations sont correctes?;ENC=Are you sure all information is correct?';
      ltcAlreadyCertified@1000000002 : TextConst 'ENU=The package has already been certified.\Are you sure you want to take ownership of the certification?;ESM=El paquete ya ha sido certificado.\ ¨Est  seguro de que desea tomar posesi¢n de la certificaci¢n?;FRC=Le paquet a d‚j… ‚t‚ certifi‚.\ àtes-vous s–r de vouloir prendre possession de la certification?;ENC=The package has already been certified.\Are you sure you want to take ownership of the certification?';
    BEGIN
      //<FUNC>
      //  Description: Certifies the Customs record
      //  Called From: Page 23044605
      //  Side Effect: None
      //</FUNC>

      TESTFIELD("Content Explanation");
      IF ( "Restriction Type" <> "Restriction Type"::none ) THEN
        TESTFIELD("Restriction Comments");

      // if value over 2500 USD then
      // TESTFIELD("EEL PFC");

      IF ( pbShowConfirm ) THEN BEGIN
        IF ( "Customs Certified" = "Customs Certified"::Yes ) THEN BEGIN
          IF ( NOT CONFIRM(ltcAlreadyCertified) ) THEN
            ERROR('');
        END ELSE IF ( NOT CONFIRM(ltcConfirm) ) THEN
          ERROR('');
      END;

      VALIDATE("Customs Certified", "Customs Certified"::Yes);
      VALIDATE("Customs Signer", USERID);
      MODIFY(TRUE);
    END;

    PROCEDURE uncertify@1000000001(pbShowConfirm@1000000000 : Boolean);
    VAR
      ltcConfirm@1000000001 : TextConst 'ENU=Are you sure you want to UnCertify the package?;ESM=¨Est  seguro de que desea anular la certificaci¢n del paquete?;FRC=Voulez-vous vraiment d‚sactiver le package?;ENC=Are you sure you want to UnCertify the package?';
    BEGIN
      //<FUNC>
      //  Description: Uncertifies the Customs record
      //  Called From: Page 23044605, Codeunit 23044603
      //  Side Effect: None
      //</FUNC>

      IF ( "Customs Certified" = "Customs Certified"::No ) THEN
        EXIT;

      // @todo need to likely test if already shipped, etc and disallow

      IF ( pbShowConfirm ) THEN BEGIN
        IF ( NOT CONFIRM(ltcConfirm) ) THEN
          ERROR('');
      END;

      VALIDATE("Customs Certified", "Customs Certified"::No);
      VALIDATE("Customs Signer", '');
      MODIFY(TRUE);
    END;

    BEGIN
    {
      ************************
      Copyright Notice
      This objects content is copyright of Insight Works 2011.  All rights reserved.
      Any redistribution or reproduction of part or all of the contents in any form is prohibited.
      ************************
    }
    END.
  }
}

