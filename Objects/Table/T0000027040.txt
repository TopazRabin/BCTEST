OBJECT Table 27040 DIOT-Concept
{
  OBJECT-PROPERTIES
  {
    Date=10/26/19;
    Time=12:00:00 PM;
    Version List=NAVNA11.00.00.37606;
  }
  PROPERTIES
  {
    CaptionML=[ENU=DIOT Concept;
               ESM=Concepto DIOT;
               FRC=Concept DIOT;
               ENC=DIOT Concept];
  }
  FIELDS
  {
    { 1   ;   ;Concept No.         ;Integer       ;CaptionML=[ENU=Concept No.;
                                                              ESM=N§ de concepto;
                                                              FRC=Nø de concept;
                                                              ENC=Concept No.];
                                                   MinValue=1;
                                                   MaxValue=17 }
    { 2   ;   ;Column No.          ;Integer       ;CaptionML=[ENU=Column No.;
                                                              ESM=N§ de columna;
                                                              FRC=Nø de colonne;
                                                              ENC=Column No.];
                                                   MinValue=8;
                                                   MaxValue=24 }
    { 3   ;   ;Description         ;Text250       ;CaptionML=[ENU=Description;
                                                              ESM=Descripci¢n;
                                                              FRC=Description;
                                                              ENC=Description] }
    { 4   ;   ;Column Type         ;Option        ;OnValidate=VAR
                                                                DIOTConceptLink@1310000 : Record 27041;
                                                                DIOTDataManagement@1310001 : Codeunit 27021;
                                                              BEGIN
                                                                IF "Column Type" = "Column Type"::None THEN BEGIN
                                                                  DIOTConceptLink.SETRANGE("DIOT Concept No.","Concept No.");
                                                                  IF DIOTConceptLink.ISEMPTY THEN
                                                                    EXIT;
                                                                  IF DIOTDataManagement.ConfirmProcess(ConceptLinksWillBeDeletedMsg,TRUE) THEN
                                                                    DIOTConceptLink.DELETEALL
                                                                  ELSE
                                                                    "Column Type" := xRec."Column Type";
                                                                END;
                                                              END;

                                                   CaptionML=[ENU=Column Type;
                                                              ESM=Tipo de columna;
                                                              FRC=Type de colonne;
                                                              ENC=Column Type];
                                                   OptionCaptionML=[ENU=None,Tax Base,Tax Amount;
                                                                    ESM=Ninguno,Base IVA,Importe IVA;
                                                                    FRC=Aucun,Base TVA,Montant TVA;
                                                                    ENC=None,Tax Base,Tax Amount];
                                                   OptionString=None,VAT Base,Vat Amount }
    { 5   ;   ;Non-Deductible      ;Boolean       ;OnValidate=BEGIN
                                                                IF xRec."Non-Deductible" <> "Non-Deductible" THEN
                                                                  IF NOT "Non-Deductible" THEN
                                                                    "Non-Deductible Pct" := 0;
                                                              END;

                                                   CaptionML=[ENU=Non-Deductible;
                                                              ESM=No deducible;
                                                              FRC=Non d‚ductible;
                                                              ENC=Non-Deductible] }
    { 6   ;   ;Non-Deductible Pct  ;Decimal       ;OnValidate=BEGIN
                                                                IF xRec."Non-Deductible Pct" <> "Non-Deductible Pct" THEN
                                                                  "Non-Deductible" := "Non-Deductible Pct" > 0;
                                                              END;

                                                   CaptionML=[ENU=Non-Deductible percent;
                                                              ESM=Porcentaje no deducible;
                                                              FRC=Pourcentage non d‚ductible;
                                                              ENC=Non-Deductible percent];
                                                   MinValue=0 }
    { 7   ;   ;VAT Links Count     ;Integer       ;FieldClass=FlowField;
                                                   CalcFormula=Count("DIOT-Concept Link" WHERE (DIOT Concept No.=FIELD(Concept No.)));
                                                   CaptionML=[ENU=Tax Links Count;
                                                              ESM=Recuento de enlaces de IVA;
                                                              FRC=Nombre de liens TVA;
                                                              ENC=Tax Links Count] }
  }
  KEYS
  {
    {    ;Concept No.                             ;Clustered=Yes }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      ConceptLinksWillBeDeletedMsg@1310000 : TextConst 'ENU=Selecting None as column type will delete all existing links to this concept. Continue?;ESM=Si selecciona ninguno como tipo de columna, se eliminar n todos los v¡nculos existentes a este concepto. ¨Continuar?;FRC=La s‚lection de l''option Aucun comme type de colonne va entraŒner la suppression de tous les liens existants vers ce concept. Continuer?;ENC=Selecting None as column type will delete all existing links to this concept. Continue?';

    PROCEDURE GetColumnNo@1310000(ConceptNo@1310000 : Integer) : Integer;
    BEGIN
      IF GET(ConceptNo) THEN;
      EXIT("Column No.");
    END;

    PROCEDURE CheckLinksForConceptWithTypeNotNone@1310001() : Boolean;
    VAR
      DIOTConcept@1310000 : Record 27040;
      DIOTConceptLink@1310001 : Record 27041;
    BEGIN
      DIOTConcept.SETFILTER("Column Type",'<>%1',DIOTConcept."Column Type"::None);
      IF DIOTConcept.FINDSET THEN
        REPEAT
          DIOTConceptLink.SETRANGE("DIOT Concept No.",DIOTConcept."Concept No.");
          IF DIOTConceptLink.ISEMPTY THEN
            EXIT(TRUE);
        UNTIL DIOTConcept.NEXT = 0;
    END;

    BEGIN
    END.
  }
}

