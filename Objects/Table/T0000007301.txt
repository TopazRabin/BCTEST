OBJECT Table 7301 Warehouse Employee
{
  OBJECT-PROPERTIES
  {
    Date=02/22/18;
    Time=12:00:00 PM;
    Version List=NAVW111.00.00.20783,RF1.50.12;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               IF Default THEN
                 CheckDefault;
             END;

    OnModify=BEGIN
               IF Default THEN
                 CheckDefault;
             END;

    OnRename=BEGIN
               // >> RF
               IF xRec."User ID" = '' THEN
                 ERROR(TextL001);
               // << RF
             END;

    CaptionML=[ENU=Warehouse Employee;
               ESM=Empleado almac‚n;
               FRC=Salari‚ magasin;
               ENC=Warehouse Employee];
    LookupPageID=Page7348;
  }
  FIELDS
  {
    { 1   ;   ;User ID             ;Code50        ;TableRelation=User."User Name";
                                                   OnValidate=VAR
                                                                UserMgt@1000 : Codeunit 418;
                                                              BEGIN
                                                                UserMgt.ValidateUserID("User ID");
                                                              END;

                                                   OnLookup=VAR
                                                              UserMgt@1000 : Codeunit 418;
                                                            BEGIN
                                                              UserMgt.LookupUserID("User ID");
                                                            END;

                                                   ValidateTableRelation=No;
                                                   TestTableRelation=No;
                                                   DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=User ID;
                                                              ESM=Id. usuario;
                                                              FRC=Code utilisateur;
                                                              ENC=User ID] }
    { 2   ;   ;Location Code       ;Code10        ;TableRelation=Location;
                                                   CaptionML=[ENU=Location Code;
                                                              ESM=C¢d. almac‚n;
                                                              FRC=Code d'emplacement;
                                                              ENC=Location Code] }
    { 4   ;   ;Default             ;Boolean       ;CaptionML=[ENU=Default;
                                                              ESM=Gen‚rico;
                                                              FRC=Par d‚faut;
                                                              ENC=Default] }
    { 7710;   ;ADCS User           ;Code50        ;TableRelation="ADCS User".Name;
                                                   OnValidate=VAR
                                                                WarehouseEmployee@1000 : Record 7301;
                                                              BEGIN
                                                                IF ("ADCS User" <> xRec."ADCS User") AND ("ADCS User" <> '') THEN BEGIN
                                                                  WarehouseEmployee.SETRANGE("ADCS User","ADCS User");
                                                                  // >> RF
                                                                  WarehouseEmployee.SETFILTER("User ID",'<>%1',"User ID");
                                                                  // << RF
                                                                  IF NOT WarehouseEmployee.ISEMPTY THEN
                                                                    ERROR(Text001);
                                                                END;
                                                              END;

                                                   DataClassification=EndUserIdentifiableInformation;
                                                   CaptionML=[ENU=ADCS User;
                                                              ESM=Usuario ADCS;
                                                              FRC=Utilisateurs ADCS;
                                                              ENC=ADCS User] }
    { 72801;  ;ADCS Main Menu      ;Code20        ;TableRelation="Miniform Header".Code WHERE (Handling Codeunit=CONST(14002813));
                                                   DataClassification=ToBeClassified;
                                                   CaptionML=ENU=ADCS Main Menu }
    { 72802;  ;Next Tote No.       ;Code20        ;DataClassification=ToBeClassified;
                                                   CaptionML=ENU=Next Tote No. }
    { 72803;  ;Receipt Bin Code    ;Code20        ;TableRelation=Bin.Code WHERE (Location Code=FIELD(Location Code));
                                                   OnValidate=VAR
                                                                Bin@14002801 : Record 7354;
                                                                BinType@14002800 : Record 7303;
                                                              BEGIN
                                                                // >> RF
                                                                IF "Receipt Bin Code" <> '' THEN BEGIN
                                                                  Bin.GET("Location Code","Receipt Bin Code");
                                                                  Bin.TESTFIELD("Bin Type Code");
                                                                  BinType.GET(Bin."Bin Type Code");
                                                                  BinType.TESTFIELD(Receive);
                                                                END;
                                                                // << RF
                                                              END;

                                                   OnLookup=VAR
                                                              Bin@14002800 : Record 7354;
                                                              BinType@14002801 : Record 7303;
                                                              BinTypeFilter@14002802 : Text[250];
                                                            BEGIN
                                                              // >> RF
                                                              BinType.RESET;
                                                              BinType.SETRANGE(Receive,TRUE);
                                                              IF BinType.FIND('-') THEN
                                                                REPEAT
                                                                  IF STRLEN(BinTypeFilter) + STRLEN(BinType.Code) + 1 <= MAXSTRLEN(BinTypeFilter) THEN
                                                                    IF BinTypeFilter = '' THEN
                                                                      BinTypeFilter := BinType.Code
                                                                    ELSE
                                                                      BinTypeFilter := BinTypeFilter + '|' + BinType.Code;
                                                                UNTIL BinType.NEXT = 0;

                                                              Bin.RESET;
                                                              Bin.SETRANGE("Location Code","Location Code");
                                                              Bin.SETFILTER("Bin Type Code",BinTypeFilter);
                                                              IF PAGE.RUNMODAL(0,Bin) = ACTION::LookupOK THEN
                                                                VALIDATE("Receipt Bin Code",Bin.Code);
                                                              // << RF
                                                            END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=ENU=Receipt Bin Code }
    { 72804;  ;Shipment Bin Code   ;Code20        ;TableRelation=Bin.Code WHERE (Location Code=FIELD(Location Code));
                                                   OnValidate=VAR
                                                                Bin@14002801 : Record 7354;
                                                                BinType@14002800 : Record 7303;
                                                              BEGIN
                                                                // >> RF
                                                                IF "Shipment Bin Code" <> '' THEN BEGIN
                                                                  Bin.GET("Location Code","Shipment Bin Code");
                                                                  Bin.TESTFIELD("Bin Type Code");
                                                                  BinType.GET(Bin."Bin Type Code");
                                                                  BinType.TESTFIELD(Ship);
                                                                END;
                                                                // << RF
                                                              END;

                                                   OnLookup=VAR
                                                              Bin@14002802 : Record 7354;
                                                              BinType@14002801 : Record 7303;
                                                              BinTypeFilter@14002800 : Text[250];
                                                            BEGIN
                                                              // >> RF
                                                              BinType.RESET;
                                                              BinType.SETRANGE(Ship,TRUE);
                                                              IF BinType.FIND('-') THEN
                                                                REPEAT
                                                                  IF STRLEN(BinTypeFilter) + STRLEN(BinType.Code) + 1 <= MAXSTRLEN(BinTypeFilter) THEN
                                                                    IF BinTypeFilter = '' THEN
                                                                      BinTypeFilter := BinType.Code
                                                                    ELSE
                                                                      BinTypeFilter := BinTypeFilter + '|' + BinType.Code;
                                                                UNTIL BinType.NEXT = 0;

                                                              Bin.RESET;
                                                              Bin.SETRANGE("Location Code","Location Code");
                                                              Bin.SETFILTER("Bin Type Code",BinTypeFilter);
                                                              IF PAGE.RUNMODAL(0,Bin) = ACTION::LookupOK THEN
                                                                VALIDATE("Shipment Bin Code",Bin.Code);
                                                              // << RF
                                                            END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=ENU=Shipment Bin Code }
    { 72805;  ;Zone Code Filter    ;Code200       ;OnLookup=VAR
                                                              Zone@14002801 : Record 7300;
                                                            BEGIN
                                                              // >> RF
                                                              Zone.SETRANGE("Location Code","Location Code");
                                                              IF PAGE.RUNMODAL(0,Zone) = ACTION::LookupOK THEN
                                                                IF "Zone Code Filter" = '' THEN
                                                                  "Zone Code Filter" := Zone.Code
                                                                ELSE
                                                                  IF STRLEN("Zone Code Filter") + STRLEN(Zone.Code) + 1 > MAXSTRLEN("Zone Code Filter") THEN
                                                                    "Zone Code Filter" := "Zone Code Filter" + '|' + Zone.Code;
                                                              // << RF
                                                            END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=ENU=Zone Code Filter }
    { 72806;  ;RF Employee Setup Code;Code50      ;TableRelation="RF Employee Setup".Code;
                                                   DataClassification=ToBeClassified;
                                                   CaptionML=ENU=RF Employee Setup Code }
    { 72807;  ;Special Equipment Filter;Code200   ;OnLookup=VAR
                                                              SpecialEquipment@14002801 : Record 7305;
                                                            BEGIN
                                                              // >> RF
                                                              IF PAGE.RUNMODAL(0,SpecialEquipment) = ACTION::LookupOK THEN
                                                                IF "Special Equipment Filter" = '' THEN
                                                                  "Special Equipment Filter" := SpecialEquipment.Code
                                                                ELSE
                                                                  IF STRLEN("Special Equipment Filter") + STRLEN(SpecialEquipment.Code) + 1 >
                                                                     MAXSTRLEN("Special Equipment Filter")
                                                                  THEN
                                                                    "Special Equipment Filter" :=
                                                                      "Special Equipment Filter" + '|' + SpecialEquipment.Code;
                                                              // << RF
                                                            END;

                                                   DataClassification=ToBeClassified;
                                                   CaptionML=ENU=Special Equipment Filter }
    { 72808;  ;Pick-from Zone Filter;Code250      ;DataClassification=ToBeClassified;
                                                   CaptionML=ENU=Pick-from Zone Filter }
    { 72809;  ;Pick-from Bin Filter;Code250       ;DataClassification=ToBeClassified;
                                                   CaptionML=ENU=Pick-from Bin Filter }
    { 14000001;;RF Label Printing  ;Boolean       ;InitValue=Yes;
                                                   DataClassification=ToBeClassified;
                                                   CaptionML=ENU=RF Label Printing }
    { 14000002;;RF Label Folder    ;Text30        ;DataClassification=ToBeClassified;
                                                   CaptionML=ENU=RF Label Folder }
    { 14000003;;Warehouse Employee Group;Code20   ;TableRelation="Warehouse Employee Group".Code;
                                                   DataClassification=ToBeClassified;
                                                   CaptionML=ENU=Warehouse Employee Group }
    { 14002804;;User Bin Count Line Nos.;Code10   ;TableRelation="No. Series";
                                                   OnValidate=VAR
                                                                NoSeriesLine@1240020000 : Record 309;
                                                              BEGIN
                                                                // >> RF
                                                                NoSeriesLine.RESET;
                                                                NoSeriesLine.SETRANGE("Series Code","User Bin Count Line Nos.");
                                                                IF NoSeriesLine.FIND('-') THEN
                                                                  IF STRLEN(NoSeriesLine."Starting No.") > 10 THEN
                                                                    ERROR(TextL002);
                                                                // << RF
                                                              END;

                                                   CaptionML=ENU=User Bin Count Line Nos. }
  }
  KEYS
  {
    {    ;User ID,Location Code                   ;Clustered=Yes }
    {    ;Default                                  }
    {    ;Location Code                            }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      Text000@1000 : TextConst 'ENU=You can only have one default location per user ID.;ESM=S¢lo puede tener un almac‚n gen‚rico por ID usuario.;FRC=Vous ne pouvez avoir qu''un seul un emplacement par d‚faut par code utilisateur.;ENC=You can only have one default location per user ID.';
      Text001@1001 : TextConst 'ENU=You can only assign an ADCS user name once.;ESM=S¢lo puede asignar un nombre de usuario ADCS una vez.;FRC=Vous ne pouvez affecter un nom d''utilisateur ADCS qu''une seule fois.;ENC=You can only assign an ADCS user name once.';
      TextL001@14002802 : TextConst 'ENU=Changing the User ID from Empty to a non-Empty value is not allowed.';
      TextL002@1240020000 : TextConst 'ENU=The number range used by the User Bin Count Line No. Series must be not be greater than 10 characters in length.';

    LOCAL PROCEDURE CheckDefault@1();
    VAR
      WhseEmployee@1000 : Record 7301;
    BEGIN
      WhseEmployee.SETRANGE(Default,TRUE);
      WhseEmployee.SETRANGE("User ID","User ID");
      WhseEmployee.SETFILTER("Location Code",'<>%1',"Location Code");
      IF NOT WhseEmployee.ISEMPTY THEN
        ERROR(Text000);
    END;

    PROCEDURE GetDefaultLocation@14002801(UserID@1240020000 : Code[50]) : Code[10];
    VAR
      WarehouseEmployee@1240020001 : Record 7301;
    BEGIN
      // >> RF
      WarehouseEmployee.SETRANGE("User ID",UserID);
      WarehouseEmployee.SETRANGE(Default,TRUE);
      IF WarehouseEmployee.FIND('-') THEN
        EXIT(WarehouseEmployee."Location Code");
      // << RF
    END;

    BEGIN
    END.
  }
}

