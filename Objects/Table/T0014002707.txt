OBJECT Table 14002707 Forecast Adjust
{
  OBJECT-PROPERTIES
  {
    Date=11/01/20;
    Time=12:00:00 PM;
    Version List=UBP3.03;
  }
  PROPERTIES
  {
    OnInsert=BEGIN
               "User ID" := USERID;
               "Date Adjusted" := TODAY;
               "Time Adjusted" := TIME;

               IF NOT ISTEMPORARY THEN
                 UpdateForecastView;
             END;

    OnModify=BEGIN
               "User ID" := USERID;
               "Date Adjusted" := TODAY;
               "Time Adjusted" := TIME;
             END;

    OnDelete=BEGIN
               IF NOT ISTEMPORARY THEN
                 UpdateForecastView;
             END;

    CaptionML=ENU=Forecast Adjust;
  }
  FIELDS
  {
    { 1   ;   ;Entry No.           ;Integer       ;CaptionML=ENU=Entry No. }
    { 11  ;   ;Location Code       ;Code10        ;TableRelation=Location.Code;
                                                   CaptionML=ENU=Location Code }
    { 12  ;   ;Item No.            ;Code50        ;TableRelation=Item.No.;
                                                   CaptionML=ENU=Item No. }
    { 13  ;   ;Variant Code        ;Code10        ;TableRelation="Item Variant".Code WHERE (Item No.=FIELD(Item No.));
                                                   CaptionML=ENU=Variant Code }
    { 14  ;   ;Starting Date       ;Date          ;CaptionML=ENU=Starting Date }
    { 15  ;   ;Quantity            ;Decimal       ;CaptionML=ENU=Quantity;
                                                   DecimalPlaces=0:5 }
    { 16  ;   ;User ID             ;Code60        ;CaptionML=ENU=User ID }
    { 17  ;   ;Date Adjusted       ;Date          ;CaptionML=ENU=Date Adjusted }
    { 18  ;   ;Time Adjusted       ;Time          ;CaptionML=ENU=Time Adjusted }
    { 19  ;   ;Forecast Summary Code;Code10       ;TableRelation="Forecast Summary View"."Forecast Summary Code";
                                                   CaptionML=ENU=Forecast Summary Code;
                                                   Editable=No }
    { 20  ;   ;Promotion Code      ;Code10        ;TableRelation="AFP Promotion Header".Code;
                                                   CaptionML=ENU=Promotion Code;
                                                   Editable=No }
    { 21  ;   ;Version No.         ;Integer       ;CaptionML=ENU=Version No.;
                                                   Editable=No }
    { 22  ;   ;Adjustment Note     ;Text250       ;CaptionML=ENU=Adjustment Note }
    { 23  ;   ;Unusual Demand Adjust;Boolean      ;CaptionML=ENU=Unusual Demand Adjust }
    { 24  ;   ;Unusual Demand Cust. No.;Code20    ;TableRelation=Customer.No.;
                                                   CaptionML=ENU=Unusual Demand Cust. No. }
    { 25  ;   ;Frozen Forecast     ;Boolean       ;CaptionML=ENU=Frozen Forecast }
    { 26  ;   ;Formula Code        ;Code20        ;TableRelation=Formula.Code;
                                                   CaptionML=ENU=Formula Code;
                                                   Editable=No }
  }
  KEYS
  {
    {    ;Entry No.                               ;Clustered=Yes }
    {    ;Item No.,Variant Code,Location Code,Starting Date,Promotion Code,Forecast Summary Code;
                                                   SumIndexFields=Quantity }
    {    ;Forecast Summary Code,Location Code,Starting Date }
    {    ;Item No.,Variant Code,Location Code,Starting Date,Date Adjusted,Time Adjusted }
    {    ;Unusual Demand Adjust                    }
  }
  FIELDGROUPS
  {
  }
  CODE
  {
    VAR
      LocInvPeriod@1240030000 : Record 14000553;
      Text001@1240030001 : TextConst 'ENU=Unable to delete forecast adjustment %1 %2 %3 from a closed period.';
      ForecastSummaryEntry@1240030002 : Record 14000587;

    PROCEDURE UpdateForecastView@1240030001();
    BEGIN
      ForecastSummaryEntry.RESET;
      ForecastSummaryEntry.SETCURRENTKEY("Location Code","Item No.","Variant Code");
      ForecastSummaryEntry.SETRANGE("Location Code","Location Code");
      ForecastSummaryEntry.SETRANGE("Item No.","Item No.");
      ForecastSummaryEntry.SETRANGE("Variant Code","Variant Code");
      ForecastSummaryEntry.SETRANGE("Starting Date","Starting Date");
      IF ForecastSummaryEntry.FIND('-') THEN
        REPEAT
          ForecastSummaryEntry."Review Pending" := TRUE;
          ForecastSummaryEntry.MODIFY;
        UNTIL ForecastSummaryEntry.NEXT = 0;
    END;

    BEGIN
    END.
  }
}

